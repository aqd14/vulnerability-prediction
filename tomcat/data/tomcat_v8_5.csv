component|version|type|bug_id|change|link
Catalina|Tomcat 8.5.37 (markt)|Update||Update the recommended minimum Tomcat Native version to 1.2.19. (markt)|
Other|Tomcat 8.5.37 (markt)|Update||Update the packaged version of the Tomcat Native Library to 1.2.19 to pick up the latest Windows binaries built with APR 1.6.5 and OpenSSL 1.1.1a. (markt)|
Catalina|not released Tomcat 8.5.36 (markt)|Fix|62788|Add explicit logging configuration to write log files using UTF-8 to align with Tomcat's use of UTF-8 by default elsewhere. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=62788
Catalina|not released Tomcat 8.5.36 (markt)|Fix||The default Servlet should not override a previously set content-type. (remm)|
Catalina|not released Tomcat 8.5.36 (markt)|Add|62897|Provide a property (clearReferencesThreadLocals) on the standard Context implementation that enables the check for memory leaks via ThreadLocals to be disabled because this check depends on the use of an API that has been deprecated in later versions of Java. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=62897
Catalina|not released Tomcat 8.5.36 (markt)|Fix||Fix more storeconfig issues with duplicated SSL attributes. (remm)|
Catalina|not released Tomcat 8.5.36 (markt)|Fix|62968|Avoid unnecessary (and relatively expensive) getResources() call in the Mapper when processing rule 7. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=62968
Catalina|not released Tomcat 8.5.36 (markt)|Fix|62978|Update the RemoteIpValve to handle multiple values in the x-forwarded-proto header. Patch provided by Tom Groot. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=62978
Catalina|not released Tomcat 8.5.36 (markt)|Fix||Update the RemoteIpFilter to handle multiple values in the x-forwarded-proto header. Based on a patch provided by Tom Groot. (markt)|
Catalina|not released Tomcat 8.5.36 (markt)|Code|62986|Refactor the code that performs class scanning during web application start to make integration simpler for downstream users. Patch provided by rmannibucau. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=62986
Catalina|not released Tomcat 8.5.36 (markt)|Fix|62988|Fix the LoadBalancerDrainingValve so it works when the session cookie configuration is not explicitly declared. Based on a patch provided by Andreas Kurth. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=62988
Catalina|not released Tomcat 8.5.36 (markt)|Fix|63002|Fix setting rewrite qsdiscard flag. (remm)|https://bz.apache.org/bugzilla/show_bug.cgi?id=63002
Catalina|not released Tomcat 8.5.36 (markt)|Fix||Implement the requirements of section 8.2.2 2c of the Servlet specification and prevent a web application from deploying if it has fragments with duplicate names and is configured to use relative ordering of fragments. (markt)|
Coyote|not released Tomcat 8.5.36 (markt)|Fix||Avoid an exception when using Tomcat Native built with a version of OpenSSL that does not support TLSv1.3. (markt)|
Coyote|not released Tomcat 8.5.36 (markt)|Fix|62899|Prevent the incorrect timing out of connections when Servlet non-blocking I/O is used to read a request body over an HTTP/2 stream. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=62899
Coyote|not released Tomcat 8.5.36 (markt)|Fix||Avoid bad SSLHostConfig JMX registrations before init. (remm)|
Jasper|not released Tomcat 8.5.36 (markt)|Add|53737|Extend JspC, the precompilation tool, to include support for resource JARs. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=53737
Jasper|not released Tomcat 8.5.36 (markt)|Fix|62976|Avoid an IllegalStateException when using background compilation when tag files are packaged in JAR files. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=62976
Web applications|not released Tomcat 8.5.36 (markt)|Fix|62918|Filter out subtype mbeans to avoid breaking the connector status page. (remm)|https://bz.apache.org/bugzilla/show_bug.cgi?id=62918
Other|not released Tomcat 8.5.36 (markt)|Fix||Prevent an error when running in a Cygwin shell and the JAVA_ENDORSED_DIRS system property is empty. Patch provided by Zemian Deng. (markt)|
Other|not released Tomcat 8.5.36 (markt)|Add|53930|Add support for the CATALINA_OUT_CMD environment variable that defines a command to which captured stdout and stderr will be redirected. Patch provided by Casey Lucas. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=53930
Catalina|2018-11-07 Tomcat 8.5.35 (markt)|Add|61692|Add the ability to control which HTTP methods are handled by the CGI Servlet via a new initialization parameter cgiMethods. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=61692
Catalina|2018-11-07 Tomcat 8.5.35 (markt)|Fix|62687|Expose content length information for resources when using a compressed war. (remm)|https://bz.apache.org/bugzilla/show_bug.cgi?id=62687
Catalina|2018-11-07 Tomcat 8.5.35 (markt)|Fix|62737|Fix rewrite substitutions parsing of {} nesting. (remm)|https://bz.apache.org/bugzilla/show_bug.cgi?id=62737
Catalina|2018-11-07 Tomcat 8.5.35 (markt)|Fix||Add rewrite flags output when getting the rewrite configuration back. (remm)|
Catalina|2018-11-07 Tomcat 8.5.35 (markt)|Fix||Add missing qsdiscard flag to the rewrite flags as a cleaner way to discard the query string. (remm)|
Catalina|2018-11-07 Tomcat 8.5.35 (markt)|Fix||Add documentation about the files context.xml.default and web.xml.default that can be used to customize conf/context.xml and conf/web.xml on a per host basis. (fschumacher)|
Catalina|2018-11-07 Tomcat 8.5.35 (markt)|Fix||Ensure that a canonical path is always used for the docBase of a Context to ensure consistent behaviour. (markt)|
Catalina|2018-11-07 Tomcat 8.5.35 (markt)|Fix|62803|Fix SSL connector configuration processing in storeconfig. (remm)|https://bz.apache.org/bugzilla/show_bug.cgi?id=62803
Catalina|2018-11-07 Tomcat 8.5.35 (markt)|Fix|62797|Pass throwable to keep client aborts with status 200 rather than 500. Patch submitted by zikfat. (remm)|https://bz.apache.org/bugzilla/show_bug.cgi?id=62797
Catalina|2018-11-07 Tomcat 8.5.35 (markt)|Fix|62809|Correct a regression in the implementation of DIGEST authentication support for the Deployer Ant tasks (bug 45832) that prevented the DeployTask from working when authentication was required. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=62809
Catalina|2018-11-07 Tomcat 8.5.35 (markt)|Update||Update the recommended minimum Tomcat Native version to 1.2.18. (markt)|
Catalina|2018-11-07 Tomcat 8.5.35 (markt)|Add||Ignore an attribute named source on Context elements provided by StandardContext. This is to suppress warnings generated by the Eclipse / Tomcat integration provided by Eclipse. Based on a patch by mdfst13. (markt)|
Catalina|2018-11-07 Tomcat 8.5.35 (markt)|Add|62830|Added JniLifeCycleListener and static methods Library.loadLibrary(libraryName) and Library.load(filename) to load a native library by a shared class loader so that more than one Webapp can use it. (isapir)|https://bz.apache.org/bugzilla/show_bug.cgi?id=62830
Catalina|2018-11-07 Tomcat 8.5.35 (markt)|Fix||Correct a typo in the Spanish resource files. Patch provided by Diego Agulló. (markt)|
Catalina|2018-11-07 Tomcat 8.5.35 (markt)|Fix|62868|Order the Enumeration<URL> provided by WebappClassLoaderBase.getResources(String) according to the setting of the delegate flag. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=62868
Coyote|2018-11-07 Tomcat 8.5.35 (markt)|Add||Add TLSv1.3 to the default protocols and to the all alias for JSSE based TLS connectors when running on a JVM that supports TLS version 1.3. One such JVM is OpenJDK version 11. (rjung)|
Coyote|2018-11-07 Tomcat 8.5.35 (markt)|Fix|62685|Correct an error in host name validation parsing that did not allow a fully qualified domain name to terminate with a period. Patch provided by AG. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=62685
Coyote|2018-11-07 Tomcat 8.5.35 (markt)|Fix|62739|Do not reject requests with an empty HTTP Host header. Such requests are unusual but not invalid. Patch provided by Michael Orr. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=62739
Coyote|2018-11-07 Tomcat 8.5.35 (markt)|Add|62748|Add TLS 1.3 support for the APR/Native connector and the NIO/NIO2 connector when using the OpenSSL backed JSSE implementation. (schultz/markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=62748
Coyote|2018-11-07 Tomcat 8.5.35 (markt)|Fix|62791|Remove an unnecessary check in the NIO TLS implementation that prevented from secure WebSocket connections from being established. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=62791
Coyote|2018-11-07 Tomcat 8.5.35 (markt)|Fix||Fix server initiated TLS renegotiation to obtain a client certificate when using NIO/NIO2 and the OpenSSL backed JSSE TLS implementation. (markt)|
Coyote|2018-11-07 Tomcat 8.5.35 (markt)|Fix|62871|Improve MBeans for Endpoint instances (type ThreadPool in JMX) by using explicit declaration of attributes and operations rather than relying on introspection. Add a new MBean to expose the Socketproperties values. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=62871
Jasper|2018-11-07 Tomcat 8.5.35 (markt)|Fix||Correct parsing of XML whitespace in TLD function signatures that incorrectly only looked for the space character. (markt)|
Jasper|2018-11-07 Tomcat 8.5.35 (markt)|Fix|62674|Correct a regression in the stand-alone JSP compiler utility, JspC, caused by the fix for 53492, that caused the JSP compiler to hang. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=62674
Jasper|2018-11-07 Tomcat 8.5.35 (markt)|Fix|62721|Correct generation of web.xml header when using JspC. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=62721
Jasper|2018-11-07 Tomcat 8.5.35 (markt)|Fix|62757|Correct a regression in the fix for 62603 that caused NullPointerExceptions when compiling tag files on first access when development mode was disabled and background compilation was enabled. Based on a patch by Jordi Llach. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=62757
WebSocket|2018-11-07 Tomcat 8.5.35 (markt)|Fix|62731|Make the URI returned by HandshakeRequest.getRequestURI() and Session.getRequestURI() absolute so that the scheme, host and port are accessible. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=62731
Web applications|2018-11-07 Tomcat 8.5.35 (markt)|Fix|62676|Expand the CORS filter documentation to make it clear that explicit configuration is required to enable support for cross-origin requests. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=62676
Web applications|2018-11-07 Tomcat 8.5.35 (markt)|Fix|62712|Correct NPE in Manager application when attempting to view configured certificates for an APR/native TLS connector. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=62712
Web applications|2018-11-07 Tomcat 8.5.35 (markt)|Fix|62761|Correct the advanced CORS example in the Filter documentation to use a valid configuration. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=62761
Web applications|2018-11-07 Tomcat 8.5.35 (markt)|Fix|62786|Add a note to the Context documentation to explain that, by default, settings for a Context element defined in server.xml will be overwritten by settings specified in a default context file such as conf/context.xml. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=62786
Web applications|2018-11-07 Tomcat 8.5.35 (markt)|Fix||Create a little visual separation between the Undeploy button and the other buttons in the Manager application. Patch provided by Łukasz Jąder. (markt)|
Other|2018-11-07 Tomcat 8.5.35 (markt)|Update||Update the internal fork of Apache Commons Pool 2 to d4e0e88 (2018-09-12) to pick up some bug fixes and enhancements. (markt)|
Other|2018-11-07 Tomcat 8.5.35 (markt)|Update||Update the packaged version of the Tomcat Native Library to 1.2.18 to pick up the latest Windows binaries built with APR 1.6.5 and OpenSSL 1.1.1. (markt)|
Catalina|2018-09-10 Tomcat 8.5.34 (markt)|Add||Make the isLocked() method of the LockOutRealm public and expose the method via JMX. (markt)|
Catalina|2018-09-10 Tomcat 8.5.34 (markt)|Fix||Improve the handling of path parameters when working with RequestDispatcher objects. (markt)|
Catalina|2018-09-10 Tomcat 8.5.34 (markt)|Fix|62664|Process requests with content type multipart/form-data to servlets with a @MultipartConfig annotation regardless of HTTP method. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=62664
Catalina|2018-09-10 Tomcat 8.5.34 (markt)|Fix|62667|Add recursion to rewrite substitution parsing. (remm)|https://bz.apache.org/bugzilla/show_bug.cgi?id=62667
Catalina|2018-09-10 Tomcat 8.5.34 (markt)|Fix|62669|When using the SSIFilter and a resource does not specify a content type, do not force the content type to application/x-octet-stream. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=62669
Catalina|2018-09-10 Tomcat 8.5.34 (markt)|Fix|62670|Adjust the memory leak protection for the DriverManager so that JDBC drivers located in $CATALINA_HOME/lib and $CATALINA_BASE/lib are loaded via the service loader mechanism when the protection is enabled. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=62670
Catalina|2018-09-10 Tomcat 8.5.34 (markt)|Fix||When generating a redirect to a directory in the Default Servlet, avoid generating a protocol relative redirect. (markt)|
Coyote|2018-09-10 Tomcat 8.5.34 (markt)|Fix||Fix potential deadlocks when using asynchronous Servlet processing with HTTP/2 connectors. (markt)|
Coyote|2018-09-10 Tomcat 8.5.34 (markt)|Fix|62620|Fix corruption of response bodies when writing large bodies using asynchronous processing over HTTP/2. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=62620
Coyote|2018-09-10 Tomcat 8.5.34 (markt)|Fix|62628|Additional fixes for output corruption of response bodies when writing large bodies using asynchronous processing over HTTP/2. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=62628
Jasper|2018-09-10 Tomcat 8.5.34 (markt)|Fix||Correct the JSP version in the X-PoweredBy HTTP header generated when the xpoweredBy option is enabled. (markt)|
Jasper|2018-09-10 Tomcat 8.5.34 (markt)|Fix|62662|Fix the corruption of web.xml output during JSP compilation caused by the fix for 53492. Patch provided by Bernhard Frauendienst. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=62662
Web applications|2018-09-10 Tomcat 8.5.34 (markt)|Add||Expand the information in the documentation web application regarding the use of CATALINA_HOME and CATALINA_BASE. Patch provided by Marek Czernek. (markt)|
Web applications|2018-09-10 Tomcat 8.5.34 (markt)|Fix|62652|Make it clearer that the version of DBCP that is packaged in Tomcat 8.5.x is DBCP 2. Correct the names of some DBCP 2 configuration attributes that changed between 1.x and 2.x. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=62652
Web applications|2018-09-10 Tomcat 8.5.34 (markt)|Add|62666|Expand internationalisation support in the Manager application to include the server status page and provide Russian translations in addition to English. Patch provided by Artem Chebykin. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=62666
Other|2018-09-10 Tomcat 8.5.34 (markt)|Fix||Switch the build script to use http for downloads from an ASF mirror using the closer.lua script to avoid failures due to HTTPS to HTTP redirects. (rjung)|
Catalina|2018-08-17 Tomcat 8.5.33 (markt)|Fix||Ensure that the HTTP Vary header is set correctly when using the CORS filter and improve the cacheability of requests that pass through the COPRS filter. (markt)|
Catalina|2018-08-17 Tomcat 8.5.33 (markt)|Fix|62527|Revert restriction of JNDI to the java: namespace. (remm)|https://bz.apache.org/bugzilla/show_bug.cgi?id=62527
Catalina|2018-08-17 Tomcat 8.5.33 (markt)|Add||Introduce a new class - MultiThrowable - to report exceptions when multiple actions are taken where each action may throw an exception but all actions are taken before any errors are reported. Use this new class when reporting multiple container (e.g. web application) failures during start. (markt)|
Catalina|2018-08-17 Tomcat 8.5.33 (markt)|Fix||Correctly decode URL paths (+ should not be decoded to a space in the path) in the RequestDispatcher and the web application class loader. (markt)|
Catalina|2018-08-17 Tomcat 8.5.33 (markt)|Add||Make logout more robust if JASPIC subject is unexpectedly unavailable. (markt)|
Catalina|2018-08-17 Tomcat 8.5.33 (markt)|Fix|62547|JASPIC cleanSubject() was not called on logout when the authenticator was configured to cache the authenticated Principal. Patch provided by Guillermo González de Agüero. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=62547
Catalina|2018-08-17 Tomcat 8.5.33 (markt)|Add|62559|Add jaxb-*.jar to the list of JARs ignored by StandardJarScanner. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=62559
Catalina|2018-08-17 Tomcat 8.5.33 (markt)|Add|62560|Add oraclepki.jar to the list of JARs ignored by StandardJarScanner. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=62560
Catalina|2018-08-17 Tomcat 8.5.33 (markt)|Add|62607|"Return a non-zero exit code from catalina.[bat|sh] run if Tomcat fails to start. (markt)"|https://bz.apache.org/bugzilla/show_bug.cgi?id=62607
Catalina|2018-08-17 Tomcat 8.5.33 (markt)|Code||Remove ServletException from declaration of Tomcat.addWebapp(String,String) since it is never thrown. Patch provided by Tzafrir. (markt)|
Catalina|2018-08-17 Tomcat 8.5.33 (markt)|Fix||Use short circuit logic to prevent potential NPE in CorsFilter. (fschumacher)|
Catalina|2018-08-17 Tomcat 8.5.33 (markt)|Code||Simplify construction of appName from container name in JAASRealm. (fschumacher)|
Coyote|2018-08-17 Tomcat 8.5.33 (markt)|Update|60560|Add support for using an inherited channel to the NIO connector. Based on a patch submitted by Thomas Meyer with testing and suggestions by Coty Sutherland. (remm)|https://bz.apache.org/bugzilla/show_bug.cgi?id=60560
Coyote|2018-08-17 Tomcat 8.5.33 (markt)|Fix|62507|Ensure that JSSE based TLS connectors work correctly with a DKS keystore. Note: DKS keystores require Java 8 or later. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=62507
Coyote|2018-08-17 Tomcat 8.5.33 (markt)|Fix||Refactor code that adds an additional header name to the Vary HTTP response header to use a common utility method that addresses several additional edge cases. (markt)|
Coyote|2018-08-17 Tomcat 8.5.33 (markt)|Fix|62515|When a connector is configured (via setting bindOnInit to false) to bind/unbind the server socket during start/stop, close the socket earlier in the stop process so new connections do not sit in the TCP backlog during the shutdown process only to be dropped as stop completes. In this scenario new connections will now be refused immediately. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=62515
Coyote|2018-08-17 Tomcat 8.5.33 (markt)|Fix|62526|Correctly handle PKCS12 format key stores when the key store password is configured to be the empty string. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=62526
Coyote|2018-08-17 Tomcat 8.5.33 (markt)|Fix||Fix error in back-port of HTTP/2 compression that meant compression was never enabled. (markt)|
Coyote|2018-08-17 Tomcat 8.5.33 (markt)|Fix|62605|Ensure ReadListener.onDataAvailable() is called when the initial request body data arrives after the request headers when using asynchronous processing over HTTP/2. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=62605
Coyote|2018-08-17 Tomcat 8.5.33 (markt)|Fix|62614|Ensure that WriteListener.onWritePossible() is called after isReady() returns false and the window size is subsequently incremented when using asynchronous processing over HTTP/2. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=62614
Jasper|2018-08-17 Tomcat 8.5.33 (markt)|Fix|53011|When pre-compiling with JspC, report all compilation errors rather than stopping after the first error. A new option -failFast can be used to restore the previous behaviour of stopping after the first error. Based on a patch provided by Marc Pompl. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=53011
Jasper|2018-08-17 Tomcat 8.5.33 (markt)|Add|53492|Make the Java file generation process multi-threaded. By default, one thread will be used per core. Based on a patch by Dan Fabulich. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=53492
Jasper|2018-08-17 Tomcat 8.5.33 (markt)|Add|62453|Add a performance optimisation for using expressions in tags that depend on uninitialised tag attributes with implied scope. Generally, using an explicit scope with tag attributes in EL is the best way to avoid various potential performance issues. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=62453
Jasper|2018-08-17 Tomcat 8.5.33 (markt)|Fix||Correctly decode URL paths (+ should not be decoded to a space in the path) in the Jasper class loader. (markt)|
Jasper|2018-08-17 Tomcat 8.5.33 (markt)|Fix|62603|Fix a potential race condition when development mode is disabled and background compilation checks are enabled. It was possible that some updates would not take effect and/or ClassNotFoundExceptions would occur. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=62603
WebSocket|2018-08-17 Tomcat 8.5.33 (markt)|Fix|62596|Remove the limit on the size of the initial HTTP upgrade request used to establish the web socket connection. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=62596
Web applications|2018-08-17 Tomcat 8.5.33 (markt)|Add|61565|Add the ability to trigger a reloading of TLS host configuration (certificate and key files, server.xml is not re-parsed) via the Manager web application. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=61565
Web applications|2018-08-17 Tomcat 8.5.33 (markt)|Add|62558|Add Russian translations for the Manager and Host Manager web applications. Based on a patch by Ivan Krasnov. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=62558
Web applications|2018-08-17 Tomcat 8.5.33 (markt)|Add|62561|Add advanced class loader configuration information regarding the use of the Server and Shared class loaders to the documentation web application. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=62561
Tribes|2018-08-17 Tomcat 8.5.33 (markt)|Fix||Ensures that the specified rxBufSize is correctly set to receiver buffer size. (kfujino)|
Other|2018-08-17 Tomcat 8.5.33 (markt)|Update||Support building with Java 9+ while preserving the Java 7 compatibility at runtime (requires Ant 1.9.8 or later). (ebourg)|
Other|2018-08-17 Tomcat 8.5.33 (markt)|Update||Update WSDL4J library to version 1.6.3 (from 1.6.2). (kkolinko)|
Other|2018-08-17 Tomcat 8.5.33 (markt)|Update||Update JUnit library to version 4.12 (from 4.11). (kkolinko)|
Other|2018-08-17 Tomcat 8.5.33 (markt)|Update||Downgrade CGLib library used for testing with EasyMock to version 2.2.2 (from 2.2.3) as version 2.2.3 is not available from Maven Central. (markt/kkolinko)|
Other|2018-08-17 Tomcat 8.5.33 (markt)|Add||Implement checksum checks when downloading dependencies that are used to build Tomcat. (kkolinko)|
Other|2018-08-17 Tomcat 8.5.33 (markt)|Fix||Fixed spelling. Patch provided by Jimmy Casey via GitHub. (violetagg)|
Other|2018-08-17 Tomcat 8.5.33 (markt)|Update||Update the internal fork of Apache Commons Pool 2 to 3e02523 (2018-08-09) to pick up some bug fixes and enhancements. (markt)|
Other|2018-08-17 Tomcat 8.5.33 (markt)|Update||Update the internal fork of Apache Commons DBCP 2 to abc0484 (2018-08-09) to pick up some bug fixes and enhancements. (markt)|
Other|2018-08-17 Tomcat 8.5.33 (markt)|Fix||Correct various spelling errors throughout the source code and documentation. Patch provided by Kazuhiro Sera. (markt)|
Catalina|2018-06-25 Tomcat 8.5.32 (markt)|Fix||Treat the <mapped-name> element of a <env-entry> in web.xml in the same way as the mappedName element of the equivalent @Resource annotation. Both now attempt to set the mappedName property of the resource. (markt)|
Catalina|2018-06-25 Tomcat 8.5.32 (markt)|Fix||Correct the processing of resources with <injection-target>s defined in web.xml. First look for a match using JavaBean property names and then, only if a match is not found, look for a match using fields. (markt)|
Catalina|2018-06-25 Tomcat 8.5.32 (markt)|Fix||When restoring a saved request with a request body after FORM authentication, ensure that calls to the HttpServletRequest methods getRequestURI(), getQueryString() and getProtocol() are not corrupted by the processing of the saved request body. (markt)|
Catalina|2018-06-25 Tomcat 8.5.32 (markt)|Fix||JNDI resources that are defined with injection targets but no value are now treated as if the resource is not defined. (markt)|
Catalina|2018-06-25 Tomcat 8.5.32 (markt)|Fix||Ensure that JNDI names used for <lookup-name> entries in web.xml and for lookup elements of @Resource annotations specify a name with an explicit java: namespace. (markt)|
Catalina|2018-06-25 Tomcat 8.5.32 (markt)|Code||Refactor the org.apache.naming package to reduce duplicate code. Duplicate code identified by the Simian tool. (markt)|
Catalina|2018-06-25 Tomcat 8.5.32 (markt)|Fix|50019|Add support for <lookup-name>. Based on a patch by Gurkan Erdogdu. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=50019
Catalina|2018-06-25 Tomcat 8.5.32 (markt)|Add|51953|Add the RemoteCIDRFilter and RemoteCIDRValve that can be used to allow/deny requests based on IPv4 and/or IPv6 client address where the IP ranges are defined using CIDR notation. Based on a patch by Francis Galiegue. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=51953
Catalina|2018-06-25 Tomcat 8.5.32 (markt)|Fix|62343|Make CORS filter defaults more secure. This is the fix for CVE-2018-8014. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=62343
Catalina|2018-06-25 Tomcat 8.5.32 (markt)|Fix||Ensure that the web application resources implementation does not incorrectly cache results for resources that are only visible as class loader resources. (markt)|
Catalina|2018-06-25 Tomcat 8.5.32 (markt)|Fix||Make all loggers associated with Tomcat provided Filters non-static to ensure that log messages are not lost when a web application is reloaded. (markt)|
Catalina|2018-06-25 Tomcat 8.5.32 (markt)|Fix||Correct the manifest for the annotations-api.jar. The JAR implements the Common Annotations API 1.2 and the manifest should reflect that. (markt)|
Catalina|2018-06-25 Tomcat 8.5.32 (markt)|Fix||Switch to non-static loggers where there is a possibility of a logger becoming associated with a web application class loader causing log messages to be lost if the web application is stopped. (markt)|
Catalina|2018-06-25 Tomcat 8.5.32 (markt)|Add|62389|Add the IPv6 loopback address to the default internalProxies regular expression. Patch by Craig Andrews. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=62389
Catalina|2018-06-25 Tomcat 8.5.32 (markt)|Fix||In the RemoteIpValve and RemoteIpFilter, correctly handle the case when the request passes through one or more trustedProxies but no internalProxies. Based on a patch by zhanhb. (markt)|
Catalina|2018-06-25 Tomcat 8.5.32 (markt)|Fix||Correct the logic in MBeanFactory.removeConnector() to ensure that the correct Connector is removed when there are multiple Connectors using different addresses but the same port. (markt)|
Catalina|2018-06-25 Tomcat 8.5.32 (markt)|Fix||Make JAASRealm mis-configuration more obvious by requiring the authenticated Subject to include at least one Principal of a type specified by userClassNames. (markt)|
Catalina|2018-06-25 Tomcat 8.5.32 (markt)|Fix|62476|Use GMT timezone for the value of Expires header as required by HTTP specification (RFC 7231, 7234). (kkolinko)|https://bz.apache.org/bugzilla/show_bug.cgi?id=62476
Coyote|2018-06-25 Tomcat 8.5.32 (markt)|Fix||Consistent exception propagation for NIO2 SSL close. (remm)|
Coyote|2018-06-25 Tomcat 8.5.32 (markt)|Fix||Log an error message if the AJP connector detects the the reverse proxy is sending AJP messages that are too large for the configured packetSize. (markt)|
Coyote|2018-06-25 Tomcat 8.5.32 (markt)|Fix||Relax Host validation by removing the requirement that the final component of a FQDN must be alphabetic. (markt)|
Coyote|2018-06-25 Tomcat 8.5.32 (markt)|Fix|62371|Improve logging of Host validation failures. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=62371
Coyote|2018-06-25 Tomcat 8.5.32 (markt)|Fix||Add missing handshake timeout for NIO2. (remm)|
Coyote|2018-06-25 Tomcat 8.5.32 (markt)|Fix||Correctly handle a digest authorization header when the user name contains an escaped character. (markt)|
Coyote|2018-06-25 Tomcat 8.5.32 (markt)|Fix||Correctly handle a digest authorization header when one of the hex field values ends the header with in an invalid character. (markt)|
Coyote|2018-06-25 Tomcat 8.5.32 (markt)|Fix||Correctly handle an invalid quality value in an Accept-Language header. (markt)|
Coyote|2018-06-25 Tomcat 8.5.32 (markt)|Docs|62423|Fix SSL docs CRL attribute typo. (remm)|https://bz.apache.org/bugzilla/show_bug.cgi?id=62423
Coyote|2018-06-25 Tomcat 8.5.32 (markt)|Fix||Improve IPv6 validation by ensuring that IPv4-Mapped IPv6 addresses do not contain leading zeros in the IPv4 part. Based on a patch by Katya Stoycheva. (markt)|
Coyote|2018-06-25 Tomcat 8.5.32 (markt)|Fix||Fix NullPointerException thrown from  replaceSystemProperties() when trying to log messages. (csutherl)|
Coyote|2018-06-25 Tomcat 8.5.32 (markt)|Fix||Avoid unnecessary processing of async timeouts. (markt)|
Jasper|2018-06-25 Tomcat 8.5.32 (markt)|Add|50234|Add the capability to generate a web-fragment.xml file to JspC. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=50234
Jasper|2018-06-25 Tomcat 8.5.32 (markt)|Fix|62080|Ensure that all reads of the current thread's context class loader made by the UEL API and implementation are performed via a PrivilegedAction to ensure that a SecurityException is not triggered when running under a SecurityManager. (mark)|https://bz.apache.org/bugzilla/show_bug.cgi?id=62080
Jasper|2018-06-25 Tomcat 8.5.32 (markt)|Fix|62350|Refactor org.apache.jasper.runtime.BodyContentImpl so a SecurityException is not thrown when running under a SecurityManger and additional permissions are not required in the catalina.policy file. This is a follow-up to the fix for 43925. (kkolinko/markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=62350
Jasper|2018-06-25 Tomcat 8.5.32 (markt)|Fix||Update web.xml, web-fragment.xml and web.xml extracts generated by JspC to use the Servlet 3.1 version of the relevant schemas. (markt)|
Cluster|2018-06-25 Tomcat 8.5.32 (markt)|Fix||Remove duplicate calls when creating a replicated session to reduce the time taken to create the session and thereby reduce the chances of a subsequent session update message being ignored because the session does not yet exist. (markt)|
WebSocket|2018-06-25 Tomcat 8.5.32 (markt)|Fix||When decoding of path parameter failed, make sure to throw DecodeException instead of throwing ArrayIndexOutOfBoundsException. (kfujino)|
WebSocket|2018-06-25 Tomcat 8.5.32 (markt)|Fix||Enable host name verification when using TLS with the WebSocket client. (markt)|
Tribes|2018-06-25 Tomcat 8.5.32 (markt)|Fix||Ensure that the correct default value is returned when retrieve unset properties in McastService. (kfujino)|
jdbc-pool|2018-06-25 Tomcat 8.5.32 (markt)|Fix||When logValidationErrors is set to true, the connection validation error is logged as SEVERE instead of WARNING. (kfujino)|
Other|2018-06-25 Tomcat 8.5.32 (markt)|Fix|62391|Remove references to javaw.exe as this file is not required by Tomcat and the references prevent the use of the Server JRE. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=62391
Other|2018-06-25 Tomcat 8.5.32 (markt)|Update||Update the packaged version of the Tomcat Native Library to 1.2.17 to pick up the latest Windows binaries built with APR 1.6.3 and OpenSSL 1.0.2o. (markt)|
Other|2018-06-25 Tomcat 8.5.32 (markt)|Update|62458|Update the internal fork of Commons Pool 2 to dfef97b (2018-06-18) to pick up some bug fixes and enhancements. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=62458
Other|2018-06-25 Tomcat 8.5.32 (markt)|Update||Update the internal fork of Commons DBCP 2 to 2.4.0. (markt)|
Catalina|2018-05-03 Tomcat 8.5.31 (markt)|Fix|62263|Avoid a NullPointerException when the RemoteIpValve processes a request for which no Context can be found. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=62263
Catalina|2018-05-03 Tomcat 8.5.31 (markt)|Fix||Fix a rare edge case that is unlikely to occur in real usage. This edge case meant that writing long streams of UTF-8 characters to the HTTP response that consisted almost entirely of surrogate pairs could result in one surrogate pair being dropped. (markt)|
Catalina|2018-05-03 Tomcat 8.5.31 (markt)|Fix||"Register MBean when DataSource Resource  type=""javax.sql.XADataSource"". Patch provided by Masafumi Miura. (csutherl)"|
Catalina|2018-05-03 Tomcat 8.5.31 (markt)|Add||Update the internal fork of Apache Commons BCEL to r1829827 to add early access Java 11 support to the annotation scanning code. (markt)|
Catalina|2018-05-03 Tomcat 8.5.31 (markt)|Fix|62297|Enable the CrawlerSessionManagerValve to correctly handle bots that crawl multiple hosts and/or web applications when the Valve is configured on a Host or an Engine. (fschumacher)|https://bz.apache.org/bugzilla/show_bug.cgi?id=62297
Catalina|2018-05-03 Tomcat 8.5.31 (markt)|Fix|62309|Fix a SecurityException when using JASPIC under a SecurityManager when authentication is not mandatory. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=62309
Catalina|2018-05-03 Tomcat 8.5.31 (markt)|Fix|62329|Correctly list resources in JAR files when directories do not have dedicated entries. Patch provided by Meelis Müür. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=62329
Catalina|2018-05-03 Tomcat 8.5.31 (markt)|Add||Collapse multiple leading / characters to a single / in the return value of HttpServletRequest#getContextPath() to avoid issues if the value is used with HttpServletResponse#sendRedirect(). This behaviour is enabled by default and configurable via the new Context attribute allowMultipleLeadingForwardSlashInPath. (markt)|
Catalina|2018-05-03 Tomcat 8.5.31 (markt)|Fix||Improve handing of overflow in the UTF-8 decoder with supplementary characters. (markt)|
Coyote|2018-05-03 Tomcat 8.5.31 (markt)|Fix||Correct off-by-one error in thread pool that allowed thread pools to increase in size to one more than the configured limit. Patch provided by usc. (markt)|
Coyote|2018-05-03 Tomcat 8.5.31 (markt)|Fix||Prevent unexpected TLS handshake failures caused by errors during a previous handshake that were not correctly cleaned-up when using the NIO or NIO2 connector with the OpenSSLImplementation. (markt)|
Coyote|2018-05-03 Tomcat 8.5.31 (markt)|Add||Enable strict validation of the provided host name and port for all connectors. Requests with invalid host names and/or ports will be rejected with a 400 response. (markt)|
Coyote|2018-05-03 Tomcat 8.5.31 (markt)|Add|62273|Implement configuration options to work-around specification non-compliant user agents (including all the major browsers) that do not correctly %nn encode URI paths and query strings as required by RFC 7230 and RFC 3986. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=62273
Jasper|2018-05-03 Tomcat 8.5.31 (markt)|Fix||Enable ECJ version 4.7 and later to be used as a drop in replacement for the ECJ version that ships with Apache Tomcat. (markt)|
Jasper|2018-05-03 Tomcat 8.5.31 (markt)|Fix||Enable Java 10 to be specified as a JSP source and/or target if a newer ECJ version is used. (markt)|
Jasper|2018-05-03 Tomcat 8.5.31 (markt)|Fix|62287|Do not rely on hash codes to test instances of ValueExpressionImpl for equality. Patch provided by Mark Struberg. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=62287
WebSocket|2018-05-03 Tomcat 8.5.31 (markt)|Fix|62301|Correct a regression in the fix for 61491 that didn't correctly handle a final empty message part in all circumstances when using PerMessageDeflate. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=62301
WebSocket|2018-05-03 Tomcat 8.5.31 (markt)|Fix|62332|Ensure WebSocket connections are closed after an I/O error is experienced reading from the client. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=62332
Other|2018-05-03 Tomcat 8.5.31 (markt)|Fix||Avoid warning when running under Cygwin when the JAVA_ENDORSED_DIRS environment variable is not set. Patch provided by Zemian Deng. (markt)|
Catalina|2018-04-07 Tomcat 8.5.30 (markt)|Fix|51195|Avoid a false positive report of a web application memory leak by clearing ObjectStreamClass$Caches of classes loaded by the web application when the web application is stopped. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=51195
Catalina|2018-04-07 Tomcat 8.5.30 (markt)|Fix|52688|Add support for the maxDays attribute to the AccessLogValve and ExtendedAccessLogValve. This allows the maximum number of days for which rotated access logs should be retained before deletion to be defined. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=52688
Catalina|2018-04-07 Tomcat 8.5.30 (markt)|Fix||Ensure the MBean names for the SSLHostConfig and SSLHostConfigCertificate are correctly formed when the Connector is bound to a specific IP address. (markt)|
Catalina|2018-04-07 Tomcat 8.5.30 (markt)|Fix|62168|When using the PersistentManager honor a value of -1 for minIdleSwap and do not swap out sessions to keep the number of active sessions under maxActive. Patch provided by Holger Sunke. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=62168
Catalina|2018-04-07 Tomcat 8.5.30 (markt)|Fix|62172|Improve Javadoc for org.apache.catalina.startup.Constants and ensure that the constants are correctly used. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=62172
Catalina|2018-04-07 Tomcat 8.5.30 (markt)|Fix|62175|Avoid infinite recursion, when trying to validate a session while loading it with PersistentManager. (fschumacher)|https://bz.apache.org/bugzilla/show_bug.cgi?id=62175
Catalina|2018-04-07 Tomcat 8.5.30 (markt)|Fix||Ensure that NamingContextListener instances are only notified once of property changes on the associated naming resources. (markt)|
Catalina|2018-04-07 Tomcat 8.5.30 (markt)|Add||Add LoadBalancerDrainingValve, a Valve designed to reduce the amount of time required for a node to drain its authenticated users. (schultz)|
Catalina|2018-04-07 Tomcat 8.5.30 (markt)|Add|62224|Disable the forkJoinCommonPoolProtection of the JreMemoryLeakPreventionListener when running on Java 9 and above since the underlying JRE bug has been fixed. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=62224
Coyote|2018-04-07 Tomcat 8.5.30 (markt)|Fix||Avoid potential loop in APR/Native poller. (markt)|
Coyote|2018-04-07 Tomcat 8.5.30 (markt)|Fix||Ensure streams that are received but not processed are excluded from the tracking of maximum ID of processed streams. (markt)|
Coyote|2018-04-07 Tomcat 8.5.30 (markt)|Fix||Refactor the check for a paused connector to consistently prevent new streams from being created after the connector has been paused. (markt)|
Coyote|2018-04-07 Tomcat 8.5.30 (markt)|Fix||Improve debug logging for HTTP/2 pushed streams. (markt)|
Coyote|2018-04-07 Tomcat 8.5.30 (markt)|Fix||The OpenSSL engine SSL session will now ignore invalid accesses. (remm)|
Coyote|2018-04-07 Tomcat 8.5.30 (markt)|Fix|62177|Correct two protocol errors with HTTP/2 PUSH_PROMISE frames. Firstly, the HTTP/2 protocol only permits pushes to be sent on peer initiated requests. Secondly, pushes must be sent in order of increasing stream ID. These restriction were not being enforced leading to protocol errors at the client. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=62177
Web applications|2018-04-07 Tomcat 8.5.30 (markt)|Add||Add document for FragmentationInterceptor. (kfujino)|
Web applications|2018-04-07 Tomcat 8.5.30 (markt)|Add||Document how the roles for an authenticated user are determined when the CombinedRealm is used. (markt)|
Tribes|2018-04-07 Tomcat 8.5.30 (markt)|Fix||Add JMX support for FragmentationInterceptor in order to prevent warning of startup. (kfujino)|
jdbc-pool|2018-04-07 Tomcat 8.5.30 (markt)|Fix||Ensure that SQLWarning has been cleared when connection returns to the pool. (kfujino)|
jdbc-pool|2018-04-07 Tomcat 8.5.30 (markt)|Add||Enable clearing of SQLWarning via JMX. (kfujino)|
jdbc-pool|2018-04-07 Tomcat 8.5.30 (markt)|Fix||Ensure that parameters have been cleared when PreparedStatement and/or CallableStatement are cached. (kfujino)|
jdbc-pool|2018-04-07 Tomcat 8.5.30 (markt)|Fix||Enable PoolCleaner to be started even if validationQuery is not set. (kfujino)|
Other|2018-04-07 Tomcat 8.5.30 (markt)|Fix|62164|Switch the build script to use TLS for downloads from SourceForge and Maven Central to avoid failures due to HTTP to HTTPS redirects. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=62164
Other|2018-04-07 Tomcat 8.5.30 (markt)|Add||Always report the OS's umask when launching the JVM. (schultz)|
Catalina|2018-03-08 Tomcat 8.5.29 (markt)|Fix||Minor optimization when calling class transformers. (rjung)|
Catalina|2018-03-08 Tomcat 8.5.29 (markt)|Fix||Prevent Tomcat from applying gzip compression to content that is already compressed with brotli compression. Based on a patch provided by burka. (markt)|
Catalina|2018-03-08 Tomcat 8.5.29 (markt)|Fix|62090|Null container names are not allowed. (remm)|https://bz.apache.org/bugzilla/show_bug.cgi?id=62090
Catalina|2018-03-08 Tomcat 8.5.29 (markt)|Fix|62104|Fix programmatic login regression as the NonLoginAuthenticator has to be set for it to work (if no login method is specified). (remm)|https://bz.apache.org/bugzilla/show_bug.cgi?id=62104
Catalina|2018-03-08 Tomcat 8.5.29 (markt)|Fix|62117|Improve error message in catalina.sh when calling kill -0 <pid> fails. Based on a suggestion from Mark Morschhaeuser. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=62117
Catalina|2018-03-08 Tomcat 8.5.29 (markt)|Fix|62118|Correctly create a JNDI ServiceRef using the specified interface rather than the concrete type. Based on a suggestion by Ángel Álvarez Páscua. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=62118
Catalina|2018-03-08 Tomcat 8.5.29 (markt)|Fix||Fix for RequestDumperFilter log attribute. Patch provided by Kirill Romanov via Github. (violetagg)|
Catalina|2018-03-08 Tomcat 8.5.29 (markt)|Fix|62123|Avoid ConcurrentModificationException when attempting to clean up application triggered RMI memory leaks on web application stop. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=62123
Catalina|2018-03-08 Tomcat 8.5.29 (markt)|Fix||Correct a regression in the fix for 60276 that meant that compression was applied to all MIME types. Patch provided by Stefan Knoblich. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=60276
Coyote|2018-03-08 Tomcat 8.5.29 (markt)|Fix||Add minor HPACK fixes, based on fixes by Stuart Douglas. (remm)|
Coyote|2018-03-08 Tomcat 8.5.29 (markt)|Fix|61751|Follow up fix so that OpenSSL engine returns underflow when unwrapping if no bytes were produced and the input is empty. (remm)|https://bz.apache.org/bugzilla/show_bug.cgi?id=61751
Coyote|2018-03-08 Tomcat 8.5.29 (markt)|Fix||Minor OpenSSL engine cleanups. (remm)|
Coyote|2018-03-08 Tomcat 8.5.29 (markt)|Fix||NIO SSL handshake should throw an exception on overflow status, like NIO2 SSL. (remm)|
Web applications|2018-03-08 Tomcat 8.5.29 (markt)|Add|48672|Add documentation for the Host Manager web application. Patch provided by Marek Czernek. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=48672
Web applications|2018-03-08 Tomcat 8.5.29 (markt)|Add||Work-around a known, non-specification compliant behaviour in some versions of IE that can allow XSS when the Manager application generates a plain text response. Based on a suggestion from Muthukumar Marikani. (markt)|
Other|2018-03-08 Tomcat 8.5.29 (markt)|Update||Update the build script so MD5 hashes are no longer generated for releases as per the change in the ASF distribution policy. (markt)|
Catalina|2018-02-11 Tomcat 8.5.28 (markt)|Fix||Prevent a stack trace being written to standard out when running on Java 10 due to changes in the LogManager implementation. (markt)|
Catalina|2018-02-11 Tomcat 8.5.28 (markt)|Fix|62000|When a JNDI reference cannot be resolved, ensure that the root cause exception is reported rather than swallowed. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=62000
Catalina|2018-02-11 Tomcat 8.5.28 (markt)|Fix|62036|When caching an authenticated user Principal in the session when the web application is configured with the NonLoginAuthenticator, cache the internal Principal object rather than the user facing Principal object as Tomcat requires the internal object to correctly process later authorization checks. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=62036
Catalina|2018-02-11 Tomcat 8.5.28 (markt)|Fix||Avoid duplicate load attempts if one has been made already. (remm)|
Catalina|2018-02-11 Tomcat 8.5.28 (markt)|Fix||Avoid NPE in ThreadLocalLeakPreventionListener if there is no Engine. (remm)|
Catalina|2018-02-11 Tomcat 8.5.28 (markt)|Fix|62067|"Correctly apply security constraints mapped to the context root using a URL pattern of """". (markt)"|https://bz.apache.org/bugzilla/show_bug.cgi?id=62067
Catalina|2018-02-11 Tomcat 8.5.28 (markt)|Fix||When using Tomcat embedded, only perform Authenticator configuration once during web application start. (markt)|
Catalina|2018-02-11 Tomcat 8.5.28 (markt)|Fix||Process all ServletSecurity annotations at web application start rather than at servlet load time to ensure constraints are applied consistently. (markt)|
Coyote|2018-02-11 Tomcat 8.5.28 (markt)|Fix|61751|Fix truncated request input streams when using NIO2 with TLS. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=61751
Coyote|2018-02-11 Tomcat 8.5.28 (markt)|Fix|62023|Log error reporting multiple SSLHostConfig elements when using the APR Connector instead of crashing Tomcat. (csutherl)|https://bz.apache.org/bugzilla/show_bug.cgi?id=62023
Coyote|2018-02-11 Tomcat 8.5.28 (markt)|Fix|62032|Fix NullPointerException when certificateFile is not defined on an SSLHostConfig and unify the behavior when a certificateFile is defined but the file does not exist for both JKS and PEM file types. (csutherl)|https://bz.apache.org/bugzilla/show_bug.cgi?id=62032
WebSocket|2018-02-11 Tomcat 8.5.28 (markt)|Fix|62024|When closing a connection with an abnormal close, close the socket immediately rather than waiting for a close message from the client that may never arrive. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=62024
Webapps|2018-02-11 Tomcat 8.5.28 (markt)|Fix|62049|Fix missing class from manager 404 JSP error page. (remm)|https://bz.apache.org/bugzilla/show_bug.cgi?id=62049
jdbc-pool|2018-02-11 Tomcat 8.5.28 (markt)|Add||Enhance the JMX support for jdbc-pool in order to expose PooledConnection and JdbcInterceptors. (kfujino)|
jdbc-pool|2018-02-11 Tomcat 8.5.28 (markt)|Add||Add MBean for PooledConnection. (kfujino)|
jdbc-pool|2018-02-11 Tomcat 8.5.28 (markt)|Add|62011|Add MBean for StatementCache. (kfujino)|https://bz.apache.org/bugzilla/show_bug.cgi?id=62011
jdbc-pool|2018-02-11 Tomcat 8.5.28 (markt)|Add||Expose the cache size for each connection via JMX in StatementCache. (kfujino)|
jdbc-pool|2018-02-11 Tomcat 8.5.28 (markt)|Add||Add MBean for ResetAbandonedTimer. (kfujino)|
Other|2018-02-11 Tomcat 8.5.28 (markt)|Update||Update the NSIS Installer used to build the Windows installer to version 3.03. (kkolinko)|
Catalina|2018-01-22 Tomcat 8.5.27 (markt)|Fix||Correct a regression in the previous fix for 61916 that meant that any call to addHeader() would have been replaced with a call to setHeader() for all requests mapped to the AddDefaultCharsetFilter. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=61916
Coyote|2018-01-22 Tomcat 8.5.27 (markt)|Fix|61993|Improve handling for ByteChunk and CharChunk instances that grow close to the maximum size allowed by the JRE. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=61993
Jasper|2018-01-22 Tomcat 8.5.27 (markt)|Add|43925|Add a new system property (org.apache.jasper.runtime.BodyContentImpl.BUFFER_SIZE) to control the size of the buffer used by Jasper when buffering tag bodies. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=43925
Web applications|2018-01-22 Tomcat 8.5.27 (markt)|Fix|62006|Document the new JvmOptions9 command line parameter for tomcat8.exe. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=62006
Catalina|not released Tomcat 8.5.26 (markt)|Fix||Correct Javadoc errors in release build.|
Catalina|not released Tomcat 8.5.25 (markt)|Fix|47214|Use a loop to preload anonymous inner classes when running under a SecurityManager, to be safe for future changes in the code or using a different compiler. (kkolinko)|https://bz.apache.org/bugzilla/show_bug.cgi?id=47214
Catalina|not released Tomcat 8.5.25 (markt)|Add|57619|Implement a small optimisation to how JAR URLs are processed to reduce the storage of duplicate String objects in memory. Patch provided by Dmitri Blinov. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=57619
Catalina|not released Tomcat 8.5.25 (markt)|Fix||Add some missing NPEs to ServletContext. (remm)|
Catalina|not released Tomcat 8.5.25 (markt)|Fix|61916|Extend the AddDefaultCharsetFilter to add a character set when the content type is set via setHeader() or addHeader() as well as when it is set via setContentType(). (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=61916
Catalina|not released Tomcat 8.5.25 (markt)|Fix|61999|maxSavePostSize set to 0 should disable saving POST data during authentication. (remm)|https://bz.apache.org/bugzilla/show_bug.cgi?id=61999
Coyote|not released Tomcat 8.5.25 (markt)|Add|60276|Implement GZIP compression support for responses served over HTTP/2. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=60276
Coyote|not released Tomcat 8.5.25 (markt)|Fix||Do not call onDataAvailable without any data to read. (remm)|
Coyote|not released Tomcat 8.5.25 (markt)|Fix|61886|Log errors on non-container threads at DEBUG rather than INFO. The exception will be made available to the application via the asynchronous error handling mechanism. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=61886
Coyote|not released Tomcat 8.5.25 (markt)|Fix|61914|Possible NPE with Java 9 when creating a SSL engine. Patch submitted by Evgenij Ryazanov. (remm)|https://bz.apache.org/bugzilla/show_bug.cgi?id=61914
Coyote|not released Tomcat 8.5.25 (markt)|Fix|61918|Fix connectionLimitLatch counting when closing an already closed socket. Based on a patch by Ryan Fong. (remm)|https://bz.apache.org/bugzilla/show_bug.cgi?id=61918
Coyote|not released Tomcat 8.5.25 (markt)|Add||Add support for the OpenSSL ARIA ciphers to the OpenSSL to JSSE cipher mapping. (markt)|
Coyote|not released Tomcat 8.5.25 (markt)|Fix|61932|Allow a call to AsyncContext.dispatch() to terminate non-blocking I/O. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=61932
Coyote|not released Tomcat 8.5.25 (markt)|Fix|61948|Improve the handling of malformed ClientHello messages in the code that extracts the SNI information from a TLS handshake for the JSSE based NIO and NIO2 connectors. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=61948
Coyote|not released Tomcat 8.5.25 (markt)|Fix||Fix NIO2 handshaking with a full input buffer. (remm)|
Coyote|not released Tomcat 8.5.25 (markt)|Add||Return a simple, plain text error message if a client attempts to make a plain text HTTP connection to a TLS enabled NIO or NIO2 Connector. (markt)|
Coyote|not released Tomcat 8.5.25 (markt)|Fix||Correctly handle EOF when ServletInputStream.isReady() is called. (markt)|
Jasper|not released Tomcat 8.5.25 (markt)|Fix|61854|When using sets and/or maps in EL expressions, ensure that Jasper correctly parses the expression. Patch provided by Ricardo Martin Camarero. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=61854
Jasper|not released Tomcat 8.5.25 (markt)|Fix||Improve the handling of methods with varargs in EL expressions. In particular, the calling of a varargs method with no parameters now works correctly. Based on a patch by Nitkalya (Ing) Wiriyanuparb. (markt)|
Web applications|not released Tomcat 8.5.25 (markt)|Fix||Remove the Servlet 4.0 early preview example from the examples web application as the early preview is now deprecated in favour of Tomcat 9 which provides a full Servlet 4.0 implementation. (markt)|
Web applications|not released Tomcat 8.5.25 (markt)|Add|61223|Add the mbeans-descriptors.dtd file to the custom MBean documentation so users have a reference to use when constructing mbeans-descriptors.xml files for custom components. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=61223
Web applications|not released Tomcat 8.5.25 (markt)|Add|61566|Expose the currently in use certificate chain and list of trusted certificates for all virtual hosts configured using the JSSE style (keystore) TLS configuration via the Manager web application. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=61566
Web applications|not released Tomcat 8.5.25 (markt)|Fix||Partial fix for 61886. Ensure that multiple threads do not attempt to complete the AsyncContext if an I/O error occurs in the stock ticker example Servlet. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=61886
Web applications|not released Tomcat 8.5.25 (markt)|Fix|61886|Prevent ConcurrentModificationException when running the asynchronous stock ticker in the examples web application. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=61886
Web applications|not released Tomcat 8.5.25 (markt)|Fix|61886|Prevent NullPointerException and other errors if the stock ticker example is running when the examples web application is stopped. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=61886
Web applications|not released Tomcat 8.5.25 (markt)|Fix|61910|Clarify the meaning of the allowLinking option in the documentation web application. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=61910
Web applications|not released Tomcat 8.5.25 (markt)|Add||Add OCSP configuration information to the SSL How-To. Patch provided by Marek Czernek. (markt)|
jdbc-pool|not released Tomcat 8.5.25 (markt)|Fix|61312|Prevent NullPointerException when using the statement cache of connection that has been closed. (kfujino)|https://bz.apache.org/bugzilla/show_bug.cgi?id=61312
Other|not released Tomcat 8.5.25 (markt)|Fix||Add an additional system property for the system property replacement. (remm)|
Other|not released Tomcat 8.5.25 (markt)|Fix||Add missing SHA-512 hash for release artifacts to the build script. (markt)|
Other|not released Tomcat 8.5.25 (markt)|Update||Update the internal fork of Commons Pool 2 to 2.4.3. (markt)|
Other|not released Tomcat 8.5.25 (markt)|Update||Update the internal fork of Commons DBCP 2 to 8a71764 (2017-10-18) to pick up some bug fixes and enhancements. (markt)|
Other|not released Tomcat 8.5.25 (markt)|Update||Update the internal fork of Commons FileUpload to 6c00d57 (2017-11-23) to pick up some code clean-up. (markt)|
Other|not released Tomcat 8.5.25 (markt)|Update||Update the internal fork of Commons Codec to r1817136 to pick up some code clean-up. (markt)|
Other|not released Tomcat 8.5.25 (markt)|Fix||The native source bundles (for Commons Daemon and Tomcat Native) are no longer copied to the bin directory for the deploy target. They are now only copied to the bin directory for the release target. (markt)|
Catalina|2017-11-30 Tomcat 8.5.24 (markt)|Add||When running under Java 9 or later, and the urlCacheProtection option of the JreMemoryLeakPreventionListener is enabled, use the API added in Java 9 to only disable the caching for JAR URL connections. (markt)|
Catalina|2017-11-30 Tomcat 8.5.24 (markt)|Fix||Fix possible SecurityException when using TLS related request attributes. (markt)|
Catalina|2017-11-30 Tomcat 8.5.24 (markt)|Fix|61597|Extend the StandardJarScanner to scan JARs on the module path when running on Java 9 and class path scanning is enabled. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=61597
Catalina|2017-11-30 Tomcat 8.5.24 (markt)|Fix|61601|Add support for multi-release JARs in JAR scanning and web application class loading. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=61601
Catalina|2017-11-30 Tomcat 8.5.24 (markt)|Fix|61681|Allow HTTP/2 push when using request wrapping. (remm)|https://bz.apache.org/bugzilla/show_bug.cgi?id=61681
Catalina|2017-11-30 Tomcat 8.5.24 (markt)|Add||Provide the SessionInitializerFilter that can be used to ensure that an HTTP session exists when initiating a WebSocket connection. Patch provided by isapir. (markt)|
Catalina|2017-11-30 Tomcat 8.5.24 (markt)|Fix|61682|When re-prioritising HTTP/2 streams, ensure that both parent and children fields are correctly updated to avoid a possible StackOverflowError. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=61682
Catalina|2017-11-30 Tomcat 8.5.24 (markt)|Fix||Improve concurrency by reducing the scope of the synchronisation for javax.security.auth.message.config.AuthConfigFactory in the JASPIC API implementation. Based on a patch by Pavan Kumar. (markt)|
Catalina|2017-11-30 Tomcat 8.5.24 (markt)|Fix||Avoid a possible NullPointerException when timing out AsyncContext instances during shut down. (markt)|
Catalina|2017-11-30 Tomcat 8.5.24 (markt)|Fix|61777|Avoid a NullPointerException when detaching a JASPIC RegistrationListener. Patch provided by Lazar. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=61777
Catalina|2017-11-30 Tomcat 8.5.24 (markt)|Fix|61778|Correct the return value when detaching a JASPIC RegistrationListener. Patch provided by Lazar. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=61778
Catalina|2017-11-30 Tomcat 8.5.24 (markt)|Fix|61779|Avoid a NullPointerException when a null RegistrationListener is passed to AuthConfigFactory.getConfigProvider(). Patch provided by Lazar. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=61779
Catalina|2017-11-30 Tomcat 8.5.24 (markt)|Fix|61780|Only include the default JASPIC registration ID in the return value for a call to AuthConfigFactory.getRegistrationIDs() if a RegistrationContext has been registered using the default registration ID. Patch provided by Lazar. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=61780
Catalina|2017-11-30 Tomcat 8.5.24 (markt)|Fix|61781|Enable JASPIC provider registrations to be persisted when the layer and/or application context are null. Patch provided by Lazar. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=61781
Catalina|2017-11-30 Tomcat 8.5.24 (markt)|Fix|61782|When calling AuthConfigFactory.doRegisterConfigProvider() and the requested JASPIC config provider class is found by the web application class loader, do not attempt to load the class with the class loader that loaded the JASPIC API. Patch provided by Lazar. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=61782
Catalina|2017-11-30 Tomcat 8.5.24 (markt)|Fix|61783|When calling AuthConfigFactory.removeRegistration() and the registration is persistent, it should be removed from the persistent store. Patch provided by Lazar. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=61783
Catalina|2017-11-30 Tomcat 8.5.24 (markt)|Fix|61784|Correctly handle the case when AuthConfigFactoryImpl.registerConfigProvider() is called with a provider name of null. Patch provided by Lazar. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=61784
Catalina|2017-11-30 Tomcat 8.5.24 (markt)|Add|61795|Add a property to the Authenticator implementations to enable a custom JASPIC CallbackHandler to be specified. Patch provided by Lazar. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=61795
Coyote|2017-11-30 Tomcat 8.5.24 (markt)|Add||Enable ALPN and also, therefore, HTTP/2 for the NIO and NIO2 HTTP connectors when using the JSSE implementation for TLS when running on Java 9. (markt)|
Coyote|2017-11-30 Tomcat 8.5.24 (markt)|Add|60762|Add the ability to make changes to the TLS configuration of a connector at runtime without having to restart the Connector. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=60762
Coyote|2017-11-30 Tomcat 8.5.24 (markt)|Fix|61568|Avoid a potential SecurityException when using the NIO2 connector and a new thread is added to the pool. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=61568
Coyote|2017-11-30 Tomcat 8.5.24 (markt)|Fix|61583|Correct a further regression in the fix to enable the use of Java key stores that contained multiple keys that did not all have the same password. This fixes PKCS11 key store handling with multiple keys selected with an alias. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=61583
Coyote|2017-11-30 Tomcat 8.5.24 (markt)|Fix||Reduce default HTTP/2 stream concurrent execution within a connection from 200 to 20. (remm)|
Coyote|2017-11-30 Tomcat 8.5.24 (markt)|Fix|61668|Avoid a possible NPE when calling AbstractHttp11Protocol.getSSLProtocol(). (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=61668
Coyote|2017-11-30 Tomcat 8.5.24 (markt)|Fix|61673|Avoid a possible ConcurrentModificationException when working with the streams associated with a connection. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=61673
Coyote|2017-11-30 Tomcat 8.5.24 (markt)|Fix|61719|Avoid possible NPE calling InputStream.setReadListener with HTTP/2. (remm)|https://bz.apache.org/bugzilla/show_bug.cgi?id=61719
Coyote|2017-11-30 Tomcat 8.5.24 (markt)|Fix|61736|Improve performance of NIO connector when clients leave large time gaps between network packets. Patch provided by Zilong Song. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=61736
Coyote|2017-11-30 Tomcat 8.5.24 (markt)|Fix|61740|Correct an off-by-one error in the Hpack header index validation that caused intermittent request failures when using HTTP/2. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=61740
Jasper|2017-11-30 Tomcat 8.5.24 (markt)|Fix|61816|Invalid expressions in attribute values or template text should trigger a translation (compile time) error, not a run time error. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=61816
WebSocket|2017-11-30 Tomcat 8.5.24 (markt)|Fix|61604|Add support for authentication in the websocket client. Patch submitted by J Fernandez. (remm)|https://bz.apache.org/bugzilla/show_bug.cgi?id=61604
Web applications|2017-11-30 Tomcat 8.5.24 (markt)|Fix||Enable Javadoc to be built with Java 9. (markt)|
Web applications|2017-11-30 Tomcat 8.5.24 (markt)|Fix|61603|Add XML filtering for the status servlet output where needed. (remm)|https://bz.apache.org/bugzilla/show_bug.cgi?id=61603
Web applications|2017-11-30 Tomcat 8.5.24 (markt)|Fix||Correct the description of how the CGI servlet maps a request to a script in the CGI How-To. (markt)|
Tribes|2017-11-30 Tomcat 8.5.24 (markt)|Fix||Fix incorrect behavior that attempts to resend channel messages more than the actual setting value of maxRetryAttempts. (kfujino)|
Tribes|2017-11-30 Tomcat 8.5.24 (markt)|Fix||Ensure that the remaining Sender can send channel messages by avoiding unintended ChannelException caused by comparing the number of failed members and the number of remaining Senders. (kfujino)|
Tribes|2017-11-30 Tomcat 8.5.24 (markt)|Fix||Ensure that remaining SelectionKeys that were not handled by throwing a ChannelException during SelectionKey processing are handled. (kfujino)|
Other|2017-11-30 Tomcat 8.5.24 (markt)|Fix||Improve the fix for 61439 and exclude the JPA, JAX-WS and EJB annotations completely from the Tomcat distributions. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=61439
Other|2017-11-30 Tomcat 8.5.24 (markt)|Fix||Improve handling of endorsed directories. The endorsed directory mechanism will only be used if the JAVA_ENDORSED_DIRS system property is explicitly set or if $CATALINA_HOME/endorsed exists. When running on Java 9, any such attempted use of the endorsed directory mechanism will trigger an error and Tomcat will fail to start. (rjung)|
Other|2017-11-30 Tomcat 8.5.24 (markt)|Code||Refactoring in preparation for Java 9. Refactor to avoid using some methods that will be deprecated in Java 9 onwards. (markt)|
Other|2017-11-30 Tomcat 8.5.24 (markt)|Add|51496|When using the Windows installer, check if the requested service name already exists and, if it does, prompt the user to select an alternative service name. Patch provided by Ralph Plawetzki. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=51496
Other|2017-11-30 Tomcat 8.5.24 (markt)|Fix||Add necessary Java 9 configuration options to the startup scripts to prevent warnings being generated on web application stop. (markt)|
Other|2017-11-30 Tomcat 8.5.24 (markt)|Fix|61590|Enable service.bat to recognise when JAVA_HOME is configured for a Java 9 JDK. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=61590
Other|2017-11-30 Tomcat 8.5.24 (markt)|Fix|61598|Update the Windows installer to search the new (as of Java 9) registry locations when looking for a JRE. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=61598
Other|2017-11-30 Tomcat 8.5.24 (markt)|Add||Add generation of a SHA-512 hash for release artifacts to the build script. (markt)|
Other|2017-11-30 Tomcat 8.5.24 (markt)|Fix|61658|Update MIME mappings for fonts to use font/* as per RFC8081. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=61658
Other|2017-11-30 Tomcat 8.5.24 (markt)|Update||Update the packaged version of the Tomcat Native Library to 1.2.16 to pick up the latest Windows binaries built with APR 1.6.3 and OpenSSL 1.0.2m. (markt)|
Other|2017-11-30 Tomcat 8.5.24 (markt)|Update||Update the NSIS Installer used to build the Windows installer to version 3.02.1. (kkolinko)|
Other|2017-11-30 Tomcat 8.5.24 (markt)|Update||"Update the Windows installer to use ""The Apache Software Foundation"" as the Publisher when Tomcat is displayed in the list of installed applications in Microsoft Windows. (kkolinko)"|
Other|2017-11-30 Tomcat 8.5.24 (markt)|Fix|61803|Remove outdated SSL information from the Security documentation. (remm)|https://bz.apache.org/bugzilla/show_bug.cgi?id=61803
Catalina|2017-10-01 Tomcat 8.5.23 (markt)|Fix||Use the correct path when loading the JVM logging.properties file for Java 9. (rjung)|
Catalina|2017-10-01 Tomcat 8.5.23 (markt)|Fix||Add additional validation to the resource handling required to fix CVE-2017-12617 on Windows. The checks were being performed elsewhere but adding them to the resource handling ensures that the checks are always performed. (markt)|
Catalina|2017-10-01 Tomcat 8.5.23 (markt)|Fix|61554|Exclude test files in unusual encodings and markdown files intended for display in GitHub from RAT analysis. Patch provided by Chris Thistlethwaite. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=61554
Other|2017-10-01 Tomcat 8.5.23 (markt)|Fix|61563|Correct typos in Spanish translation. Patch provided by Gonzalo Vásquez. (csutherl)|https://bz.apache.org/bugzilla/show_bug.cgi?id=61563
Catalina|not released Tomcat 8.5.22 (markt)|Fix|60963|Add ExtractingRoot, a new WebResourceRoot implementation that extracts JARs to the work directory for improved performance when deploying packed WAR files. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=60963
Catalina|not released Tomcat 8.5.22 (markt)|Add||Add an option to reject requests that contain HTTP headers with invalid (non-token) header names with a 400 response. (markt)|
Catalina|not released Tomcat 8.5.22 (markt)|Fix|61542|Fix CVE-2017-12617 and prevent JSPs from being uploaded via a specially crafted request when HTTP PUT was enabled. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=61542
Catalina|not released Tomcat 8.5.22 (markt)|Fix||Implement the requirements of RFC 7230 (and RFC 2616) that HTTP/1.1 requests must include a Host header and any request that does not must be rejected with a 400 response. (markt)|
Catalina|not released Tomcat 8.5.22 (markt)|Fix||Implement the requirements of RFC 7230 that any HTTP/1.1 request that specifies a host in the request line, must specify the same host in the Host header and that any such request that does not, must be rejected with a 400 response. This check is optional but disabled by default. It may be enabled with the allowHostHeaderMismatch attribute of the Connector. (markt)|
Catalina|not released Tomcat 8.5.22 (markt)|Fix||Implement the requirements of RFC 7230 that any HTTP/1.1 request that contains multiple Host headers is rejected with a 400 response. (markt)|
Coyote|not released Tomcat 8.5.22 (markt)|Update||Add a way to set the property source in embedded mode. (remm)|
Coyote|not released Tomcat 8.5.22 (markt)|Fix|61557|Correct a further regression in the fix to enable the use of Java key stores that contain multiple keys that do not all have the same password. The regression broke support for some FIPS compliant key stores. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=61557
jdbc-pool|not released Tomcat 8.5.22 (markt)|Fix|61545|Correctly handle invocations of methods defined in the PooledConnection interface when using pooled XA connections. Patch provided by Nils Winkler. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=61545
Other|not released Tomcat 8.5.22 (markt)|Fix||Update fix for 59904 so that values less than zero are accepted instead of throwing a NegativeArraySizeException. (remm)|https://bz.apache.org/bugzilla/show_bug.cgi?id=59904
Catalina|2017-09-19 Tomcat 8.5.21 (markt)|Fix||Before generating an error page in the ErrorReportValve, check to see if I/O is still permitted for the associated connection before generating the error page so that the page generation can be skipped if the page is never going to be sent. (markt)|
Catalina|2017-09-19 Tomcat 8.5.21 (markt)|Add|61189|Add the ability to set environment variables for individual CGI scripts. Based on a patch by jm009. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=61189
Catalina|2017-09-19 Tomcat 8.5.21 (markt)|Fix|61210|When running under a SecurityManager, do not print a warning about not being able to read a logging configuration file when that file does not exist. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=61210
Catalina|2017-09-19 Tomcat 8.5.21 (markt)|Add|61280|Add RFC 7617 support to the BasicAuthenticator. Note that the default configuration does not change the existing behaviour. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=61280
Catalina|2017-09-19 Tomcat 8.5.21 (markt)|Fix|61424|Avoid a possible StackOverflowError when running under a SecurityManager and using Subject.doAs(). (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=61424
Coyote|2017-09-19 Tomcat 8.5.21 (markt)|Update||The minimum required Tomcat Native version has been increased to 1.2.14. This version includes a new API needed for correct client certificate support when using a Java connector with OpenSSL TLS implementation and support for the SSL_CONF OpenSSL API. (rjung)|
Coyote|2017-09-19 Tomcat 8.5.21 (markt)|Add||Add support for the OpenSSL SSL_CONF API when using TLS with OpenSSL implementation. It can be used by adding OpenSSLConf elements underneath SSLHostConfig. The new element contains a list of OpenSSLConfCmd elements, each with the attributes name and value. (rjung)|
Coyote|2017-09-19 Tomcat 8.5.21 (markt)|Fix||When using a Java connector in combination with the OpenSSL TLS implementation, do not configure each SSL connection object via the OpenSSLEngine. For OpenSSL the SSL object inherits its settings from the SSL_CTX which we have already configured. (rjung)|
Coyote|2017-09-19 Tomcat 8.5.21 (markt)|Fix||When using JSSE TLS configuration with the OpenSSL implementation and client certificates: include client CA subjects in the TLS handshake so that the client can choose an appropriate client certificate to present. (rjung)|
Coyote|2017-09-19 Tomcat 8.5.21 (markt)|Fix||If an invalid option is specified for the certificateVerification attribute of an SSLHostConfig element, treat it as required which is the most secure / restrictive option in addition to reporting the configuration error. (markt)|
Coyote|2017-09-19 Tomcat 8.5.21 (markt)|Fix||Improve the handling of client disconnections during the TLS renegotiation handshake. (markt)|
Coyote|2017-09-19 Tomcat 8.5.21 (markt)|Fix||Prevent exceptions being thrown during normal shutdown of NIO connections. This enables TLS connections to close cleanly. (markt)|
Coyote|2017-09-19 Tomcat 8.5.21 (markt)|Fix||Fix possible race condition when setting IO listeners on an upgraded connection. (remm)|
Coyote|2017-09-19 Tomcat 8.5.21 (markt)|Fix|48655|Enable Tomcat to shutdown cleanly when using sendfile, the APR/native connector and a multi-part download is in progress. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=48655
Coyote|2017-09-19 Tomcat 8.5.21 (markt)|Fix|58244|Handle the case when OpenSSL resumes a TLS session using a ticket and the full client certificate chain is not available. In this case the client certificate without the chain will be presented to the application. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=58244
Coyote|2017-09-19 Tomcat 8.5.21 (markt)|Fix||Improve the warning message when JSSE and OpenSSL configuration styles are mixed on the same SSLHostConfig. (markt)|
Coyote|2017-09-19 Tomcat 8.5.21 (markt)|Fix|61415|Fix TLS renegotiation with OpenSSL based connections and session caching. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=61415
Coyote|2017-09-19 Tomcat 8.5.21 (markt)|Fix||Delay checking that the configured attributes for an SSLHostConfig instance are consistent with the configured SSL implementation until Connector start to avoid incorrect warnings when the SSL implementation changes during initialisation. (markt)|
Coyote|2017-09-19 Tomcat 8.5.21 (markt)|Fix|61450|Fix default key alias algorithm. (remm)|https://bz.apache.org/bugzilla/show_bug.cgi?id=61450
Coyote|2017-09-19 Tomcat 8.5.21 (markt)|Fix|61451|Correct a regression in the fix to enable the use of Java key stores that contained multiple keys that did not all have the same password. The regression broke support for any key store that did not store keys in PKCS #8 format such as hardware key stores and Windows key stores. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=61451
WebSocket|2017-09-19 Tomcat 8.5.21 (markt)|Fix|60523|Reduce the number of packets used to send WebSocket messages by not flushing between the header and the payload when the two are written together. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=60523
WebSocket|2017-09-19 Tomcat 8.5.21 (markt)|Fix|61491|When using the permessage-deflate extension, correctly handle the sending of empty messages after non-empty messages to avoid the IllegalArgumentException. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=61491
Web applications|2017-09-19 Tomcat 8.5.21 (markt)|Fix||Show connector cipher list in the manager web application in the correct cipher order. (rjung)|
Tribes|2017-09-19 Tomcat 8.5.21 (markt)|Fix||To avoid unexpected session timeout notification from backup session, update the access time when receiving the map member notification message. (kfujino)|
Tribes|2017-09-19 Tomcat 8.5.21 (markt)|Fix||Add member info to the log message when the failure detection check fails in TcpFailureDetector. (kfujino)|
Tribes|2017-09-19 Tomcat 8.5.21 (markt)|Fix||Avoid Ping timeout until the added map member by receiving MSG_START message is completely started. (kfujino)|
Tribes|2017-09-19 Tomcat 8.5.21 (markt)|Fix||When sending a channel message, make sure that the Sender has connected. (kfujino)|
Tribes|2017-09-19 Tomcat 8.5.21 (markt)|Fix||Correct the backup node selection logic that node 0 is returned twice consecutively. (kfujino)|
Tribes|2017-09-19 Tomcat 8.5.21 (markt)|Fix||Fix race condition of responseMap in RpcChannel. (kfujino)|
jdbc-pool|2017-09-19 Tomcat 8.5.21 (markt)|Fix|61391|Ensure that failed queries are logged if the SlowQueryReport interceptor is configured to do so and the connection has been abandoned. Patch provided by Craig Webb. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=61391
jdbc-pool|2017-09-19 Tomcat 8.5.21 (markt)|Fix|61425|Ensure that transaction of idle connection has terminated when the testWhileIdle is set to true and defaultAutoCommit is set to false. Patch provided by WangZheng. (kfujino)|https://bz.apache.org/bugzilla/show_bug.cgi?id=61425
Other|2017-09-19 Tomcat 8.5.21 (markt)|Fix|61439|Remove the Java Annotation API classes from tomcat-embed-core.jar and package them in a separate JAR in the embedded distribution to provide end users with greater flexibility to handle potential conflicts with the JRE and/or other JARs. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=61439
Other|2017-09-19 Tomcat 8.5.21 (markt)|Fix|61441|Improve the detection of JAVA_HOME by the daemon.sh script when running on a platform where Java has been installed from an RPM. (rjung)|https://bz.apache.org/bugzilla/show_bug.cgi?id=61441
Other|2017-09-19 Tomcat 8.5.21 (markt)|Update||Update the packaged version of the Tomcat Native Library to 1.2.14 to pick up the latest Windows binaries built with APR 1.6.2 and OpenSSL 1.0.2l. (markt)|
Other|2017-09-19 Tomcat 8.5.21 (markt)|Update|61599|Update to Commons Daemon 1.1.0 for improved Java 9 support. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=61599
Catalina|2017-08-08 Tomcat 8.5.20 (markt)|Fix||Revert the fix for 49464 since it continued to trigger regressions. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=49464
Catalina|2017-08-08 Tomcat 8.5.20 (markt)|Fix||Correct a bug in the PushBuilder implementation that meant push URLs containing %nn sequences were not correctly decoded. Identified by FindBugs. (markt)|
Catalina|2017-08-08 Tomcat 8.5.20 (markt)|Add|61164|Add support for the %X pattern in the AccessLogValve that reports the connection status at the end of the request. Patch provided by Zemian Deng. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=61164
Catalina|2017-08-08 Tomcat 8.5.20 (markt)|Fix|61351|Correctly handle %nn decoding of URL patterns in web.xml and similar locations that may legitimately contain characters that are not permitted by RFC 3986. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=61351
Catalina|2017-08-08 Tomcat 8.5.20 (markt)|Add|61366|Add a new attribute, localDataSource, to the JDBCStore that allows the Store to be configured to use a DataSource defined by the web application rather than the default of using a globally defined DataSource. Patch provided by Jonathan Horowitz. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=61366
Coyote|2017-08-08 Tomcat 8.5.20 (markt)|Fix|61086|Ensure to explicitly signal an empty request body for HTTP 205 responses. Additional fix to r1795278. Based on a patch provided by Alexandr Saperov. (violetagg)|https://bz.apache.org/bugzilla/show_bug.cgi?id=61086
Coyote|2017-08-08 Tomcat 8.5.20 (markt)|Update|61345|Add a server listener that can be used to do system property replacement from the property source configured in the digester. (remm)|https://bz.apache.org/bugzilla/show_bug.cgi?id=61345
Coyote|2017-08-08 Tomcat 8.5.20 (markt)|Add||Add additional logging to record problems that occur while waiting for the NIO pollers to stop during the Connector stop process. (markt)|
Jasper|2017-08-08 Tomcat 8.5.20 (markt)|Fix|61364|Ensure that files are closed after detecting encoding of JSPs so that files do not remain locked by the file system. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=61364
WebSocket|2017-08-08 Tomcat 8.5.20 (markt)|Add|57767|Add support to the WebSocket client for following redirects when attempting to establish a WebSocket connection. Patch provided by J Fernandez. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=57767
Catalina|2017-07-28 Tomcat 8.5.19 (markt)|Fix||Performance improvements for service loader look-ups (and look-ups of other class loader resources) when the web application is deployed in a packed WAR file. (markt)|
Catalina|2017-07-28 Tomcat 8.5.19 (markt)|Fix|61253|Add warn message when Digester.updateAttributes throws an exception instead of ignoring it. (csutherl)|https://bz.apache.org/bugzilla/show_bug.cgi?id=61253
Catalina|2017-07-28 Tomcat 8.5.19 (markt)|Fix||Correct a further regression in the fix for 49464 that could cause an byte order mark character to appear at the start of content included by the DefaultServlet. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=49464
Catalina|2017-07-28 Tomcat 8.5.19 (markt)|Fix|61313|Make the read timeout configurable in the JNDIRealm and ensure that a read timeout will result in an attempt to fail over to the alternateURL. Based on patches by Peter Maloney and Felix Schumacher. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=61313
Web applications|2017-07-28 Tomcat 8.5.19 (markt)|Fix||Correct the documentation for how StandardRoot is configured. (markt)|
Other|2017-07-28 Tomcat 8.5.19 (markt)|Fix|61316|Fix corruption of UTF-16 encoded source files in released source distributions. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=61316
Catalina|not released Tomcat 8.5.18 (markt)|Fix|61232|When log rotation is disabled only one separator will be used when generating the log file name. For example if the prefix is catalina. and the suffix is .log then the log file name will be catalina.log instead of catalina..log. Patch provided by Katya Stoycheva. (violetagg)|https://bz.apache.org/bugzilla/show_bug.cgi?id=61232
Catalina|not released Tomcat 8.5.18 (markt)|Fix|61264|Correct a regression in the refactoring to use Charset rather than String to store request character encoding that prevented getReader() throwing an UnsupportedEncodingException if the user agent specifies an unsupported character encoding. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=61264
Catalina|not released Tomcat 8.5.18 (markt)|Fix||Correct a regression in the fix for 49464 that could cause an incorrect Content-Length header to be sent by the DefaultServlet if the encoding of a static is not consistent with the encoding of the response. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=49464
Coyote|not released Tomcat 8.5.18 (markt)|Fix||Enable TLS connectors to use Java key stores that contain multiple keys where each key has a separate password. Based on a patch by Frank Taffelt. (markt)|
Coyote|not released Tomcat 8.5.18 (markt)|Fix||Improve the handling of HTTP/2 stream resets due to excessive headers when a continuation frame is used. (markt)|
Jasper|not released Tomcat 8.5.18 (markt)|Add|53031|Add support for the fork option when compiling JSPs with the Jasper Ant task and javac. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=53031
Other|not released Tomcat 8.5.18 (markt)|Add|52791|Add the ability to set the defaults used by the Windows installer from a configuration file. Patch provided by Sandra Madden. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=52791
Catalina|not released Tomcat 8.5.17 (markt)|Fix|49464|Improve the Default Servlet's handling of static files when the file encoding is not compatible with the required response encoding. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=49464
Catalina|not released Tomcat 8.5.17 (markt)|Fix|61214|Remove deleted attribute servlets from the Context MBean description. Patch provided by Alexis Hassler. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=61214
Catalina|not released Tomcat 8.5.17 (markt)|Fix|61215|Correctly define addConnectorPort and invalidAuthenticationWhenDeny in the mbean-descriptors.xml file for the org.apache.catalina.valves package so that the attributes are accessible via JMX. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=61215
Catalina|not released Tomcat 8.5.17 (markt)|Fix||Make asynchronous error handling more robust. In particular ensure that onError() is called for any registered AsyncListeners after an I/O error on a non-container thread. (markt)|
Catalina|not released Tomcat 8.5.17 (markt)|Fix||Additional permission for deleting files is granted to JULI as it is required by FileHandler when running under a Security Manager. The thread that cleans the log files is marked as daemon thread. (violetagg)|
Catalina|not released Tomcat 8.5.17 (markt)|Fix|61229|Correct a regression in 8.5.15 that broke WebDAV handling for resources with names that included a & character. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=61229
Coyote|not released Tomcat 8.5.17 (markt)|Fix||Restore the ability to configure support for SSLv3. Enabling this protocol will trigger a warning in the logs since it is known to be insecure. (markt)|
Coyote|not released Tomcat 8.5.17 (markt)|Fix||Do not log a warning when a null session is returned for an OpenSSL based TLS session since this is expected when session tickets are enabled. (markt)|
Coyote|not released Tomcat 8.5.17 (markt)|Fix||When the access log valve logs a TLS related request attribute and the NIO2 connector is used with OpenSSL, ensure that the TLS attributes are available to the access log valve when the connection is closing. (markt)|
Coyote|not released Tomcat 8.5.17 (markt)|Fix|60461|Sync SSL session access for the APR connector. (remm)|https://bz.apache.org/bugzilla/show_bug.cgi?id=60461
Coyote|not released Tomcat 8.5.17 (markt)|Add||To ease migration from 8.0.x to 8.5.x, if the HTTP or AJP BIO connector is explicitly configured, rather than failing to start the connector because BIO has been removed, automatically switch to NIO and continue. A warning will be logged to alert the user to the switch. (markt)|
Web applications|not released Tomcat 8.5.17 (markt)|Fix||Remove references to the Loader attribute searchExternalFirst from the documentation since the attribute is no longer supported. (markt)|
Catalina|2017-06-26 Tomcat 8.5.16 (markt)|Fix|61072|Respect the documentation statements that allow using the platform default secure random for session id generation. (remm)|https://bz.apache.org/bugzilla/show_bug.cgi?id=61072
Catalina|2017-06-26 Tomcat 8.5.16 (markt)|Fix||Correct the javadoc for o.a.c.connector.CoyoteAdapter#parseSessionCookiesId. Patch provided by John Andrew (XUZHOUWANG) via Github. (violetagg)|
Catalina|2017-06-26 Tomcat 8.5.16 (markt)|Fix|61101|CORS filter should set Vary header in response. Submitted by Rick Riemer. (remm)|https://bz.apache.org/bugzilla/show_bug.cgi?id=61101
Catalina|2017-06-26 Tomcat 8.5.16 (markt)|Add|61105|Add a new JULI FileHandler configuration for specifying the maximum number of days to keep the log files. (violetagg)|https://bz.apache.org/bugzilla/show_bug.cgi?id=61105
Catalina|2017-06-26 Tomcat 8.5.16 (markt)|Fix|61125|Ensure that WarURLConnection returns the correct value for calls to getLastModified() as this is required for the correct detection of JSP modifications when the JSP is packaged in a WAR file. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=61125
Catalina|2017-06-26 Tomcat 8.5.16 (markt)|Fix||Improve the SSLValve so it is able to handle client certificate headers from Nginx. Based on a patch by Lucas Ventura Carro. (markt)|
Catalina|2017-06-26 Tomcat 8.5.16 (markt)|Fix|61134|Do not use '[' and ']' symbols around substituted text fragments when generating the default error pages. Patch provided by Katya Todorova. (violetagg)|https://bz.apache.org/bugzilla/show_bug.cgi?id=61134
Catalina|2017-06-26 Tomcat 8.5.16 (markt)|Fix|61154|Allow the Manager and Host Manager web applications to start by default when running under a security manager. This was accomplished by adding a custom permission, org.apache.catalina.security.DeployXmlPermission, that permits an application to use a META-INF/context.xml file and then granting that permission to the Manager and Host Manager. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=61154
Catalina|2017-06-26 Tomcat 8.5.16 (markt)|Fix|61173|Polish the javadoc for o.a.catalina.startup.Tomcat. Patch provided by peterhansson_se. (violetagg)|https://bz.apache.org/bugzilla/show_bug.cgi?id=61173
Catalina|2017-06-26 Tomcat 8.5.16 (markt)|Add||A new configuration property crawlerIps is added to the o.a.catalina.valves.CrawlerSessionManagerValve. Using this property one can specify a regular expression that will be used to identify crawlers based on their IP address. Based on a patch provided by Tetradeus. (violetagg)|
Catalina|2017-06-26 Tomcat 8.5.16 (markt)|Fix|61180|Log a warning message rather than an information message if it takes more than 100ms to initialised a SecureRandom instance for a web application to use to generate session identifiers. Patch provided by Piotr Chlebda. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=61180
Catalina|2017-06-26 Tomcat 8.5.16 (markt)|Fix|61185|When an asynchronous request is dispatched via AsyncContext.dispatch() ensure that getRequestURI() for the dispatched request matches that of the original request. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=61185
Catalina|2017-06-26 Tomcat 8.5.16 (markt)|Fix|61197|Ensure that the charset name used in the Content-Type header has exactly the same form as that provided by the application. This reverts a behavioural change in 8.5.15 that caused problems for some clients. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=61197
Catalina|2017-06-26 Tomcat 8.5.16 (markt)|Fix|61201|Ensure that the SCRIPT_NAME environment variable for CGI executables is populated in a consistent way regardless of how the CGI servlet is mapped to a request. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=61201
Coyote|2017-06-26 Tomcat 8.5.16 (markt)|Fix|61086|Explicitly signal an empty request body for HTTP 205 responses. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=61086
Coyote|2017-06-26 Tomcat 8.5.16 (markt)|Fix|61120|Do not ignore path parameters when processing HTTP/2 requests. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=61120
Coyote|2017-06-26 Tomcat 8.5.16 (markt)|Fix||Revert a change introduced in the fix for bug 60718 that changed the status code recorded in the access log when the client dropped the connection from 200 to 500. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=60718
Coyote|2017-06-26 Tomcat 8.5.16 (markt)|Fix||Add additional syncs to the SSL session object provided by the OpenSSL engine so that a concurrent destruction cannot cause a JVM crash. (remm)|
Coyote|2017-06-26 Tomcat 8.5.16 (markt)|Fix|61195|Backport, with deprecation where appropriate, the endpoint and protocol property changes from 9.0.x to ease migration from 8.5.x to 9.0.x. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=61195
Jasper|2017-06-26 Tomcat 8.5.16 (markt)|Fix|44787|Improve error message when JSP compiler configuration options are not valid. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=44787
Jasper|2017-06-26 Tomcat 8.5.16 (markt)|Fix|61137|j.s.jsp.tagext.TagLibraryInfo#uri and j.s.jsp.tagext.TagLibraryInfo#prefix fields should not be final. Patch provided by Katya Todorova. (violetagg)|https://bz.apache.org/bugzilla/show_bug.cgi?id=61137
WebSocket|2017-06-26 Tomcat 8.5.16 (markt)|Fix||Correct the log message when a MessageHandler for PongMessage does not implement MessageHandler.Whole. (rjung)|
WebSocket|2017-06-26 Tomcat 8.5.16 (markt)|Add||Introduce new API o.a.tomcat.websocket.WsSession#suspend/ o.a.tomcat.websocket.WsSession#resume that can be used to suspend/resume reading of the incoming messages. (violetagg)|
WebSocket|2017-06-26 Tomcat 8.5.16 (markt)|Fix||Improve thread-safety of Futures used to report the result of sending WebSocket messages. (markt)|
WebSocket|2017-06-26 Tomcat 8.5.16 (markt)|Fix|61183|Correct a regression in the previous fix for 58624 that could trigger a deadlock depending on the locking strategy employed by the client code. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=61183
Web applications|2017-06-26 Tomcat 8.5.16 (markt)|Fix||Better document the meaning of the trimSpaces option for Jasper. (markt)|
Web applications|2017-06-26 Tomcat 8.5.16 (markt)|Fix|61150|Configure the Manager and Host-Manager web applications to permit serialization and deserialization of CRSFPreventionFilter related session objects to avoid warning messages and/or stack traces on web application stop and/or start when running under a security manager. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=61150
Web applications|2017-06-26 Tomcat 8.5.16 (markt)|Fix||Correct the TLS configuration documentation to remove SSLv2 and SSLv3 from the list of supported protocols. (markt)|
Tribes|2017-06-26 Tomcat 8.5.16 (markt)|Add||Add JMX support for Tribes components. (kfujino)|
Other|2017-06-26 Tomcat 8.5.16 (markt)|Add|45832|Add HTTP DIGEST authentication support to the Catalina Ant tasks used to communicate with the Manager application. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=45832
Other|2017-06-26 Tomcat 8.5.16 (markt)|Fix|45879|Add the RELEASE-NOTES file to the root of the installation created by the Tomcat installer for Windows to make it easier for users to identify the installed Tomcat version. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=45879
Other|2017-06-26 Tomcat 8.5.16 (markt)|Fix|61055|Clarify the code comments in the rewrite valve to make clear that there are no plans to provide proxy support for this valve since Tomcat does not have proxy capabilities. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=61055
Other|2017-06-26 Tomcat 8.5.16 (markt)|Fix|61076|Document the altDDName attribute for the Context element. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=61076
Other|2017-06-26 Tomcat 8.5.16 (markt)|Fix||Correct typo in Jar Scan Filter Configuration Reference. Issue reported via comments.apache.org. (violetagg)|
Other|2017-06-26 Tomcat 8.5.16 (markt)|Fix|61145|Add missing @Documented annotation to annotations in the annotations API. Patch provided by Katya Todorova. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=61145
Other|2017-06-26 Tomcat 8.5.16 (markt)|Fix|61146|Add missing lookup() method to @EJB annotation in the annotations API. Patch provided by Katya Todorova. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=61146
Other|2017-06-26 Tomcat 8.5.16 (markt)|Fix||Correct typo in Context Container Configuration Reference. Patch provided by Katya Todorova. (violetagg)|
General|2017-05-10 Tomcat 8.5.15 (markt)|Add||Allow to exclude JUnit test classes using the build property test.exclude and document the property in BUILDING.txt. (rjung)|
Catalina|2017-05-10 Tomcat 8.5.15 (markt)|Fix||Review those places where Tomcat re-encodes a URI or URI component and ensure that that correct encoding (path differs from query string) is applied and that the encoding is applied consistently. (markt)|
Catalina|2017-05-10 Tomcat 8.5.15 (markt)|Fix||Avoid a NullPointerException when reading attributes for a initialised HTTP connector where TLS is enabled. (markt)|
Catalina|2017-05-10 Tomcat 8.5.15 (markt)|Fix||Always quote the hostName of an SSLHostConfig element when using it as part of the JMX object name to avoid errors that prevent the associated TLS connector from starting if a wild card hostName is configured (because * is a reserved character for JMX object names). (markt)|
Catalina|2017-05-10 Tomcat 8.5.15 (markt)|Code||Switch to using Charset rather than String to store encoding settings (including for configuration and for the Content-Type header) to reduce the number of places the associated Charset needs to be looked up. (markt)|
Catalina|2017-05-10 Tomcat 8.5.15 (markt)|Fix||Use a more reliable mechanism for the DefaultServlet when determining if the current request is for custom error page or not. (markt)|
Catalina|2017-05-10 Tomcat 8.5.15 (markt)|Fix||Ensure that when the Default or WebDAV servlets process an error dispatch that the error resource is processed via the doGet() method irrespective of the method used for the original request that triggered the error. (markt)|
Catalina|2017-05-10 Tomcat 8.5.15 (markt)|Fix||If a static custom error page is specified that does not exist or cannot be read, ensure that the intended error status is returned rather than a 404 or 403. (markt)|
Catalina|2017-05-10 Tomcat 8.5.15 (markt)|Fix||When the WebDAV servlet is configured and an error dispatch is made to a custom error page located below WEB-INF, ensure that the target error page is displayed rather than a 404 response. (markt)|
Catalina|2017-05-10 Tomcat 8.5.15 (markt)|Add|61047|Add MIME mapping for woff2 fonts in the default web.xml. Patch provided by Justin Williamson. (violetagg)|https://bz.apache.org/bugzilla/show_bug.cgi?id=61047
Catalina|2017-05-10 Tomcat 8.5.15 (markt)|Fix||Correct the logic that selects the encoding to use to decode the query string in the SSIServletExternalResolver so that the useBodyEncodingForURI attribute of the Connector is correctly taken into account. (markt)|
Catalina|2017-05-10 Tomcat 8.5.15 (markt)|Fix||Within the Expires filter, make the content type value specified with the ExpiresByType parameter, case insensitive. (markt)|
Coyote|2017-05-10 Tomcat 8.5.15 (markt)|Fix||When a TrustManager is configured that does not support certificateVerificationDepth only log a warning about that lack of support when certificateVerificationDepth has been explicitly set. (markt)|
Coyote|2017-05-10 Tomcat 8.5.15 (markt)|Fix|60970|Extend the fix for large headers to push requests. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=60970
Coyote|2017-05-10 Tomcat 8.5.15 (markt)|Fix||Do not include a Date header in HTTP/2 responses with status codes less than 200. (markt)|
Jasper|2017-05-10 Tomcat 8.5.15 (markt)|Fix||When no BOM is present and an encoding is detected, do not skip the bytes used to detect the encoding since they are not part of a BOM. (markt)|
Jasper|2017-05-10 Tomcat 8.5.15 (markt)|Update|61057|Update to Eclipse JDT Compiler 4.6.3. (violetagg)|https://bz.apache.org/bugzilla/show_bug.cgi?id=61057
Jasper|2017-05-10 Tomcat 8.5.15 (markt)|Fix|61065|Ensure that once the class is resolved by javax.el.ImportHandler#resolveClass it will be cached with the proper name. (violetagg)|https://bz.apache.org/bugzilla/show_bug.cgi?id=61065
WebSocket|2017-05-10 Tomcat 8.5.15 (markt)|Fix|61003|Ensure the flags for reading/writing in o.a.t.websocket.AsyncChannelWrapperSecure are correctly reset even if some exceptions occurred during processing. (markt/violetagg)|https://bz.apache.org/bugzilla/show_bug.cgi?id=61003
Web Applications|2017-05-10 Tomcat 8.5.15 (markt)|Add||Add documents for maxIdleTime attribute to Channel Receiver docs. (kfujino)|
Other|2017-05-10 Tomcat 8.5.15 (markt)|Add||Modify the Ant build script used to publish to a Maven repository so that it no longer requires artifacts to be GPG signed. This is make it possible for the CI system to upload snapshot builds to the ASF Maven repository. (markt)|
Other|2017-05-10 Tomcat 8.5.15 (markt)|Code||Review i18n property files, remove unnecessary escaping and consistently use [...] to delimit inserted values. (markt)|
Catalina|2017-04-18 Tomcat 8.5.14 (markt)|Fix|59825|Log a message that lists the components in the processing chain that do not support async processing when a call to ServletRequest.startAsync() fails. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=59825
Catalina|2017-04-18 Tomcat 8.5.14 (markt)|Fix|60926|Ensure o.a.c.core.ApplicationContextFacade#setSessionTimeout will invoke the correct method when running Tomcat with security manager. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=60926
Catalina|2017-04-18 Tomcat 8.5.14 (markt)|Update||Update the early access Servlet 4.0 API implementation to reflect the change in method name from getPushBuilder() to newPushBuilder(). (markt)|
Catalina|2017-04-18 Tomcat 8.5.14 (markt)|Fix||Correct a regression in the X to comma refactoring that broke JMX operations that take parameters. (markt)|
Catalina|2017-04-18 Tomcat 8.5.14 (markt)|Fix||Avoid a NullPointerException when reading attributes for a running HTTP connector where TLS is not enabled. (markt)|
Catalina|2017-04-18 Tomcat 8.5.14 (markt)|Fix|60940|Improve the handling of the META-INF/ and META-INF/MANIFEST.MF entries for Jar files located in /WEB-INF/lib when running a web application from a packed WAR file. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=60940
Catalina|2017-04-18 Tomcat 8.5.14 (markt)|Fix||Pre-load the ExceptionUtils class. Since the class is used extensively in error handling, it is prudent to pre-load it to avoid any failure to load this class masking the true problem during error handling. (markt)|
Catalina|2017-04-18 Tomcat 8.5.14 (markt)|Fix||Avoid potential NullPointerExceptions related to access logging during shutdown, some of which have been observed when running the unit tests. (markt)|
Catalina|2017-04-18 Tomcat 8.5.14 (markt)|Fix||When there is no javax.servlet.WriteListener registered then a call to javax.servlet.ServletOutputStream#isReady will return false instead of throwing IllegalStateException. (violetagg)|
Catalina|2017-04-18 Tomcat 8.5.14 (markt)|Fix||When there is no javax.servlet.ReadListener registered then a call to javax.servlet.ServletInputStream#isReady will return false instead of throwing IllegalStateException. (violetagg)|
Coyote|2017-04-18 Tomcat 8.5.14 (markt)|Fix||Align cipher configuration parsing with current OpenSSL master. (markt)|
Coyote|2017-04-18 Tomcat 8.5.14 (markt)|Fix|60970|Fix infinite loop if application tries to write a large header to the response when using HTTP/2. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=60970
Jasper|2017-04-18 Tomcat 8.5.14 (markt)|Fix|60925|Improve the handling of access to properties defined by interfaces when a BeanELResolver is used under a SecurityManager. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=60925
jdbc-pool|2017-04-18 Tomcat 8.5.14 (markt)|Code||Refactor the creating a constructor for a proxy class to reduce duplicate code. (kfujino)|
jdbc-pool|2017-04-18 Tomcat 8.5.14 (markt)|Fix||In StatementFacade, the method call on the statements that have been closed throw SQLException rather than NullPointerException. (kfujino)|
Other|2017-04-18 Tomcat 8.5.14 (markt)|Fix||Correct comments about Java 8 in Jre8Compat. Patch provided by fibbers via Github. (violetagg)|
Other|2017-04-18 Tomcat 8.5.14 (markt)|Fix|60932|Correctly escape single quotes when used in i18n messages. Based on a patch by Michael Osipov. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=60932
Other|2017-04-18 Tomcat 8.5.14 (markt)|Fix||Update the custom Ant task that integrates with the Symantec code signing service to use the now mandatory 2-factor authentication. (markt)|
Catalina|2017-03-30 Tomcat 8.5.13 (markt)|Add|54618|Add support to the HttpHeaderSecurityFilter for the HSTS preload parameter. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=54618
Catalina|2017-03-30 Tomcat 8.5.13 (markt)|Fix|60853|Expose the SSLHostConfig and SSLHostConfigCertificate objects via JMX. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=60853
Catalina|2017-03-30 Tomcat 8.5.13 (markt)|Fix|60876|Ensure that Set-Cookie headers generated by the Rfc6265CookieProcessor are aligned with the specification. Patch provided by Jim Griswold. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=60876
Catalina|2017-03-30 Tomcat 8.5.13 (markt)|Fix|60882|Fix a NullPointerException when obtaining a RequestDispatcher for a request that will not have any pathInfo associated with it. This was a regression in the changes in 8.5.12 for the Servlet 4.0 API early preview changes. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=60882
Catalina|2017-03-30 Tomcat 8.5.13 (markt)|Update||Align PushBuilder API with changes from Servlet expert group. (markt)|
Catalina|2017-03-30 Tomcat 8.5.13 (markt)|Code||Refactor the various implementations of X to comma separated list to a single utility class and update the code to use the new utility class. (markt)|
Catalina|2017-03-30 Tomcat 8.5.13 (markt)|Fix|60911|Ensure NPE will not be thrown when looking for SSL session ID. Based on a patch by Didier Gutacker. (violetagg)|https://bz.apache.org/bugzilla/show_bug.cgi?id=60911
Coyote|2017-03-30 Tomcat 8.5.13 (markt)|Add|60362|Add a new Connector configuration sendReasonPhrase. When this attribute is set to true, a reason phrase will be sent with the response. By default a reason phrase will not be sent. This option is deprecated and is not available in Tomcat 9. (violetagg)|https://bz.apache.org/bugzilla/show_bug.cgi?id=60362
Coyote|2017-03-30 Tomcat 8.5.13 (markt)|Fix||Fix HTTP/2 incorrect input unblocking on EOF. (remm)|
Coyote|2017-03-30 Tomcat 8.5.13 (markt)|Fix||Close the connection sooner if an event occurs for a current connection that is not consistent with the current state of that connection. (markt)|
Coyote|2017-03-30 Tomcat 8.5.13 (markt)|Fix||Speed up shutdown when using multiple acceptor threads by ensuring that the code that unlocks the acceptor threads correctly handles the case where there are multiple threads. (markt)|
Coyote|2017-03-30 Tomcat 8.5.13 (markt)|Fix|60852|Correctly spell compressible when used in configuration attributes and internal code. Based on a patch by Michael Osipov. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=60852
Coyote|2017-03-30 Tomcat 8.5.13 (markt)|Fix|60900|Avoid a NullPointerException in the APR Poller if a connection is closed at the same time as new data arrives on that connection. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=60900
Coyote|2017-03-30 Tomcat 8.5.13 (markt)|Fix||Improve HPACK specification compliance by fixing some test failures reported by the h2spec tool written by Moto Ishizawa. (markt)|
Coyote|2017-03-30 Tomcat 8.5.13 (markt)|Fix||Improve HTTP/2 specification compliance by fixing some test failures reported by the h2spec tool written by Moto Ishizawa. (markt)|
Coyote|2017-03-30 Tomcat 8.5.13 (markt)|Fix|60918|Fix sendfile processing error that could lead to subsequent requests experiencing an IllegalStateException. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=60918
Coyote|2017-03-30 Tomcat 8.5.13 (markt)|Fix||Improve sendfile handling when requests are pipelined. (markt)|
Jasper|2017-03-30 Tomcat 8.5.13 (markt)|Fix||Improve the error handling for simple tags to ensure that the tag is released and destroyed once used. (remm, violetagg)|
Jasper|2017-03-30 Tomcat 8.5.13 (markt)|Fix|60844|Correctly handle the error when fewer parameter values than required by the method are used to invoke an EL method expression. Patch provided by Daniel Gray. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=60844
jdbc-pool|2017-03-30 Tomcat 8.5.13 (markt)|Fix|60764|Implement equals() and hashCode() in the StatementFacade in order to enable these methods to be called on the closed statements if any statement proxy is set. This behavior can be changed with useStatementFacade attribute. (kfujino)|https://bz.apache.org/bugzilla/show_bug.cgi?id=60764
Other|2017-03-30 Tomcat 8.5.13 (markt)|Fix||Refactor the build script and the NSIS installer script so that either NSIS 2.x or NSIS 3.x can be used to build the installer. This is primarily to re-enable building the installer on the Linux based CI system where the combination of NSIS 3.x and wine leads to failed installer builds. (markt)|
Catalina|2017-03-13 Tomcat 8.5.12 (markt)|Fix|60469|Refactor RealmBase for better code re-use when implementing Realms that use a custom Principal. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=60469
Catalina|2017-03-13 Tomcat 8.5.12 (markt)|Fix|60490|Various formatting and layout improvements for the ErrorReportValve. Patch provided by Michael Osipov. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=60490
Catalina|2017-03-13 Tomcat 8.5.12 (markt)|Update|60596|Improve performance of DefaultServlet when sendfile feature is disabled on connector. (kkolinko)|https://bz.apache.org/bugzilla/show_bug.cgi?id=60596
Catalina|2017-03-13 Tomcat 8.5.12 (markt)|Code||Make it easier for sub-classes of Tomcat to modify the default web.xml settings by over-riding getDefaultWebXmlListener(). Patch provided by Aaron Anderson. (markt)|
Catalina|2017-03-13 Tomcat 8.5.12 (markt)|Fix||Reduce the contention in the default InstanceManager implementation when multiple threads are managing objects and need to reference the annotation cache. (markt)|
Catalina|2017-03-13 Tomcat 8.5.12 (markt)|Code|60674|Remove final marker from CorsFilter to enable sub-classing. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=60674
Catalina|2017-03-13 Tomcat 8.5.12 (markt)|Fix|60683|Security manager failure causing NPEs when doing IO on some JVMs. (csutherl)|https://bz.apache.org/bugzilla/show_bug.cgi?id=60683
Catalina|2017-03-13 Tomcat 8.5.12 (markt)|Fix|60688|Update the internal fork of Apache Commons BCEL to r1782855 to add early access Java 9 support to the annotation scanning code. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=60688
Catalina|2017-03-13 Tomcat 8.5.12 (markt)|Fix|60694|Prevent NPE during authentication when no JASPIC AuthConfigFactory is available. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=60694
Catalina|2017-03-13 Tomcat 8.5.12 (markt)|Fix|60697|When HTTP TRACE requests are disabled on the Connector, ensure that the HTTP OPTIONS response from custom servlets does not include TRACE in the returned Allow header. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=60697
Catalina|2017-03-13 Tomcat 8.5.12 (markt)|Fix|60718|Improve error handling for asynchronous processing and correct a number of cases where the requestDestroyed() event was not being fired and an entry wasn't being made in the access logs. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=60718
Catalina|2017-03-13 Tomcat 8.5.12 (markt)|Fix|60720|"Replace ""WWW-Authenticate"" literal with static final AUTH_HEADER_NAME in SpnegoAuthenticator. Patch provided by Michael Osipov. (violetagg)"|https://bz.apache.org/bugzilla/show_bug.cgi?id=60720
Catalina|2017-03-13 Tomcat 8.5.12 (markt)|Fix||The default JASPIC AuthConfigFactory now correctly notifies registered RegistrationListeners when a new AuthConfigProvider is registered. (markt)|
Catalina|2017-03-13 Tomcat 8.5.12 (markt)|Code||Improve the performance of AuthenticatorBase when there is no JASPIC configuration available. (violetagg)|
Catalina|2017-03-13 Tomcat 8.5.12 (markt)|Fix||When HTTP TRACE requests are disabled on the Connector, ensure that the HTTP OPTIONS response from the WebDAV servlet does not include TRACE in the returned Allow header. (markt)|
Catalina|2017-03-13 Tomcat 8.5.12 (markt)|Fix|60722|Take account of the dispatchersUseEncodedPaths setting on the current Context when generating paths for dispatches triggered by AsyncContext.dispatch(). (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=60722
Catalina|2017-03-13 Tomcat 8.5.12 (markt)|Fix|60728|Make the separator Tomcat uses in the Tomcat specific war:file:... URL protocol customizable via a system property. The separator is equivalent to the use of the ! character in jar:file:... URLs. The default separator of * remains unchanged. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=60728
Catalina|2017-03-13 Tomcat 8.5.12 (markt)|Update||Update the org.apache.catalina.servlet4preview package that can be used to gain early access to Servlet 4.0 features to align with the latest proposals from the Servlet 4.0 expert group. This includes updates to the new Servlet mapping API, new methods on the ServletContext to make the available API more equivalent to the deployment descriptor, updates to the HTTP push API and the ability to set default request and response character encoding per web application. Note that the Servlet 4.0 API is still a work in progress and further changes are likely. (markt)|
Catalina|2017-03-13 Tomcat 8.5.12 (markt)|Fix|60798|Correct a bug in the handling of JARs in unpacked WARs that meant multiple attempts to read the same entry from a JAR in succession would fail for the second and subsequent attempts. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=60798
Catalina|2017-03-13 Tomcat 8.5.12 (markt)|Fix|60808|Ensure that the Map returned by ServletRequest.getParameterMap() is fully immutable. Based on a patch provided by woosan. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=60808
Catalina|2017-03-13 Tomcat 8.5.12 (markt)|Fix|60824|Correctly cache the Subject in the session - if there is a session - when running under a SecurityManager. Patch provided by Jan Engehausen. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=60824
Catalina|2017-03-13 Tomcat 8.5.12 (markt)|Fix||Ensure request and response facades are used when firing application listeners. (markt/remm)|
Coyote|2017-03-13 Tomcat 8.5.12 (markt)|Fix||Improve handling of case when an HTTP/2 client sends more data that is subject to flow control than the current window size allows. (markt)|
Coyote|2017-03-13 Tomcat 8.5.12 (markt)|Fix||Improve NIO2 look-ahead parsing of TLS client hello for SNI with large client hello messages. (markt)|
Coyote|2017-03-13 Tomcat 8.5.12 (markt)|Fix|59807|Provide a better error message when there is no SSLHostConfig defined with a hostName that matches the defaultSSLHostConfigName for the associated Connector. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=59807
Coyote|2017-03-13 Tomcat 8.5.12 (markt)|Fix||Include the value of SslHostConfig.truststoreAlgorithm when warning that the algorithm does not support the certificateVerificationDepth configuration option. (markt)|
Coyote|2017-03-13 Tomcat 8.5.12 (markt)|Fix||Ensure that executor thread pools used with connectors pre-start the configured minimum number of idle threads. (markt)|
Coyote|2017-03-13 Tomcat 8.5.12 (markt)|Add|60594|Allow some invalid characters that were recently restricted to be processed in requests by using the system property tomcat.util.http.parser.HttpParser.requestTargetAllow. (csutherl)|https://bz.apache.org/bugzilla/show_bug.cgi?id=60594
Coyote|2017-03-13 Tomcat 8.5.12 (markt)|Fix|60627|Modify the Rfc6265CookieProcessor so that in addition to cookie headers that start with an explicit RFC 2109 $Version=1, cookies that start with $Version=0 are also parsed as RFC 2109 cookies. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=60627
Coyote|2017-03-13 Tomcat 8.5.12 (markt)|Fix|60716|Add a new JSSE specific attribute, revocationEnabled, to SSLHostConfig to permit JSSE provider revocation checks to be enabled when no certificateRevocationListFile has been configured. The expectation is that configuration will be performed via a JSSE provider specific mechanisms. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=60716
Coyote|2017-03-13 Tomcat 8.5.12 (markt)|Fix||Modify the cookie header generated by the Rfc6265CookieProcessor so it always sends an Expires attribute as well as a Max-Age attribute to avoid problems with Microsoft browsers that do not support the Max-Age attribute. (markt)|
Coyote|2017-03-13 Tomcat 8.5.12 (markt)|Fix|60761|Expose a protected getter and setter for NioEndpoint.stopLatch to make the class easier to extend. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=60761
Coyote|2017-03-13 Tomcat 8.5.12 (markt)|Fix||Prevent blocking reads after a stream exception occurs with HTTP/2. (remm)|
Jasper|2017-03-13 Tomcat 8.5.12 (markt)|Fix||Follow up to the fix for 58178. When creating the ELContext for a tag file, ensure that any registered ELContextListeners are fired. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=58178
Jasper|2017-03-13 Tomcat 8.5.12 (markt)|Fix||Refactor code generated for JSPs to reduce the size of the code required for tags. (markt)|
Jasper|2017-03-13 Tomcat 8.5.12 (markt)|Fix|60769|Correct a regression in the XML encoding detection refactoring carried out for 8.5.10 that incorrectly always used the detected BOM encoding in preference to any encoding specified in the prolog. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=60769
Jasper|2017-03-13 Tomcat 8.5.12 (markt)|Update||Update to the Eclipse JDT Compiler 4.6.1. (markt)|
Cluster|2017-03-13 Tomcat 8.5.12 (markt)|Add||Make the accessTimeout configurable in BackupManager and ClusterSingleSignOn. The accessTimeout is used as a timeout period for PING in replication map. (kfujino)|
Cluster|2017-03-13 Tomcat 8.5.12 (markt)|Fix|60806|To avoid ClassNotFoundException, make sure that the web application class loader is passed to ReplicatedContext. (kfujino)|https://bz.apache.org/bugzilla/show_bug.cgi?id=60806
WebSocket|2017-03-13 Tomcat 8.5.12 (markt)|Fix|60617|Correctly create a CONNECT request when establishing a WebSocket connection via a proxy. Patch provided by Svetlin Zarev. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=60617
Tribes|2017-03-13 Tomcat 8.5.12 (markt)|Add||Add log message that PING message has received beyond the timeout period. (kfujino)|
Tribes|2017-03-13 Tomcat 8.5.12 (markt)|Fix||When a PING message that beyond the time-out period has been received, make sure that valid member is added to the map membership. (kfujino)|
Tribes|2017-03-13 Tomcat 8.5.12 (markt)|Fix||Ensure that NoRpcChannelReply messages are not received on RpcCallback. (kfujino)|
Web Applications|2017-03-13 Tomcat 8.5.12 (markt)|Fix||Add Specification and Javadoc references for JASPIC to the Docs application. (csutherl)|
Other|2017-03-13 Tomcat 8.5.12 (markt)|Fix||Spelling corrections provided by Josh Soref. (violetagg)|
Other|2017-03-13 Tomcat 8.5.12 (markt)|Update||Update the packaged version of the Tomcat Native Library to 1.2.12 to pick up the latest Windows binaries built with OpenSSL 1.0.2k. (violetagg)|
Other|2017-03-13 Tomcat 8.5.12 (markt)|Add|60784|Update all unit tests that test the HTTP status line to check for the required space after the status code. Patch provided by Michael Osipov. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=60784
Other|2017-03-13 Tomcat 8.5.12 (markt)|Update||Update the NSIS Installer used to build the Windows installer to version 3.01. (markt)|
Catalina|2017-01-16 Tomcat 8.5.11 (markt)|Add|60620|Extend the JreMemoryLeakPreventionListener to provide protection against ForkJoinPool.commonPool() related memory leaks. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=60620
Coyote|2017-01-16 Tomcat 8.5.11 (markt)|Fix||Ensure UpgradeProcessor instances associated with closed connections are removed from the map of current connections to Processors. (markt)|
Coyote|2017-01-16 Tomcat 8.5.11 (markt)|Fix||Remove a workaround for a problem previously reported with WebSocket, TLS and APR that treated some error conditions as not errors. The original problem cannot be reproduced with the current code and the work-around is now causing problems. (markt)|
Jasper|2017-01-16 Tomcat 8.5.11 (markt)|Fix|60497|Follow up fix using a better variable name for the tag reuse flag. (remm)|https://bz.apache.org/bugzilla/show_bug.cgi?id=60497
Jasper|2017-01-16 Tomcat 8.5.11 (markt)|Fix||Revert use of try/finally for simple tags. (remm)|
WebSocket|2017-01-16 Tomcat 8.5.11 (markt)|Fix||Prevent potential processing loop on unexpected WebSocket connection closure. (markt)|
jdbc-pool|2017-01-16 Tomcat 8.5.11 (markt)|Add||Enable reset the statistics without restarting the pool. (kfujino)|
Other|2017-01-16 Tomcat 8.5.11 (markt)|Fix||Spelling corrections provided by Josh Soref. (violetagg)|
Catalina|not released Tomcat 8.5.10 (markt)|Add|53602|Add HTTP status code 451 (RFC 7725) to the list of HTTP status codes recognised by the ErrorReportValve. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=53602
Catalina|not released Tomcat 8.5.10 (markt)|Fix|60446|Handle the case where the stored user credential uses a different key length than the length currently configured for the CredentialHandler. Based on a patch by Niklas Holm. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=60446
Catalina|not released Tomcat 8.5.10 (markt)|Update||Update the warnings that reference required options for running on Java 9 to use the latest syntax for those options. (markt)|
Catalina|not released Tomcat 8.5.10 (markt)|Fix|60513|Fix thread safety issue with RMI cleanup code. (remm)|https://bz.apache.org/bugzilla/show_bug.cgi?id=60513
Coyote|not released Tomcat 8.5.10 (markt)|Fix||Expand the search process for a server certificate when OpenSSL is used with a JSSE connector and an explicit alias has not been configured. (markt)|
Coyote|not released Tomcat 8.5.10 (markt)|Fix|60450|Improve the selection algorithm for the default trust store type for a TLS Virtual Host. In particular, don't use PKCS12 as a default trust store type. Better document how the default trust store type is selected for a TLS virtual host. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=60450
Coyote|not released Tomcat 8.5.10 (markt)|Fix|60451|Correctly handle HTTP/2 header values that contain characters with unicode code points in the range 128 to 255. Reject with a clear error message HTTP/2 header values that contain characters with unicode code points above 255. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=60451
Coyote|not released Tomcat 8.5.10 (markt)|Fix||Improve the logic that selects an address to use to unlock the Acceptor to take account of platforms what do not listen on all local addresses when configured with an address of 0.0.0.0 or ::. (markt)|
Coyote|not released Tomcat 8.5.10 (markt)|Fix||Correct a regression in the refactoring to make wider use of ByteBuffer that caused an intermittent failure in the unit tests. (markt)|
Coyote|not released Tomcat 8.5.10 (markt)|Fix|60482|HTTP/2 shouldn't do URL decoding on the query string. (remm)|https://bz.apache.org/bugzilla/show_bug.cgi?id=60482
Coyote|not released Tomcat 8.5.10 (markt)|Fix||Fix an HTTP/2 compression error. Once a new size has been agreed for the dynamic HPACK table, the next header block must begin with a dynamic table update. (markt)|
Coyote|not released Tomcat 8.5.10 (markt)|Fix|60508|Set request start time for HTTP/2. (remm)|https://bz.apache.org/bugzilla/show_bug.cgi?id=60508
Jasper|not released Tomcat 8.5.10 (markt)|Update||Implement a simpler JSP file encoding detector that delegates XML prolog encoding detection to the JRE rather than using a custom XML parser. (markt)|
Jasper|not released Tomcat 8.5.10 (markt)|Fix|60497|Restore previous tag reuse behavior following the use of try/finally. (remm)|https://bz.apache.org/bugzilla/show_bug.cgi?id=60497
Jasper|not released Tomcat 8.5.10 (markt)|Fix||Improve the error handling for simple tags to ensure that the tag is released and destroyed once used. (remm)|
WebSocket|not released Tomcat 8.5.10 (markt)|Fix||Correctly handle blocking WebSocket writes when the write times out just before the write is attempted. (markt)|
Web Applications|not released Tomcat 8.5.10 (markt)|Add||In the documentation web application, be explicit that clustering requires a secure network for all of the cluster network traffic. (markt)|
Web Applications|not released Tomcat 8.5.10 (markt)|Update||Update the ASF logos to the new versions.|
Web Applications|not released Tomcat 8.5.10 (markt)|Fix|60344|Add a note to BUILDING.txt regarding using the source bundle with the correct line endings. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=60344
Web Applications|not released Tomcat 8.5.10 (markt)|Fix|60468|Correct the format of the sample ISO-8601 date used to report the build date for the documentation. Patch provided by Michael Osipov. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=60468
Other|not released Tomcat 8.5.10 (markt)|Update||Update the ASF logos used in the Apache Tomcat installer for Windows to use the new versions.|
Catalina|2016-12-08 Tomcat 8.5.9 (markt)|Update|60202|Add an available flag to realms, to indicate the state, or the realm backend. Update lockout realm to only register auth failures if the realm is available. (remm)|https://bz.apache.org/bugzilla/show_bug.cgi?id=60202
Catalina|2016-12-08 Tomcat 8.5.9 (markt)|Fix|60340|Readability improvements for CSS used in DefaultServlet and ErrorReportValve. Patch provided by Michael Osipov. (violetagg)|https://bz.apache.org/bugzilla/show_bug.cgi?id=60340
Catalina|2016-12-08 Tomcat 8.5.9 (markt)|Fix|60351|Delay creating META-INF/war-tracker file until after the WAR has been expanded to address the case where the Tomcat process terminates during the expansion. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=60351
Catalina|2016-12-08 Tomcat 8.5.9 (markt)|Fix||Correctly generate URLs for resources located inside JARs that are themselves located inside a packed WAR file. (markt)|
Catalina|2016-12-08 Tomcat 8.5.9 (markt)|Fix||Correctly handle the configClass attribute of a Host when embedding Tomcat. (markt)|
Catalina|2016-12-08 Tomcat 8.5.9 (markt)|Fix|60368|Restore egde case for embedded allowing the connector to be removed. (remm)|https://bz.apache.org/bugzilla/show_bug.cgi?id=60368
Catalina|2016-12-08 Tomcat 8.5.9 (markt)|Fix|60379|Dispose of the GSS credential once it is no longer required. Patch provided by Michael Osipov. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=60379
Catalina|2016-12-08 Tomcat 8.5.9 (markt)|Fix|60380|Ensure that a call to HttpServletRequest#logout() triggers a call to TomcatPrincipal#logout(). Based on a patch by Michael Osipov. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=60380
Catalina|2016-12-08 Tomcat 8.5.9 (markt)|Fix|60387|Correct the javadoc for o.a.catalina.AccessLog.setRequestAttributesEnabled. The default value is different for the different implementations. (violetagg)|https://bz.apache.org/bugzilla/show_bug.cgi?id=60387
Catalina|2016-12-08 Tomcat 8.5.9 (markt)|Code|60393|Use consistent parameter naming in implementations of Realm#authenticate(GSSContext, boolean). (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=60393
Catalina|2016-12-08 Tomcat 8.5.9 (markt)|Fix|60395|Log when an Authenticator passes an incomplete GSSContext to a Realm since it indicates a bug in the Authenticator. Patch provided by Michael Osipov. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=60395
Catalina|2016-12-08 Tomcat 8.5.9 (markt)|Fix|60400|When expanding the buffer used for reading the request body, ensure the read position will be restored to the original one. (violetagg)|https://bz.apache.org/bugzilla/show_bug.cgi?id=60400
Catalina|2016-12-08 Tomcat 8.5.9 (markt)|Fix|60410|Ensure that multiple calls to JarInputStreamWrapper#close() do not incorrectly trigger the closure of the underlying JAR or WAR file. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=60410
Catalina|2016-12-08 Tomcat 8.5.9 (markt)|Fix|60411|Implement support in the RewriteValve for symbolic names to specify the redirect code to use when returning a redirect response to the user agent. Patch provided by Michael Osipov. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=60411
Catalina|2016-12-08 Tomcat 8.5.9 (markt)|Fix|60413|"In the RewriteValve write empty capture groups as the empty string rather than as ""null"" when generating the re-written URL. Based on a patch by Michael Osipov. (markt)"|https://bz.apache.org/bugzilla/show_bug.cgi?id=60413
Coyote|2016-12-08 Tomcat 8.5.9 (markt)|Fix|60372|Ensure the response headers' buffer limit is reset to the capacity of this buffer when IOException occurs while writing the headers to the socket. (violetagg)|https://bz.apache.org/bugzilla/show_bug.cgi?id=60372
Coyote|2016-12-08 Tomcat 8.5.9 (markt)|Fix||Ensure that the availability of configured upgrade protocols that require ALPN is correctly reported during Tomcat start. (markt)|
Coyote|2016-12-08 Tomcat 8.5.9 (markt)|Fix|60386|Implement a more sophisticated pruning algorithm for removing closed streams from the priority tree to ensure that the tree does not grow too large. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=60386
Coyote|2016-12-08 Tomcat 8.5.9 (markt)|Fix|60409|When unable to complete sendfile request, ensure the Processor will be added to the cache only once. (markt/violetagg)|https://bz.apache.org/bugzilla/show_bug.cgi?id=60409
Coyote|2016-12-08 Tomcat 8.5.9 (markt)|Fix||Ensure that the endpoint is able to unlock the acceptor thread during shutdown if the endpoint is configured to listen to any local address of a specific type such as 0.0.0.0 or ::. (markt)|
Coyote|2016-12-08 Tomcat 8.5.9 (markt)|Add||Add a new configuration option, ipv6v6only to the APR connectors that allows them to be configure to only accept IPv6 connections when configured with an IPv6 address rather than the default which is to accept IPv4 connections as well if the operating system uses a dual network stack. (markt)|
Coyote|2016-12-08 Tomcat 8.5.9 (markt)|Fix||Improve the logic that unlocks the acceptor thread so a better choice is made for the address to connect to when a connector is configured for any local port. This reduces the likelihood of the unlock failing. (markt)|
Coyote|2016-12-08 Tomcat 8.5.9 (markt)|Fix|60436|Avoid a potential NPE when processing async timeouts. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=60436
Coyote|2016-12-08 Tomcat 8.5.9 (markt)|Fix||Reduce the window in which an async request that has just started processing on a container thread remains eligible for an async timeout. (markt)|
Jasper|2016-12-08 Tomcat 8.5.9 (markt)|Fix|60431|Improve handling of varargs in UEL expressions. Based on a patch by Ben Wolfe. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=60431
Web applications|2016-12-08 Tomcat 8.5.9 (markt)|Fix||Fix JDK version number documented in BUILDING.txt. (rjung)|
Web applications|2016-12-08 Tomcat 8.5.9 (markt)|Fix||Correct a typo in Host Configuration Reference. Issue reported via comments.apache.org. (violetagg)|
Web applications|2016-12-08 Tomcat 8.5.9 (markt)|Fix|60412|Add information on the comment syntax for the RewriteValve configuration. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=60412
Web applications|2016-12-08 Tomcat 8.5.9 (markt)|Fix|60467|remove problematic characters from XML documentation. Based upon a patch by Michael Osipov. (schultz)|https://bz.apache.org/bugzilla/show_bug.cgi?id=60467
Tribes|2016-12-08 Tomcat 8.5.9 (markt)|Fix||Reduce the warning logs for a message received from a different domain in order to avoid excessive log outputs. (kfujino)|
WebSocket|2016-12-08 Tomcat 8.5.9 (markt)|Fix|60437|Avoid possible handshake overflows in the websocket client. (remm)|https://bz.apache.org/bugzilla/show_bug.cgi?id=60437
jdbc-pool|2016-12-08 Tomcat 8.5.9 (markt)|Add|58816|Implement the statistics of jdbc-pool. The stats infos are borrowedCount, returnedCount, createdCount, releasedCount, reconnectedCount, releasedIdleCount and removeAbandonedCount. (kfujino)|https://bz.apache.org/bugzilla/show_bug.cgi?id=58816
jdbc-pool|2016-12-08 Tomcat 8.5.9 (markt)|Fix|60194|If validationQuery is not specified, connection validation is done by calling the isValid() method. (kfujino)|https://bz.apache.org/bugzilla/show_bug.cgi?id=60194
jdbc-pool|2016-12-08 Tomcat 8.5.9 (markt)|Fix|60398|Fix testcase of TestSlowQueryReport. (kfujino)|https://bz.apache.org/bugzilla/show_bug.cgi?id=60398
Other|2016-12-08 Tomcat 8.5.9 (markt)|Fix||Allow customization of service.bat, such as heap memory size, service startup mode and JVM args. Patch provided by isapir via Github. (violetagg)|
Other|2016-12-08 Tomcat 8.5.9 (markt)|Fix|60366|Change catalina.bat to use directly LOGGING_MANAGER and LOGGING_CONFIG variables in order to configure logging, instead of modifying JAVA_OPTS. Patch provided by Petter Isberg. (violetagg)|https://bz.apache.org/bugzilla/show_bug.cgi?id=60366
Other|2016-12-08 Tomcat 8.5.9 (markt)|Fix|60383|JASPIC API is added as a dependency to the org.apache.tomcat:tomcat-catalina maven artifact. (violetagg)|https://bz.apache.org/bugzilla/show_bug.cgi?id=60383
Other|2016-12-08 Tomcat 8.5.9 (markt)|Fix||Update the comments associated with the TLS Connector examples in server.xml. (markt)|
Other|2016-12-08 Tomcat 8.5.9 (markt)|Add||New property is added test.verbose in order to control whether the output of the tests is displayed on the console or not. Patch provided by Emmanuel Bourg. (violetagg)|
Other|2016-12-08 Tomcat 8.5.9 (markt)|Code||TestOpenSSLCipherConfigurationParser.testSpecification - if there are test failures, provide more detailed information. Patch provided by Emmanuel Bourg. (violetagg)|
Coyote|2016-11-08 Tomcat 8.5.8 (markt)|Fix||Check that threadPriority values used in AbstractProtocol are valid. (fschumacher)|
Catalina|not released Tomcat 8.5.7 (markt)|Fix||When creating a new Connector via JMX, ensure that both HTTP/1.1 and AJP/1.3 connectors can be created. (markt)|
Catalina|not released Tomcat 8.5.7 (markt)|Fix||Include the Context name in the log message when an item cannot be added to the cache. (markt)|
Catalina|not released Tomcat 8.5.7 (markt)|Fix||Exclude JAR files in /WEB-INF/lib from the static resource cache. (markt)|
Catalina|not released Tomcat 8.5.7 (markt)|Fix||When calling getResourceAsStream() on a directory, ensure that null is returned. (markt)|
Catalina|not released Tomcat 8.5.7 (markt)|Fix|60161|Allow creating subcategories of the container logger, and use it for the rewrite valve. (remm)|https://bz.apache.org/bugzilla/show_bug.cgi?id=60161
Catalina|not released Tomcat 8.5.7 (markt)|Fix||Correctly test for control characters when reading the provided shutdown password. (markt)|
Catalina|not released Tomcat 8.5.7 (markt)|Fix|60297|Simplify connector creation in embedded mode. (remm)|https://bz.apache.org/bugzilla/show_bug.cgi?id=60297
Catalina|not released Tomcat 8.5.7 (markt)|Fix||Refactor creation of containers in embedded mode for more consistency and flexibility. (remm)|
Catalina|not released Tomcat 8.5.7 (markt)|Add||Introduce new methods read(ByteBuffer)/ write(ByteBuffer) in o.a.catalina.connector.CoyoteInputStream/ o.a.catalina.connector.CoyoteOutputStream. (violetagg)|
Catalina|not released Tomcat 8.5.7 (markt)|Fix||When configuring the JMX remote listener, specify the allowed types for the credentials. (markt)|
Coyote|not released Tomcat 8.5.7 (markt)|Fix||Correct the HPACK header table size configuration that transposed the client and server table sizes when creating the encoder and decoder. (markt)|
Coyote|not released Tomcat 8.5.7 (markt)|Fix||Don't continue to process an HTTP/2 stream if it is reset during header parsing. (markt)|
Coyote|not released Tomcat 8.5.7 (markt)|Fix||HTTP/2 uses separate headers for each Cookie. As required by RFC 7540, merge these into a single Cookie header before processing continues. (markt)|
Coyote|not released Tomcat 8.5.7 (markt)|Fix||Align the HTTP/2 implementation with the HTTP/1.1 implementation and return a 500 response when an unhandled exception occurs during request processing. (markt)|
Coyote|not released Tomcat 8.5.7 (markt)|Fix||Correct the HTTP header parser so that DEL is not treated as a valid token character. (markt)|
Coyote|not released Tomcat 8.5.7 (markt)|Add||Add checks around the handling of HTTP/2 pseudo headers. (markt)|
Coyote|not released Tomcat 8.5.7 (markt)|Add||Add support for trailer headers to the HTTP/2 implementation. (markt)|
Coyote|not released Tomcat 8.5.7 (markt)|Fix|60232|When processing headers for an HTTP/2 stream, ensure that the read buffer is large enough for the header being processed. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=60232
Coyote|not released Tomcat 8.5.7 (markt)|Add||Add configuration options to the HTTP/2 implementation to control the maximum number of headers allowed, the maximum size of headers allowed, the maximum number of trailer headers allowed, the maximum size of trailer headers allowed and the maximum number of cookies allowed. (markt)|
Coyote|not released Tomcat 8.5.7 (markt)|Fix||Correctly differentiate between sending and receiving a reset frame when tracking the state of an HTTP/2 stream. (markt)|
Coyote|not released Tomcat 8.5.7 (markt)|Fix|60319|When using an Executor, disconnect it from the Connector attributes maxThreads, minSpareThreads and threadPriority to enable the configuration settings to be consistently reported. These Connector attributes will be reported as -1 when an Executor is in use. The values used by the executor may be set and obtained via the Executor. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=60319
Coyote|not released Tomcat 8.5.7 (markt)|Fix||If an I/O error occurs during async processing on a non-container thread, ensure that the onError() event is triggered. (markt)|
Coyote|not released Tomcat 8.5.7 (markt)|Fix||Improve detection of I/O errors during async processing on non-container threads and trigger async error handling when they are detected. (markt)|
Coyote|not released Tomcat 8.5.7 (markt)|Add||Add additional checks for valid characters to the HTTP request line parsing so invalid request lines are rejected sooner. (markt)|
Web applications|not released Tomcat 8.5.7 (markt)|Add||Add HTTP/2 configuration information to the documentation web application. (markt)|
Web applications|not released Tomcat 8.5.7 (markt)|Fix||Fix default value of validationInterval attribute in jdbc-pool. (kfujino)|
Web applications|not released Tomcat 8.5.7 (markt)|Fix||Correct a typo in CGI How-To. Issue reported via comments.apache.org. (violetagg)|
Tribes|not released Tomcat 8.5.7 (markt)|Fix||When the proxy node sends a backup retrieve message, ensure that using the channelSendOptions that has been set rather than the default channelSendOptions. (kfujino)|
Other|not released Tomcat 8.5.7 (markt)|Add||Add the JASPIC API jar to the Maven Central publication script. (markt)|
Other|not released Tomcat 8.5.7 (markt)|Fix||Remove classes from tomcat-util-scan.jar that are duplicates of those in tomcat-util.jar. (markt)|
Catalina|2016-10-10 Tomcat 8.5.6 (markt)|Add|59961|Add an option to the StandardJarScanner to control whether or not JAR Manifests are scanned for additional class path entries. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=59961
Catalina|2016-10-10 Tomcat 8.5.6 (markt)|Fix|60013|Refactor the previous fix to align the behaviour of the Rewrite Valve with mod_rewrite. As part of this, provide an implementation for the B and NE flags and improve the handling for the QSA flag. Includes multiple test cases by Santhana Preethiand a patch by Tiago Oliveira. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=60013
Catalina|2016-10-10 Tomcat 8.5.6 (markt)|Fix|60087|Refactor the web resources handling to use the Tomcat specific war:file:... URL protocol to refer to WAR files and their contents rather than the standard jar:file:... form since some components of the JRE, such as JAR verification, give unexpected results when the standard form is used. A side-effect of the refactoring is that when using packed WARs, it is now possible to reference a WAR and/or specific JARs within a WAR in the security policy file used when running under a SecurityManager. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=60087
Catalina|2016-10-10 Tomcat 8.5.6 (markt)|Fix|60116|Fix a problem with the rewrite valve that caused back references evaluated in conditions to be forced to lower case when using the NC flag. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=60116
Catalina|2016-10-10 Tomcat 8.5.6 (markt)|Fix||Ensure Digester.useContextClassLoader is considered in case the class loader is used. (violetagg)|
Catalina|2016-10-10 Tomcat 8.5.6 (markt)|Fix|60117|Ensure that the name of LogLevel is localized when using OneLineFormatter. Patch provided by Tatsuya Bessho. (kfujino)|https://bz.apache.org/bugzilla/show_bug.cgi?id=60117
Catalina|2016-10-10 Tomcat 8.5.6 (markt)|Fix|60138|Fix the SSLHostConfig so that the protocols attribute is limited to the protocols supported by the current JSSE implementation rather than the default protocols used by the implementation. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=60138
Catalina|2016-10-10 Tomcat 8.5.6 (markt)|Fix|60146|Improve performance for resource retrieval by making calls to WebResource.getInputStream() trigger caching if the resource is small enough. Patch provided by mohitchugh. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=60146
Catalina|2016-10-10 Tomcat 8.5.6 (markt)|Add|60151|Improve the exception error messages when a ResourceLink fails to specify the type, specifies an unknown type or specifies the wrong type. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=60151
Catalina|2016-10-10 Tomcat 8.5.6 (markt)|Fix|60167|Ignore empty lines in /etc/passwd files when using the PasswdUserDatabase. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=60167
Catalina|2016-10-10 Tomcat 8.5.6 (markt)|Fix|60170|Exclude the compressed test file index.html.br from RAT analysis. Patch provided by Gavin McDonald. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=60170
Catalina|2016-10-10 Tomcat 8.5.6 (markt)|Fix||When starting web resources, ensure that class resources are only started once. (markt)|
Catalina|2016-10-10 Tomcat 8.5.6 (markt)|Fix||Improve the access checks for linked global resources to handle the case where the current class loader is a child of the web application class loader. (markt)|
Catalina|2016-10-10 Tomcat 8.5.6 (markt)|Fix|60196|Ensure that the isMandatory flag is correctly set when using JASPIC authentication. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=60196
Catalina|2016-10-10 Tomcat 8.5.6 (markt)|Fix|60199|Log a warning if deserialization issues prevent a session attribute from being loaded. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=60199
Catalina|2016-10-10 Tomcat 8.5.6 (markt)|Fix|60208|When using RFC6265 compliant cookies, the / character should not be allowed in a cookie name since the RFC6265 will drop such cookies as invalid. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=60208
Coyote|2016-10-10 Tomcat 8.5.6 (markt)|Add||Refactor the code that implements the requirement that a call to complete() or dispatch() made from a non-container thread before the container initiated thread that called startAsync() completes must be delayed until the container initiated thread has completed. Rather than implementing this by blocking the non-container thread, extend the internal state machine to track this. This removes the possibility that blocking the non-container thread could trigger a deadlock. (markt)|
Coyote|2016-10-10 Tomcat 8.5.6 (markt)|Fix||Fail earlier if the client closes the connection during SNI processing. (markt)|
Coyote|2016-10-10 Tomcat 8.5.6 (markt)|Fix|60123|Avoid potential threading issues that could cause excessively large vales to be returned for the processing time of a current request. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=60123
Coyote|2016-10-10 Tomcat 8.5.6 (markt)|Fix|60174|Log instances of HeadersTooLargeException during request processing. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=60174
Coyote|2016-10-10 Tomcat 8.5.6 (markt)|Fix|60173|Allow up to 64kB HTTP/2 header table size limit. (remm)|https://bz.apache.org/bugzilla/show_bug.cgi?id=60173
Coyote|2016-10-10 Tomcat 8.5.6 (markt)|Fix||Java 9 compatibility of direct ByteBuffer cleaner. (remm)|
Jasper|2016-10-10 Tomcat 8.5.6 (markt)|Fix|60101|Remove preloading of the class that was deleted. (violetagg)|https://bz.apache.org/bugzilla/show_bug.cgi?id=60101
Web applications|2016-10-10 Tomcat 8.5.6 (markt)|Add||Expand the documentation for the nested elements within a Resources element to clarify the behaviour of different configuration options with respect to the order in which resources are searched. (markt)|
Web applications|2016-10-10 Tomcat 8.5.6 (markt)|Add||Add an example of using the classesToInitialize attribute of the JreMemoryLeakPreventionListener to the documentation web application. Based on a patch by Cris Berneburg. (markt)|
Web applications|2016-10-10 Tomcat 8.5.6 (markt)|Fix|60192|Correct a typo in the status output of the Manager application. Patch provided by Radhakrishna Pemmasani. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=60192
jdbc-pool|2016-10-10 Tomcat 8.5.6 (markt)|Fix||Notify jmx when returning the connection that has been marked suspect. (kfujino)|
jdbc-pool|2016-10-10 Tomcat 8.5.6 (markt)|Fix||Ensure that the POOL_EMPTY notification has been added to the jmx notification types. (kfujino)|
jdbc-pool|2016-10-10 Tomcat 8.5.6 (markt)|Fix|60099|Ensure that use all method arguments as a cache key when using StatementCache. (kfujino)|https://bz.apache.org/bugzilla/show_bug.cgi?id=60099
jdbc-pool|2016-10-10 Tomcat 8.5.6 (markt)|Fix|60139|Correct Javadocs for PoolConfiguration.getValidationInterval and setValidationInterval. Reported by Phillip Webb. (kfujino)|https://bz.apache.org/bugzilla/show_bug.cgi?id=60139
Other|2016-10-10 Tomcat 8.5.6 (markt)|Fix||Update the download location for Objenesis. (violetagg)|
Other|2016-10-10 Tomcat 8.5.6 (markt)|Fix|60164|Replace log4j-core*.jar with log4j-web*.jar since it is log4j-web*.jar that contains the ServletContainerInitializer. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=60164
Other|2016-10-10 Tomcat 8.5.6 (markt)|Add||Add documentation to the bin/catalina.bat script to remind users that environment variables don't affect the configuration of Tomcat when run as a Windows Service. Based upon a documentation patch by James H.H. Lampert. (schultz)|
Other|2016-10-10 Tomcat 8.5.6 (markt)|Update||Update the packaged version of the Tomcat Native Library to 1.2.10 to pick up the latest Windows binaries built with OpenSSL 1.0.2j. (markt)|
Catalina|2016-09-05 Tomcat 8.5.5 (markt)|Fix|18500|Add limited support for wildcard host names and host aliases. Names of the form *.domainname are now permitted. Note that an exact host name match takes precedence over a wild card host name match. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=18500
Catalina|2016-09-05 Tomcat 8.5.5 (markt)|Fix|59813|Ensure that circular relations of the Class-Path attribute from JAR manifests will be processed correctly. (violetagg)|https://bz.apache.org/bugzilla/show_bug.cgi?id=59813
Catalina|2016-09-05 Tomcat 8.5.5 (markt)|Fix||Ensure that reading the singleThreadModel attribute of a StandardWrapper via JMX does not trigger initialisation of the associated servlet. With some frameworks this can trigger an unexpected initialisation thread and if initialisation is not thread-safe the initialisation can then fail. (markt)|
Catalina|2016-09-05 Tomcat 8.5.5 (markt)|Fix||Compatibility with rewrite from httpd for non existing headers. (jfclere)|
Catalina|2016-09-05 Tomcat 8.5.5 (markt)|Fix||By default, treat paths used to obtain a request dispatcher as encoded. This behaviour can be changed per web application via the dispatchersUseEncodedPaths attribute of the Context. (markt)|
Catalina|2016-09-05 Tomcat 8.5.5 (markt)|Fix|59839|Apply roleSearchAsUser to all nested searches in JNDIRealm. (fschumacher)|https://bz.apache.org/bugzilla/show_bug.cgi?id=59839
Catalina|2016-09-05 Tomcat 8.5.5 (markt)|Fix|59859|Fix resource leak in WebDAV servlet. Based on patch by Coty Sutherland. (fschumacher)|https://bz.apache.org/bugzilla/show_bug.cgi?id=59859
Catalina|2016-09-05 Tomcat 8.5.5 (markt)|Add||Provide a mechanism that enables the container to check if a component (typically a web application) has been granted a given permission when running under a SecurityManager without the current execution stack having to have passed through the component. Use this new mechanism to extend SecurityManager protection to the system property replacement feature of the digester. (markt)|
Catalina|2016-09-05 Tomcat 8.5.5 (markt)|Add||When retrieving an object via a ResourceLink, ensure that the object obtained is of the expected type. (markt)|
Catalina|2016-09-05 Tomcat 8.5.5 (markt)|Fix|59823|Ensure that JASPIC configuration is taken into account when calling HttpServletRequest.authenticate(). (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=59823
Catalina|2016-09-05 Tomcat 8.5.5 (markt)|Fix|59824|Mark the RewriteValve as supporting async processing by default. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=59824
Catalina|2016-09-05 Tomcat 8.5.5 (markt)|Fix|59862|Allow nested jar files scanning to be filtered with the system property tomcat.util.scan.StandardJarScanFilter.jarsToSkip. Patch is provided by Terence Bandoian. (violetagg)|https://bz.apache.org/bugzilla/show_bug.cgi?id=59862
Catalina|2016-09-05 Tomcat 8.5.5 (markt)|Fix|59866|When scanning WEB-INF/classes for annotations, don't scan the contents of WEB-INF/classes/META-INF (if present) since classes will never be loaded from that location. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=59866
Catalina|2016-09-05 Tomcat 8.5.5 (markt)|Fix|59888|Correctly handle tabs and spaces in quoted version one cookies when using the Rfc6265CookieProcessor. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=59888
Catalina|2016-09-05 Tomcat 8.5.5 (markt)|Fix|59912|Fix an edge case in input stream handling where an IOException could be thrown when reading a POST body. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=59912
Catalina|2016-09-05 Tomcat 8.5.5 (markt)|Fix|59913|Correct a regression introduced with the support for the Servlet 4 HttpServletRequest.getMapping() API that caused the attributes for forwarded requests to be lost if requested from within a subsequent include. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=59913
Catalina|2016-09-05 Tomcat 8.5.5 (markt)|Fix|59966|Do not start the web application if the error page configuration in web.xml is invalid. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=59966
Catalina|2016-09-05 Tomcat 8.5.5 (markt)|Fix||Switch the CGI servlet to the standard logging mechanism and remove support for the debug attribute. (markt)|
Catalina|2016-09-05 Tomcat 8.5.5 (markt)|Fix|60012|Improvements in the log messages. Based on suggestions by Nemo Chen. (violetagg)|https://bz.apache.org/bugzilla/show_bug.cgi?id=60012
Catalina|2016-09-05 Tomcat 8.5.5 (markt)|Fix||Changes to the allowLinking attribute of a StandardRoot instance now invalidate the cache if caching is enabled. (markt)|
Catalina|2016-09-05 Tomcat 8.5.5 (markt)|Add||Add a new initialisation parameter, envHttpHeaders, to the CGI Servlet to mitigate httpoxy (CVE-2016-5388) by default and to provide a mechanism that can be used to mitigate any future, similar issues. (markt)|https://httpoxy.org
Catalina|2016-09-05 Tomcat 8.5.5 (markt)|Add||When adding and removing ResourceLinks dynamically, ensure that the global resource is only visible via the ResourceLinkFactory when it is meant to be. (markt)|
Catalina|2016-09-05 Tomcat 8.5.5 (markt)|Fix|60008|When processing CORs requests, treat any origin with a URI scheme of file as a valid origin. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=60008
Catalina|2016-09-05 Tomcat 8.5.5 (markt)|Fix||Improve handling of exceptions during a Lifecycle events triggered by a state transition. The exception is now caught and the component is now placed into the FAILED state. (markt)|
Catalina|2016-09-05 Tomcat 8.5.5 (markt)|Fix|60013|Fix encoding issues when using the RewriteValve with UTF-8 query strings or UTF-8 redirect URLs. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=60013
Catalina|2016-09-05 Tomcat 8.5.5 (markt)|Fix|60022|Improve handling when a WAR file and/or the associated exploded directory are symlinked into the appBase. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=60022
Catalina|2016-09-05 Tomcat 8.5.5 (markt)|Fix||Fix a file descriptor leak when reading the global web.xml. (markt)|
Catalina|2016-09-05 Tomcat 8.5.5 (markt)|Fix||Consistently decode URL patterns provided via web.xml using the encoding of the web.xml file where specified or UTF-8 where no explicit encoding is specified. (markt)|
Catalina|2016-09-05 Tomcat 8.5.5 (markt)|Fix||Make timing attacks against the Realm implementations harder. (schultz)|
Catalina|2016-09-05 Tomcat 8.5.5 (markt)|Fix||A number of the JRE memory leaks addressed by the JreMemoryLeakPreventionListener have been fixed in Java 9 so the associated protection is now disabled when running on Java 9 onwards. (markt)|
Coyote|2016-09-05 Tomcat 8.5.5 (markt)|Fix||Correct a regression in refactoring to enable injection of custom keystores that broke the automatic conversion of OpenSSL style PEM key and certificate files for use with JSSE TLS connectors. (markt)|
Coyote|2016-09-05 Tomcat 8.5.5 (markt)|Fix|59910|"Don't hardcode key alias value to ""tomcat"" for JSSE. When using a keystore, OpenSSL will still default to it. (remm)"|https://bz.apache.org/bugzilla/show_bug.cgi?id=59910
Coyote|2016-09-05 Tomcat 8.5.5 (markt)|Fix|59904|Add a limit (default 200) for the number of cookies allowed per request. Based on a patch by gehui. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=59904
Coyote|2016-09-05 Tomcat 8.5.5 (markt)|Fix|59925|Correct regression in r1628368 and ensure that HTTP separators are handled as configured in the LegacyCookieProcessor. Patch provided by Kyohei Nakamura. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=59925
Coyote|2016-09-05 Tomcat 8.5.5 (markt)|Fix|59950|Correct log message when reporting that the current number of HTTP/2 streams for a connection could not be pruned to below the limit. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=59950
Coyote|2016-09-05 Tomcat 8.5.5 (markt)|Fix||Ensure that Semaphore.release is called in all cases. Even when there is an exception. (violetagg)|
Coyote|2016-09-05 Tomcat 8.5.5 (markt)|Fix|60030|Correct a potential infinite loop in the SNI parsing code triggered by failing to handle an end of stream condition. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=60030
Coyote|2016-09-05 Tomcat 8.5.5 (markt)|Fix||Small logging optimization in the Rfc6265CookieProcessor. Patch provided by Svetlin Zarev. (markt)|
Coyote|2016-09-05 Tomcat 8.5.5 (markt)|Fix||OpenSSL now disables 3DES by default so reflect this when using OpenSSL syntax to select ciphers. (markt)|
Coyote|2016-09-05 Tomcat 8.5.5 (markt)|Fix||Use the proper ERROR socket status code for async errors with NIO2. (remm)|
Coyote|2016-09-05 Tomcat 8.5.5 (markt)|Fix|60035|Fix a potential connection leak if the client drops a TLS connection before the handshake completes. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=60035
Coyote|2016-09-05 Tomcat 8.5.5 (markt)|Fix||Refactor the JSSE client certificate validation so that the effectiveness of the certificateVerificationDepth configuration attribute does not depend on the presence of a certificate revocation list. (markt)|
Coyote|2016-09-05 Tomcat 8.5.5 (markt)|Add||Log a warning at start up if a JSSE TLS connector is configured with a trusted certificate that is either not yet valid or has expired. (markt)|
Jasper|2016-09-05 Tomcat 8.5.5 (markt)|Fix||When writing out a full web.xml file with JspC ensure that the encoding used in the XML prolog matches the encoding used to write the contents of the file. (markt)|
Jasper|2016-09-05 Tomcat 8.5.5 (markt)|Fix||Improve the error handling for custom tags to ensure that the tag is returned to the pool or released and destroyed once used. (markt)|
Jasper|2016-09-05 Tomcat 8.5.5 (markt)|Fix|60032|Fix handling of method calls that use varargs within EL value expressions. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=60032
Jasper|2016-09-05 Tomcat 8.5.5 (markt)|Fix||Ignore engineOptionsClass and scratchdir when running under a security manager. (markt)|
Jasper|2016-09-05 Tomcat 8.5.5 (markt)|Fix||Fixed StringIndexOutOfBoundsException. Based on a patch provided by wuwen via Github. (violetagg)|
WebSocket|2016-09-05 Tomcat 8.5.5 (markt)|Fix|59908|Ensure that a reason phrase is included in the close message if a session is closed due to a timeout. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=59908
Web applications|2016-09-05 Tomcat 8.5.5 (markt)|Fix|59867|Correct the documentation provided by Manager's 403.jsp. (violetagg)|https://bz.apache.org/bugzilla/show_bug.cgi?id=59867
Web applications|2016-09-05 Tomcat 8.5.5 (markt)|Fix|59868|Clarify the documentation for the Manager web application to make clearer that the host name and IP address in the server section are the primary host name and IP address. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=59868
Web applications|2016-09-05 Tomcat 8.5.5 (markt)|Fix|59940|Correct the name of the truststorePassword attribute of the SSLHostConfig element in the configuration documentation. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=59940
Web applications|2016-09-05 Tomcat 8.5.5 (markt)|Fix||MBeans Descriptors How-To is moved to mbeans-descriptors-howto.html. Patch provided by Radoslav Husar. (violetagg)|
Web applications|2016-09-05 Tomcat 8.5.5 (markt)|Fix||Update NIO Connector configuration documentation with an information about socket.directSslBuffer. (violetagg)|
Web applications|2016-09-05 Tomcat 8.5.5 (markt)|Fix|60034|Correct a typo in the Manager How-To page of the documentation web application. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=60034
jdbc-pool|2016-09-05 Tomcat 8.5.5 (markt)|Fix||In order to avoid the unintended skip of PoolCleaner, remove the check code of the execution interval in the task that has been scheduled. (kfujino)|
jdbc-pool|2016-09-05 Tomcat 8.5.5 (markt)|Fix|59850|Ensure that the ResultSet is closed when enabling the StatementCache interceptor. (kfujino)|https://bz.apache.org/bugzilla/show_bug.cgi?id=59850
jdbc-pool|2016-09-05 Tomcat 8.5.5 (markt)|Fix|59923|Reduce the default value of validationInterval in order to avoid the potential issue that continues to return an invalid connection after database restart. (kfujino)|https://bz.apache.org/bugzilla/show_bug.cgi?id=59923
jdbc-pool|2016-09-05 Tomcat 8.5.5 (markt)|Fix||Ensure that the ResultSet is returned as Proxy object when enabling the StatementDecoratorInterceptor. (kfujino)|
jdbc-pool|2016-09-05 Tomcat 8.5.5 (markt)|Fix|60043|Ensure that the suspectTimeout works without removing connection when the removeAbandoned is disabled. (kfujino)|https://bz.apache.org/bugzilla/show_bug.cgi?id=60043
jdbc-pool|2016-09-05 Tomcat 8.5.5 (markt)|Fix||Add log message of when returning the connection that has been marked suspect. (kfujino)|
jdbc-pool|2016-09-05 Tomcat 8.5.5 (markt)|Fix||Correct Javadoc for ConnectionPool.suspect(). Based on a patch by Yahya Cahyadi. (markt)|
Other|2016-09-05 Tomcat 8.5.5 (markt)|Add|59871|Add a property (timeFormat) to JULI's OneLineFormatter to enable the format of the time stamp used in log messages to be configured. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=59871
Other|2016-09-05 Tomcat 8.5.5 (markt)|Fix|59899|Update Tomcat's copy of the Java Persistence annotations to include the changes made in 2.1 / JavaEE 7. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=59899
Other|2016-09-05 Tomcat 8.5.5 (markt)|Fix||Fixed typos in mbeans-descriptors.xml files. (violetagg)|
Other|2016-09-05 Tomcat 8.5.5 (markt)|Update||Update the internal fork of Commons BCEL to r1757132 to align with the BCEL 6 release. (markt)|
Other|2016-09-05 Tomcat 8.5.5 (markt)|Update||Update the internal fork of Commons DBCP 2 to r1757164 to pick up a couple of bug fixes. (markt)|
Other|2016-09-05 Tomcat 8.5.5 (markt)|Update||Update the internal fork of Commons Codec to r1757174. Code formatting changes only. (markt)|
Other|2016-09-05 Tomcat 8.5.5 (markt)|Update||Update the internal fork of Commons FileUpload to afdedc9. This pulls in a fix to improve the performance with large multipart boundaries. (markt)|
Catalina|2016-07-12 Tomcat 8.5.4 (markt)|Fix|57705|Add debug logging for requests denied by the remote host and remote address valves and filters. Based on a patch by Graham Leggett. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=57705
Catalina|2016-07-12 Tomcat 8.5.4 (markt)|Fix||Correct a regression in the fix for 58588 that removed the entire org.apache.juli package from the embedded JARs rendering them unusable. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=58588
Catalina|2016-07-12 Tomcat 8.5.4 (markt)|Add|59399|Add a new option to the Realm implementations that ship with Tomcat that allows the HTTP status code used for HTTP -> HTTPS redirects to be controlled per Realm. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=59399
Catalina|2016-07-12 Tomcat 8.5.4 (markt)|Update||Change the default of the sessionCookiePathUsesTrailingSlash attribute of the Context element to false since the problems caused when a Servlet is mapped to /* are more significant than the security risk of not enabling this option by default. (markt)|
Catalina|2016-07-12 Tomcat 8.5.4 (markt)|Fix||Follow-up to 59655. Improve the documentation for configuring permitted cookie names. Patch provided by Kyohei Nakamura. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=59655
Catalina|2016-07-12 Tomcat 8.5.4 (markt)|Fix||Do not attempt to start web resources during a web application's initialisation phase since the web application is not fully configured at that point and the web resources may not be correctly configured. (markt)|
Catalina|2016-07-12 Tomcat 8.5.4 (markt)|Fix|59708|Modify the LockOutRealm logic. Valid authentication attempts during the lock out period will no longer reset the lock out timer to zero. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=59708
Catalina|2016-07-12 Tomcat 8.5.4 (markt)|Fix||Improve error handling around user code prior to calling InstanceManager.destroy() to ensure that the method is executed. (markt)|
Coyote|2016-07-12 Tomcat 8.5.4 (markt)|Code||Refactor the certificate keystore and trust store generation to make it easier for embedded users to inject their own key stores. (markt)|
Coyote|2016-07-12 Tomcat 8.5.4 (markt)|Add|59233|Add the ability to add TLS virtual hosts dynamically. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=59233
Coyote|2016-07-12 Tomcat 8.5.4 (markt)|Update||Add a maxConcurrentStreamExecution on the HTTP/2 protocol handler to allow restricting the amount of concurrent stream that are being executed in a single connection. The default is to not limit it. (remm)|
Coyote|2016-07-12 Tomcat 8.5.4 (markt)|Fix||Correct a problem with ServletRequest.getServerPort() for secure HTTP/2 connections that meant an incorrect value was returned when using the default port. (markt)|
Coyote|2016-07-12 Tomcat 8.5.4 (markt)|Fix||Improve error handling around user code prior to calling InstanceManager.destroy() to ensure that the method is executed. (markt)|
Jasper|2016-07-12 Tomcat 8.5.4 (markt)|Fix||Improve error handling around user code prior to calling InstanceManager.destroy() to ensure that the method is executed. (markt)|
WebSocket|2016-07-12 Tomcat 8.5.4 (markt)|Code||Now the WebSocket implementation is not built directly on top of the Servlet API and can use Tomcat internals, there is no need for the dedicated WebSocket Executor. It has been replaced by the use of the Connector/Endpoint provided Executor. (markt)|
WebSocket|2016-07-12 Tomcat 8.5.4 (markt)|Fix||Improve error handling around user code prior to calling InstanceManager.destroy() to ensure that the method is executed. (markt)|
Web Applications|2016-07-12 Tomcat 8.5.4 (markt)|Fix||Do not log an additional case of IOExceptions in the error handler for the Drawboard WebSocket example when the root cause is the client disconnecting since the logs add no value. (markt)|
Web Applications|2016-07-12 Tomcat 8.5.4 (markt)|Fix|59642|Mention the localDataSource in the DataSourceRealm section of the Realm How-To. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=59642
Web Applications|2016-07-12 Tomcat 8.5.4 (markt)|Fix|59672|Update the security considerations page of the documentation web application to take account of the fact that the Manager and HostManager applications now have a RemoteAddrValve configured by default. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=59672
Web Applications|2016-07-12 Tomcat 8.5.4 (markt)|Fix||Follow-up to the fix for 59399. Ensure that the new attribute transportGuaranteeRedirectStatus is documented for all Realms. Also document the NullRealm and when it is automatically created for an Engine. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=59399
Web Applications|2016-07-12 Tomcat 8.5.4 (markt)|Fix||Fix the description of maxAge attribute in jdbc-pool doc. This attribute works both when a connection is returned and when a connection is borrowed. (kfujino)|
Web Applications|2016-07-12 Tomcat 8.5.4 (markt)|Fix|59774|Correct the prefix values in the documented examples for configuring the AccessLogValve. Patch provided by Mike Noordermeer. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=59774
Extras|2016-07-12 Tomcat 8.5.4 (markt)|Code|58588|Remove the JULI extras package from the distribution. It was only useful for switching Tomcat's internal logging to log4j 1.2.x and that version of log4j is no longer supported. No additional Tomcat code is required if switching Tomcat's internal logging to log via log4j 2.x. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=58588
Tribes|2016-07-12 Tomcat 8.5.4 (markt)|Add||Add log message when the ping has timed-out. (kfujino)|
Tribes|2016-07-12 Tomcat 8.5.4 (markt)|Fix||If the ping message has been received at the AbstractReplicatedMap#leftOver method, ensure that notify the member is alive than ignore it. (kfujino)|
jdbc-pool|2016-07-12 Tomcat 8.5.4 (markt)|Fix||Fix the duplicated connection release when connection verification failed. (kfujino)|
jdbc-pool|2016-07-12 Tomcat 8.5.4 (markt)|Fix||Ensure that do not remove the abandoned connection that has been already released. (kfujino)|
Other|2016-07-12 Tomcat 8.5.4 (markt)|Update|59276|Update optional Checkstyle library to 6.17. (kkolinko)|https://bz.apache.org/bugzilla/show_bug.cgi?id=59276
Other|2016-07-12 Tomcat 8.5.4 (markt)|Add||Use the mirror network rather than the ASF master site to download the current ASF dependencies. (markt)|
Other|2016-07-12 Tomcat 8.5.4 (markt)|Update||Update the packaged version of the Tomcat Native Library to 1.2.8 to pick up the latest fixes and make 1.2.8 the minimum recommended version. (markt)|
Other|2016-07-12 Tomcat 8.5.4 (markt)|Code||Use UTF-8 with a standard prolog for all XML files. (markt)|
Catalina|2016-06-13 Tomcat 8.5.3 (markt)|Fix||RMI Target related memory leaks are avoidable which makes them an application bug that needs to be fixed rather than a JRE bug to work around. Therefore, start logging RMI Target related memory leaks on web application stop. Add an option that controls if the check for these leaks is made. Log a warning if running on Java 9 with this check enabled but without the command line option it requires. (markt)|
Catalina|2016-06-13 Tomcat 8.5.3 (markt)|Fix||Ensure NPE will not be thrown during deployment when scanning jar files without MANIFEST.MF file. (violetagg)|
Catalina|2016-06-13 Tomcat 8.5.3 (markt)|Code||Remove the clearReferencesStatic option from StandardContext. It was known to cause problems with some libraries (such as log4j) and was only linked to suspected memory leaks rather than known memory leaks. It had been disabled by default with no increase in the reports of memory leaks for some time. (markt)|
Catalina|2016-06-13 Tomcat 8.5.3 (markt)|Fix|59604|Correct the assumption made in the URL decoding that the default platform encoding is always compatible with ISO-8859-1. This assumption is not always valid, e.g. on z/OS. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=59604
Catalina|2016-06-13 Tomcat 8.5.3 (markt)|Fix|59608|Skip over any invalid Class-Path attribute from JAR manifests. Log errors at debug level due to many bad libraries. (remm)|https://bz.apache.org/bugzilla/show_bug.cgi?id=59608
Catalina|2016-06-13 Tomcat 8.5.3 (markt)|Fix||Fix error message when failed to register MBean. (kfujino)|
Catalina|2016-06-13 Tomcat 8.5.3 (markt)|Fix|59655|Configure the cookie name validation to use RFC6265 rules by default to align it with the default cookie parser. Document the impact system properties have on cookie name validation. (mark)|https://bz.apache.org/bugzilla/show_bug.cgi?id=59655
Coyote|2016-06-13 Tomcat 8.5.3 (markt)|Fix||Ensure that requests with HTTP method names that are not tokens (as required by RFC 7231) are rejected with a 400 response. (markt)|
Coyote|2016-06-13 Tomcat 8.5.3 (markt)|Fix||When an asynchronous request is processed by the AJP connector, ensure that request processing has fully completed before starting the next request. (markt)|
Coyote|2016-06-13 Tomcat 8.5.3 (markt)|Fix||Improve handling of HTTP/2 stream resets. (markt)|
Coyote|2016-06-13 Tomcat 8.5.3 (markt)|Add|58750|The HTTP Server header is no longer set by default. A Server header may be configured by setting the server attribute on the Connector. A new Connector attribute, serverRemoveAppProvidedValues may be used to remove any Server header set by a web application. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=58750
Coyote|2016-06-13 Tomcat 8.5.3 (markt)|Fix|59564|Correct offset when reading into HTTP/2 input buffer that could cause problems reading request bodies. (violetagg/markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=59564
Coyote|2016-06-13 Tomcat 8.5.3 (markt)|Fix||Modify the handling of read/write timeouts so that the appropriate error handling (ReadListener.onError(), WriteListener.onError() or AsyncListener.onError()) is called. (markt)|
Coyote|2016-06-13 Tomcat 8.5.3 (markt)|Fix||If an async dispatch results in the completion of request processing, ensure that any remaining request body is swallowed before starting the processing of the next request else the remaining body may be read as the start of the next request leading to a 400 response. (markt)|
Coyote|2016-06-13 Tomcat 8.5.3 (markt)|Fix||Fix a cause of multiple attempts to close the same socket. (markt)|
Jasper|2016-06-13 Tomcat 8.5.3 (markt)|Fix|59567|Fix NPE scanning webapps for TLDs when an exploded JAR has an empty WEB-INF/classes/META-INF folder. (remm)|https://bz.apache.org/bugzilla/show_bug.cgi?id=59567
Jasper|2016-06-13 Tomcat 8.5.3 (markt)|Fix||Fix a memory leak in the expression language implementation that caused the class loader of the first web application to use expressions to be pinned in memory. (markt)|
Jasper|2016-06-13 Tomcat 8.5.3 (markt)|Fix|59654|Improve error message when attempting to use a TLD file from an invalid location. Patch provided by Huxing Zhang. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=59654
WebSocket|2016-06-13 Tomcat 8.5.3 (markt)|Fix|59659|Fix possible memory leak in WebSocket handling of unexpected client disconnects. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=59659
Web applications|2016-06-13 Tomcat 8.5.3 (markt)|Fix|58891|Update the SSL how-to. Based on a suggestion by Alexander Kjäll. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=58891
jdbc-pool|2016-06-13 Tomcat 8.5.3 (markt)|Fix||Fix a memory leak with the pool cleaner thread that retained a reference to the web application class loader for the first web application to use a connection pool. (markt)|
Other|2016-06-13 Tomcat 8.5.3 (markt)|Update||Update the internal fork of Commons DBCP 2 to r1743696 (2.1.1 plus additional fixes). (markt)|
Other|2016-06-13 Tomcat 8.5.3 (markt)|Update||Update the internal fork of Commons Pool 2 to r1743697 (2.4.2 plus additional fixes). (markt)|
Other|2016-06-13 Tomcat 8.5.3 (markt)|Update||Update the internal fork of Commons File Upload to r1743698 (1.3.1 plus additional fixes). (markt)|
Other|2016-06-13 Tomcat 8.5.3 (markt)|Fix|58626|Add support for a new environment variable (USE_NOHUP) that causes nohup to be used when starting Tomcat. It is disabled by default except on HP-UX where it is enabled by default since it is required when starting Tomcat at boot on HP-UX. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=58626
Catalina|2016-05-16 Tomcat 8.5.2 (markt)|Fix||Ensure that annotated web components packed in web fragments will be processed when unpackWARs is enabled. (violetagg)|
Catalina|not released Tomcat 8.5.1 (markt)|Fix|59206|Ensure NPE will not be thrown by o.a.tomcat.util.file.ConfigFileLoader when catalina.base is not specified. (violetagg)|https://bz.apache.org/bugzilla/show_bug.cgi?id=59206
Catalina|not released Tomcat 8.5.1 (markt)|Fix|59217|Remove duplication in the recycling of the path in o.a.tomcat.util.http.ServerCookie. Patch is provided by Kyohei Nakamura. (violetagg)|https://bz.apache.org/bugzilla/show_bug.cgi?id=59217
Catalina|not released Tomcat 8.5.1 (markt)|Fix||Fixed possible NPE in o.a.catalina.loader.WebappClassLoaderBase.getResourceAsStream (violetagg)|
Catalina|not released Tomcat 8.5.1 (markt)|Fix|59213|Async dispatches should be based off a wrapped request. (remm)|https://bz.apache.org/bugzilla/show_bug.cgi?id=59213
Catalina|not released Tomcat 8.5.1 (markt)|Fix||Ensure that javax.servlet.ServletRequest and javax.servlet.ServletResponse provided during javax.servlet.AsyncListener registration are made available via javax.servlet.AsyncEvent.getSuppliedRequest and javax.servlet.AsyncEvent.getSuppliedResponse (violetagg)|
Catalina|not released Tomcat 8.5.1 (markt)|Fix|59219|Ensure AsyncListener.onError() is called if an Exception is thrown during async processing. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=59219
Catalina|not released Tomcat 8.5.1 (markt)|Fix|59220|Ensure that AsyncListener.onComplete() is called if the async request times out and the response is already committed. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=59220
Catalina|not released Tomcat 8.5.1 (markt)|Fix|59226|Process the Class-Path attribute from JAR manifests for JARs on the class path excluding JARs packaged in WEB-INF/lib. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=59226
Catalina|not released Tomcat 8.5.1 (markt)|Fix|59255|Fix possible NPE in mapper. (kkolinko/remm)|https://bz.apache.org/bugzilla/show_bug.cgi?id=59255
Catalina|not released Tomcat 8.5.1 (markt)|Fix|59256|slf4j-taglib*.jar should not be excluded from the standard JAR scanning by default. (violetagg)|https://bz.apache.org/bugzilla/show_bug.cgi?id=59256
Catalina|not released Tomcat 8.5.1 (markt)|Fix||Clarify in the log message that specifying both urlPatterns and value attributes in WebServlet and WebFilter annotations is not allowed. (violetagg)|
Catalina|not released Tomcat 8.5.1 (markt)|Fix||Ensure the exceptions caused by Valves will be available in the log files so that they can be evaluated when o.a.catalina.valves.ErrorReportValve.showReport is disabled. Patch is provided by Svetlin Zarev. (violetagg)|
Catalina|not released Tomcat 8.5.1 (markt)|Fix||Remove unused distributable attribute that is defined as TransientAttribute of Manager in StoreConfig. (kfujino)|
Catalina|not released Tomcat 8.5.1 (markt)|Fix||Fix handling of Cluster Receiver in StoreConfig. The bind and host attributes define as TransientAttribute. (kfujino)|
Catalina|not released Tomcat 8.5.1 (markt)|Fix|59261|ServletRequest.getAsyncContext() now throws an IllegalStateException as required by the Servlet specification if the request is not in asynchronous mode when called. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=59261
Catalina|not released Tomcat 8.5.1 (markt)|Fix|59269|Correct the implementation of PersistentManagerBase so that minIdleSwap functions as designed and sessions are swapped out to keep the active session count below maxActiveSessions. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=59269
Catalina|not released Tomcat 8.5.1 (markt)|Add||Add the org.apache.catalina.servlet4preview package that can be used to gain early access to Servlet 4.0 features. Note that this package will not be present in Tomcat 9. (markt)|
Catalina|not released Tomcat 8.5.1 (markt)|Fix||Correctly configure the base path for a resources directory provided by an expanded JAR file. Patch provided by hengyunabc. (markt)|
Catalina|not released Tomcat 8.5.1 (markt)|Add||When multiple compressed formats are available and the client does not express a preference, use the server order to determine the preferred format. Based on a patch by gmokki. (markt)|
Catalina|not released Tomcat 8.5.1 (markt)|Fix|59284|Allow the Tomcat provided JASPIC SimpleServerAuthConfig to pick up module configuration properties from either the property set passed to its constructor or from the properties passed in the call to getAuthContext. Based on a patch by Thomas Maslen. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=59284
Catalina|not released Tomcat 8.5.1 (markt)|Fix|59310|Do not add a Content-Length: 0 header for custom responses to HEAD requests that do not set a Content-Length value. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=59310
Catalina|not released Tomcat 8.5.1 (markt)|Fix||When normalizing paths, improve the handling when paths end with /. or /.. and ensure that input and output are consistent with respect to whether or not they end with /. (markt)|
Catalina|not released Tomcat 8.5.1 (markt)|Fix|59317|Ensure that HttpServletRequest.getRequestURI() returns an encoded URI rather than a decoded URI after a dispatch. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=59317
Catalina|not released Tomcat 8.5.1 (markt)|Fix||Use the correct URL for the fragment when reporting errors processing a web-fragment.xml file from a JAR located in an unpacked WAR. (markt)|
Catalina|not released Tomcat 8.5.1 (markt)|Fix||Ensure that JarScanner only uses the explicit call-back to process WEB-INF/classes and only when configured to treat the contents of WEB-INF/classes as a possible exploded JAR. (markt)|
Catalina|not released Tomcat 8.5.1 (markt)|Code||Remove the java2DDisposerProtection option from the JreMemoryLeakPreventionListener. The leak is fixed in Java 7 onwards and Tomcat 8 requires Java 7 so the option is unnecessary. (markt)|
Catalina|not released Tomcat 8.5.1 (markt)|Fix||Ensure that the value for the header X-Frame-Options is constructed correctly according to the specification when ALLOW-FROM option is used. (violetagg)|
Catalina|not released Tomcat 8.5.1 (markt)|Fix||Fix an IllegalArgumentException if the first use of an internal Response object requires JASPIC authentication. (markt)|
Catalina|not released Tomcat 8.5.1 (markt)|Fix||Do not trigger unnecessary session ID changes when using JASPIC and the user is authenticated using cached credentials. (markt)|
Catalina|not released Tomcat 8.5.1 (markt)|Fix|59437|Ensure that the JASPIC CallbackHandler is thread-safe. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=59437
Catalina|not released Tomcat 8.5.1 (markt)|Fix|59449|In ContainerBase, ensure that the process to remove a child container is the reverse of the process to add one. Patch provided by Huxing Zhang. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=59449
Coyote|not released Tomcat 8.5.1 (markt)|Fix||Align cipher configuration parsing with current OpenSSL master. (markt)|
Coyote|not released Tomcat 8.5.1 (markt)|Update||Change the default for honorCipherOrder to false. With the current default TLS configuration, it is no longer necessary for this to be true for a reasonably secure configuration. (markt)|
Coyote|not released Tomcat 8.5.1 (markt)|Add||Add a new environment variable JSSE_OPTS that is intended to be used to pass JVM wide configuration to the JSSE implementation. The default value is -Djdk.tls.ephemeralDHKeySize=2048 which protects against weak Diffie-Hellman keys. (markt)|
Coyote|not released Tomcat 8.5.1 (markt)|Fix||When running on Java 7, exclude DHE ciphers from the default cipher list for JSSE connectors since they use weak 768 bit DH keys and cannot be configured to use more secure keys. (markt)|
Coyote|not released Tomcat 8.5.1 (markt)|Fix|58970|Fix a connection counting bug in the NIO connector that meant some dropped connections were not removed from the current connection count. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=58970
Coyote|not released Tomcat 8.5.1 (markt)|Fix|59289|Do not recycle upgrade processors in unexpected close situations. (remm)|https://bz.apache.org/bugzilla/show_bug.cgi?id=59289
Coyote|not released Tomcat 8.5.1 (markt)|Fix|59295|Use Locale.toLanguageTag() to construct the Content-Language HTTP header to ensure the locale is correctly represented. Patch provided by zikfat. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=59295
Coyote|not released Tomcat 8.5.1 (markt)|Update|59295|Add support for using pem encoded certificates with JSSE SSL. Submitted by Emmanuel Bourg with additional tweaks. (remm)|https://bz.apache.org/bugzilla/show_bug.cgi?id=59295
Coyote|not released Tomcat 8.5.1 (markt)|Fix||Make the TLS certificate chain available to clients when using JSSE+OpenSSL with the certificate chain stored in a Java KeyStore. (markt)|
Coyote|not released Tomcat 8.5.1 (markt)|Fix||Work around a known issue in OpenSSL that does not permit the TLS handshake to be failed if the ALPN negotiation fails. (markt)|https://github.com/openssl/openssl/issues/188
Coyote|not released Tomcat 8.5.1 (markt)|Update|59421|Add direct HTTP/2 connection support. (remm)|https://bz.apache.org/bugzilla/show_bug.cgi?id=59421
Coyote|not released Tomcat 8.5.1 (markt)|Fix||Correctly handle a call to AsyncContext.complete() from a non-container thread when non-blocking I/O is being used. (markt)|
Coyote|not released Tomcat 8.5.1 (markt)|Fix|59451|Correct Javadoc for MessageBytes. Patch provided by Kyohei Nakamura. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=59451
Coyote|not released Tomcat 8.5.1 (markt)|Fix|59450|Correctly handle the case where the LegacyCookieProcessor is configured with allowHttpSepsInV0 set to false and forwardSlashIsSeparator set to true. Patch provided by Kyohei Nakamura. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=59450
Jasper|not released Tomcat 8.5.1 (markt)|Fix||When scanning JARs for TLDs, correctly handle the (rare) case where a JAR has been exploded into WEB-INF/classes and the web application is deployed as a packed WAR. (markt)|
Jasper|not released Tomcat 8.5.1 (markt)|Fix|59640|NPEs with not found TLDs. (remm)|https://bz.apache.org/bugzilla/show_bug.cgi?id=59640
WebSocket|not released Tomcat 8.5.1 (markt)|Fix|59189|Explicitly release the native memory held by the Inflater and Deflater when using PerMessageDeflate and the WebSocket session ends. Based on a patch by Henrik Olsson. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=59189
WebSocket|not released Tomcat 8.5.1 (markt)|Fix||Return back a container specific extension to the WsServerContainer to allow frameworks to more easily dispatch requests to WebSocket endpoints. (violetagg)|
WebSocket|not released Tomcat 8.5.1 (markt)|Fix||Fix a regression caused by the connector refactoring and ensure that the thread context class loader is set to the web application classloader when processing WebSocket messages on the server. (markt)|
WebSocket|not released Tomcat 8.5.1 (markt)|Fix||Ensure that a client disconnection triggers the error handling for the associated WebSocket end point. (markt)|
WebSocket|not released Tomcat 8.5.1 (markt)|Add||Make WebSocket client more robust when handling errors during the close of a WebSocket session. (markt)|
Web applications|not released Tomcat 8.5.1 (markt)|Fix|59210|Server push example has to use o.a.catalina.connector.RequestFacade when obtaining o.a.catalina.core.ApplicationPushBuilder. Patch is provided by Huxing Zhang. (violetagg)|https://bz.apache.org/bugzilla/show_bug.cgi?id=59210
Web applications|not released Tomcat 8.5.1 (markt)|Fix|59218|Correct the path to jaspic-providers.xml in Jaspic How-To. Patch is provided by Tatsuya Bessho. (violetagg)|https://bz.apache.org/bugzilla/show_bug.cgi?id=59218
Web applications|not released Tomcat 8.5.1 (markt)|Fix||Remove button that has accidentally been added to the host manager. Submitted by Coty Sutherland. (remm)|
Web applications|not released Tomcat 8.5.1 (markt)|Fix||Update in the documentation the link to the maven repository where Tomcat snapshot artifacts are deployed. (markt/violetagg)|
Web applications|not released Tomcat 8.5.1 (markt)|Fix||Clarify in the documentation that calls to ServletContext.log(String, Throwable) or GenericServlet.log(String, Throwable) are logged at the SEVERE level. (violetagg)|
Web applications|not released Tomcat 8.5.1 (markt)|Fix||Correct a typo in SSL/TLS Configuration How-To. Issue reported via comments.apache.org. (violetagg)|
Tribes|not released Tomcat 8.5.1 (markt)|Fix||Avoid NPE when a proxy node failed to retrieve a backup entry. (kfujino)|
Tribes|not released Tomcat 8.5.1 (markt)|Add||Add log of when received an unexpected messages. (kfujino)|
Tribes|not released Tomcat 8.5.1 (markt)|Add||Add the flag indicating that member is a localMember. (kfujino)|
Tribes|not released Tomcat 8.5.1 (markt)|Fix||Fix potential NPE that depends on the setting order of attributes of static member when using the static cluster. (kfujino)|
Tribes|not released Tomcat 8.5.1 (markt)|Add||Add get/set method for the channel that is related to ChannelInterceptor. (kfujino)|
Tribes|not released Tomcat 8.5.1 (markt)|Fix||As with the multicast cluster environment, in the static cluster environment, the local member inherits properties from the cluster receiver. (kfujino)|
Tribes|not released Tomcat 8.5.1 (markt)|Add||Add get/set method for the channel that is related to each Channel services. (kfujino)|
Tribes|not released Tomcat 8.5.1 (markt)|Add||"Add name to channel in order to identify channels. In tomcat cluster environment, it is set the cluster name + ""-Channel"" as default value. (kfujino)"|
Tribes|not released Tomcat 8.5.1 (markt)|Add||Add the channel name to the thread which is invoked by channel services in order to identify the associated channel. (kfujino)|
Tribes|not released Tomcat 8.5.1 (markt)|Fix||Ensure that clear the channel instance from channel services when stopping channel. (kfujino)|
Tribes|not released Tomcat 8.5.1 (markt)|Add||Implement map state in the replication map. (kfujino)|
Tribes|not released Tomcat 8.5.1 (markt)|Fix||Ensure that the ping is not executed during the start/stop of the replication map. (kfujino)|
Tribes|not released Tomcat 8.5.1 (markt)|Fix||In ping processing in the replication map, send not the INIT message but the newly introduced PING message. (kfujino)|
Other|not released Tomcat 8.5.1 (markt)|Fix|59209|Remove honorCipherOrder=false attribute from the connector example in server.xml. When the block is uncommented the connector will use the default value for this attribute which is false. If one needs to enable it, one can add it explicitly to the connector definition. Use of this feature requires Java 8 or later. Patch is provided by Huxing Zhang. (violetagg)|https://bz.apache.org/bugzilla/show_bug.cgi?id=59209
Other|not released Tomcat 8.5.1 (markt)|Fix|59211|Add hamcrest to Eclipse classpath. Patch is provided by Huxing Zhang. (violetagg)|https://bz.apache.org/bugzilla/show_bug.cgi?id=59211
Other|not released Tomcat 8.5.1 (markt)|Update|59280|Update the NSIS Installer used to build the Windows Installers to version 2.51. (kkolinko)|https://bz.apache.org/bugzilla/show_bug.cgi?id=59280
Other|not released Tomcat 8.5.1 (markt)|Update||Update the packaged version of the Tomcat Native Library to 1.2.7 to pick up the Windows binaries that are based on OpenSSL 1.0.2h and APR 1.5.2. (markt)|
General|2016-03-24 Tomcat 8.5.0 (markt)|Update||Remove support for Comet. (markt)|
General|2016-03-24 Tomcat 8.5.0 (markt)|Update||Tighten up the default file permissions for the .tar.gz distribution so no files or directories are world readable by default. Configure Tomcat to run with a default umask of 0027 which may be overridden by setting UMASK in setenv.sh. (markt)|
General|2016-03-24 Tomcat 8.5.0 (markt)|Update||Remove native code (Windows Service Wrapper, APR/native connector) support for Windows Itanium. (markt)|
Catalina|2016-03-24 Tomcat 8.5.0 (markt)|Update||The default HTTP cookie parser has been changed to org.apache.tomcat.util.http.Rfc6265CookieProcessor. (markt)|
Catalina|2016-03-24 Tomcat 8.5.0 (markt)|Code||Refactor creation of MapperListener to ensure that the Mapper used is the Mapper associated with the Service for which the listener was created. (markt)|
Catalina|2016-03-24 Tomcat 8.5.0 (markt)|Add||Move the functionality that provides redirects for context roots and directories where a trailing / is added from the Mapper to the DefaultServlet. This enables such requests to be processed by any configured Valves and Filters before the redirect is made. This behaviour is configurable via the mapperContextRootRedirectEnabled and mapperDirectoryRedirectEnabled attributes of the Context which may be used to restore the previous behaviour. (markt)|
Catalina|2016-03-24 Tomcat 8.5.0 (markt)|Code||Refactor Service.getContainer() to return an Engine rather than a Container. (markt)|
Catalina|2016-03-24 Tomcat 8.5.0 (markt)|Fix|34319|Only load those keys in StoreBase.processExpire from JDBCStore that are old enough to be expired. Based on a patch by Tom Anderson. (fschumacher)|https://bz.apache.org/bugzilla/show_bug.cgi?id=34319
Catalina|2016-03-24 Tomcat 8.5.0 (markt)|Add|58351|Make the server build date and server version number accessible via JMX. Patch provided by Huxing Zhang. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=58351
Catalina|2016-03-24 Tomcat 8.5.0 (markt)|Add|56917|As per RFC7231 (HTTP/1.1), allow HTTP/1.1 and later redirects to use relative URIs. This is controlled by a new attribute useRelativeRedirects on the Context and defaults to true. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=56917
Catalina|2016-03-24 Tomcat 8.5.0 (markt)|Fix|58629|Allow an embedded Tomcat instance to start when the Service has no Engine configured. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=58629
Catalina|2016-03-24 Tomcat 8.5.0 (markt)|Fix||Correctly notify the MapperListener associated with a Service if the Engine for that Service is changed. (markt)|
Catalina|2016-03-24 Tomcat 8.5.0 (markt)|Add||Make a web application's CredentialHandler available through a context attribute. This allows a web application to use the same algorithm for validating or generating new stored credentials from cleartext ones. (schultz)|
Catalina|2016-03-24 Tomcat 8.5.0 (markt)|Fix|58635|Enable break points to be set within agent code when running Tomcat with a Java agent. Based on a patch by Huxing Zhang. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=58635
Catalina|2016-03-24 Tomcat 8.5.0 (markt)|Fix||Fixed potential NPE in HostConfig while deploying an application. Issue reported by coverity scan. (violetagg)|
Catalina|2016-03-24 Tomcat 8.5.0 (markt)|Fix|58655|Fix an IllegalStateException when calling HttpServletResponse.sendRedirect() with the RemoteIpFilter. This was caused by trying to correctly generate the absolute URI for the redirect. With the fix for 56917, redirects may now be relative making the sendRedirect() implementation for the RemoteIpFilter much simpler. This also addresses issues where the redirect may not have behaved as expected when redirecting from http to https to from https to http. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=58655
Catalina|2016-03-24 Tomcat 8.5.0 (markt)|Fix|58657|Exceptions in a Servlet 3.1 ReadListener or WriteListener do not need to be immediately fatal to the connection. Allow an error response to be written. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=58657
Catalina|2016-03-24 Tomcat 8.5.0 (markt)|Fix||Correct implementation of validateClientProvidedNewSessionId so client provided session IDs may be rejected if validation is enabled. (markt)|
Catalina|2016-03-24 Tomcat 8.5.0 (markt)|Fix|58701|Reset the instanceInitialized field in StandardWrapper when unloading a Servlet so that a new instance may be correctly initialized. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=58701
Catalina|2016-03-24 Tomcat 8.5.0 (markt)|Update||Add a new flag aprPreferred to the Apr listener. if set to false, when using the connector defaults, it will use NIO + OpenSSL if tomcat-native is available, rather than the APR connector. (remm)|
Catalina|2016-03-24 Tomcat 8.5.0 (markt)|Fix||Add path parameter handling to HttpServletRequest.getContextPath(). This is a follow-up to the fix for 57215. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=57215
Catalina|2016-03-24 Tomcat 8.5.0 (markt)|Fix|58692|Make StandardJarScanner more robust. Log a warning if a class path entry cannot be scanned rather than triggering the failure of the web application. Includes a test case written by Derek Abdine. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=58692
Catalina|2016-03-24 Tomcat 8.5.0 (markt)|Fix|58702|Ensure an access log entry is generated if the client aborts the connection. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=58702
Catalina|2016-03-24 Tomcat 8.5.0 (markt)|Fix||Fixed various issues reported by Findbugs. (violetagg)|
Catalina|2016-03-24 Tomcat 8.5.0 (markt)|Fix|58735|Add support for the X-XSS-Protection header to the HttpHeaderSecurityFilter. Patch provided by Jacopo Cappellato. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=58735
Catalina|2016-03-24 Tomcat 8.5.0 (markt)|Fix||Add the StatusManagerServlet to the list of Servlets that can only be loaded by privileged applications. (markt)|
Catalina|2016-03-24 Tomcat 8.5.0 (markt)|Fix||Simplify code and fix messages in org.apache.catalina.core.DefaultInstanceManager class. (kkolinko)|
Catalina|2016-03-24 Tomcat 8.5.0 (markt)|Fix|58751|Correctly handle the case where an AsyncListener dispatches to a Servlet on an asynchronous timeout and the Servlet uses sendError() to trigger an error page. Includes a test case based on code provided by Andy Wilkinson.(markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=58751
Catalina|2016-03-24 Tomcat 8.5.0 (markt)|Fix||Ensure that the proper file encoding, if specified, will be used when a readme file is served by DefaultServlet. (violetagg)|
Catalina|2016-03-24 Tomcat 8.5.0 (markt)|Fix||Fix declaration of localPort attribute of Connector MBean: it is read-only. (kkolinko)|
Catalina|2016-03-24 Tomcat 8.5.0 (markt)|Fix|58766|Make skipping non-class files during annotation scanning faster by checking the file name first. Improve debug logging. (kkolinko)|https://bz.apache.org/bugzilla/show_bug.cgi?id=58766
Catalina|2016-03-24 Tomcat 8.5.0 (markt)|Fix|58768|Log a warning if a redirect fails because of an invalid location. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=58768
Catalina|2016-03-24 Tomcat 8.5.0 (markt)|Code|58827|Remove remains of JSR-77 implementation. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=58827
Catalina|2016-03-24 Tomcat 8.5.0 (markt)|Fix|58836|Correctly merge query string parameters when processing a forwarded request where the target includes a query string that contains a parameter with no value. (markt/kkolinko)|https://bz.apache.org/bugzilla/show_bug.cgi?id=58836
Catalina|2016-03-24 Tomcat 8.5.0 (markt)|Fix||Make sure that shared Digester is reset in an unlikely error case in HostConfig.deployWAR(). (kkolinko)|
Catalina|2016-03-24 Tomcat 8.5.0 (markt)|Add||Extend the feature available in the cluster session manager implementations that enables session attribute replication to be filtered based on attribute name to all session manager implementations. Note that configuration attribute name has changed from sessionAttributeFilter to sessionAttributeNameFilter. Apply the filter on load as well as unload to ensure that configuration changes made while the web application is stopped are applied to any persisted data. (markt)|
Catalina|2016-03-24 Tomcat 8.5.0 (markt)|Add||Extend the session attribute filtering options to include filtering based on the implementation class of the value and optional WARN level logging if an attribute is filtered. These options are available for all of the Manager implementations that ship with Tomcat. When a SecurityManager is used filtering will be enabled by default. (markt)|
Catalina|2016-03-24 Tomcat 8.5.0 (markt)|Code||Remove distributable and maxInactiveInterval from the Manager interface because the attributes are never used. The equivalent attributes from the Context always take precedence. (markt)|
Catalina|2016-03-24 Tomcat 8.5.0 (markt)|Fix|58867|Improve checking on Host start for WAR files that have been modified while Tomcat has stopped and re-expand them if unpackWARs is true. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=58867
Catalina|2016-03-24 Tomcat 8.5.0 (markt)|Fix|58900|Correctly undeploy symlinked resources and prevent an infinite cycle of deploy / undeploy. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=58900
Catalina|2016-03-24 Tomcat 8.5.0 (markt)|Fix||Protect initialization of ResourceLinkFactory when running with a SecurityManager. (kkolinko)|
Catalina|2016-03-24 Tomcat 8.5.0 (markt)|Fix||Correct a thread safety issue in the filtering of session attributes based on the implementing class name of the value object. (markt)|
Catalina|2016-03-24 Tomcat 8.5.0 (markt)|Fix||Fix class loader decision on the delegation for class loading and resource lookup and make it faster too. (rjung)|
Catalina|2016-03-24 Tomcat 8.5.0 (markt)|Fix|58905|Ensure that Tomcat.silence() silences the correct logger and respects the current setting. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=58905
Catalina|2016-03-24 Tomcat 8.5.0 (markt)|Fix|58946|Ensure that the request parameter map remains immutable when processing via a RequestDispatcher. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=58946
Catalina|2016-03-24 Tomcat 8.5.0 (markt)|Fix||Ensure that /WEB-INF/classes is never processed as a web fragment. (markt)|
Catalina|2016-03-24 Tomcat 8.5.0 (markt)|Update||Switch default connector when native is installed. Unless configured otherwise, the NIO endpoint will be used by default. If SSL is configured, OpenSSL will be used rather than JSSE. (remm)|
Catalina|2016-03-24 Tomcat 8.5.0 (markt)|Fix||Correct a regression in the fix for 58867. When configuring a Context to use an external directory for the docBase, and that directory happens to be located along side the original WAR, use the directory as the docBase rather than expanding the WAR into the appBase and using the newly created expanded directory as the docBase. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=58867
Catalina|2016-03-24 Tomcat 8.5.0 (markt)|Add|58988|Special characters in the substitutions for the RewriteValve can now be quoted with a backslash. (fschumacher)|https://bz.apache.org/bugzilla/show_bug.cgi?id=58988
Catalina|2016-03-24 Tomcat 8.5.0 (markt)|Fix|58999|"Fix class and resource name filtering in WebappClassLoader. It throws a StringIndexOutOfBoundsException if the name is exactly ""org"" or ""javax"". (rjung)"|https://bz.apache.org/bugzilla/show_bug.cgi?id=58999
Catalina|2016-03-24 Tomcat 8.5.0 (markt)|Add||Add JASPIC (JSR-196) support. (markt)|
Catalina|2016-03-24 Tomcat 8.5.0 (markt)|Add||Make checking for var and map replacement in RewriteValve a bit stricter and correct detection of colon in var replacement. (fschumacher)|
Catalina|2016-03-24 Tomcat 8.5.0 (markt)|Fix||Refactor the web application class loader to reduce the impact of JAR scanning on the memory footprint of the web application. (markt)|
Catalina|2016-03-24 Tomcat 8.5.0 (markt)|Fix||Fix some resource leaks in the error handling for accessing files from JARs and WARs. (markt)|
Catalina|2016-03-24 Tomcat 8.5.0 (markt)|Fix||Refactor the JAR and JAR-in-WAR resource handling to reduce the memory footprint of the web application. (markt)|
Catalina|2016-03-24 Tomcat 8.5.0 (markt)|Fix||Refactor the web.xml parsing so a new parser is created every time the web application starts rather than creating and caching the parser when the Context is created. This enables the parser to take account of modified Context configuration parameters and reduces (slightly) the memory footprint of a running Tomcat instance. (markt)|
Catalina|2016-03-24 Tomcat 8.5.0 (markt)|Update||Switch the web application class loader to the ParallelWebappClassLoader by default. (markt)|
Catalina|2016-03-24 Tomcat 8.5.0 (markt)|Fix|57809|Remove the custom context attribute that held the effective web.xml. Components needing access to configuration information may access it via the Servlet API. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=57809
Catalina|2016-03-24 Tomcat 8.5.0 (markt)|Fix||Refactor JAR scanning to reduce memory footprint. (markt)|
Catalina|2016-03-24 Tomcat 8.5.0 (markt)|Fix|59001|Correctly handle the case when Tomcat is installed on a path where one of the segments ends in an exclamation mark. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=59001
Catalina|2016-03-24 Tomcat 8.5.0 (markt)|Fix||Expand the fix for 59001 to cover the special sequences used in Tomcat's custom jar:war: URLs. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=59001
Catalina|2016-03-24 Tomcat 8.5.0 (markt)|Fix|59043|Avoid warning while expiring sessions associated with a single sign on if HttpServletRequest.logout() is used. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=59043
Catalina|2016-03-24 Tomcat 8.5.0 (markt)|Fix|59054|Ensure that using the CrawlerSessionManagerValve in a distributed environment does not trigger an error when the Valve registers itself in the session. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=59054
Catalina|2016-03-24 Tomcat 8.5.0 (markt)|Fix||Add socket properties support to storeconfig. (remm)|
Catalina|2016-03-24 Tomcat 8.5.0 (markt)|Fix||Fix incorrect parsing of the NE and NC flags in rewrite rules. (remm)|
Catalina|2016-03-24 Tomcat 8.5.0 (markt)|Fix|59065|Correct the timing of the check for colons in paths on non-Windows systems implemented in catalina.sh so it works correctly with Cygwin. Patch provided by Ed Randall. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=59065
Catalina|2016-03-24 Tomcat 8.5.0 (markt)|Fix||When a Host is configured with an appBase that does not exist, create the appBase before trying to expand an external WAR file into it. (markt)|
Catalina|2016-03-24 Tomcat 8.5.0 (markt)|Fix|59115|When using the Servlet 3.0 file upload, the submitted file name may be provided as a token or a quoted-string. If a quoted-string, unquote the string before returning it to the user. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=59115
Catalina|2016-03-24 Tomcat 8.5.0 (markt)|Fix|59123|Close NamingEnumeration objects used by the JNDIRealm once they are no longer required. (fschumacher/markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=59123
Catalina|2016-03-24 Tomcat 8.5.0 (markt)|Add||Implement the proposed Servlet 4.0 API to provide mapping type information for the current request. (markt)|
Catalina|2016-03-24 Tomcat 8.5.0 (markt)|Fix|59138|Correct a false positive warning for ThreadLocal related memory leaks when the key class but not the value class has been loaded by the web application class loader. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=59138
Catalina|2016-03-24 Tomcat 8.5.0 (markt)|Add|59017|Make the pre-compressed file support in the Default Servlet generic so any compression may be used rather than just gzip. Patch provided by Mikko Tiihonen. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=59017
Catalina|2016-03-24 Tomcat 8.5.0 (markt)|Fix|59145|Don't log an invalid warning when a user logs out of a session associated with SSO. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=59145
Catalina|2016-03-24 Tomcat 8.5.0 (markt)|Fix|59150|Add an additional flag on APR listener to allow disabling automatic use of OpenSSL. (remm)|https://bz.apache.org/bugzilla/show_bug.cgi?id=59150
Catalina|2016-03-24 Tomcat 8.5.0 (markt)|Fix|59151|Fix a regression in the fix for 56917 that added additional (and arguably unnecessary) validation to the provided redirect location. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=59151
Catalina|2016-03-24 Tomcat 8.5.0 (markt)|Fix|59154|Fix a NullPointerException in the JAASMemoryLoginModule resulting from the introduction of the CredentialHandler to Realms. (schultz/markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=59154
Coyote|2016-03-24 Tomcat 8.5.0 (markt)|Update||Remove support for the HTTP BIO and AJP BIO connectors. (markt)|
Coyote|2016-03-24 Tomcat 8.5.0 (markt)|Code||Refactor HTTP upgrade and AJP implementations to reduce duplication. (markt)|
Coyote|2016-03-24 Tomcat 8.5.0 (markt)|Add||Add support for HPACK header encoding and decoding, contributed by Stuart Douglas. (remm)|
Coyote|2016-03-24 Tomcat 8.5.0 (markt)|Add|57108|Add support for Server Name Indication (SNI). There has been significant changes to the SSL configuration in server.xml to support this. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=57108
Coyote|2016-03-24 Tomcat 8.5.0 (markt)|Add||Add SSL engine for JSSE backed by OpenSSL. Includes ALPN support. Based on code contributed by Numa de Montmollin and derived from code developed by Twitter and Netty. (remm)|
Coyote|2016-03-24 Tomcat 8.5.0 (markt)|Fix||RFC 7230 states that clients should ignore reason phrases in HTTP/1.1 response messages. Since the reason phrase is optional, Tomcat no longer sends it. As a result the system property org.apache.coyote.USE_CUSTOM_STATUS_MSG_IN_HEADER is no longer used and has been removed. (markt)|
Coyote|2016-03-24 Tomcat 8.5.0 (markt)|Update||The minimum required Tomcat Native version has been increased to 1.2.2. The 1.2.x branch includes ALPN and SNI support which are required for HTTP/2. (markt)|
Coyote|2016-03-24 Tomcat 8.5.0 (markt)|Add||Add support for HTTP/2 including server push. (markt)|
Coyote|2016-03-24 Tomcat 8.5.0 (markt)|Fix|58621|The certificate chain cannot be set using the main certificate attribute, so restore the certificate chain property. (remm)|https://bz.apache.org/bugzilla/show_bug.cgi?id=58621
Coyote|2016-03-24 Tomcat 8.5.0 (markt)|Fix||Allow a new SSL config type where a connector can use either JSSE or OpenSSL. Both could be allowed, but it would likely create support issues. This type is used by the OpenSSL implementation for NIOx. (remm)|
Coyote|2016-03-24 Tomcat 8.5.0 (markt)|Fix||Improve upgrade context classloader handling by using Context.bind and unbind. (remm)|
Coyote|2016-03-24 Tomcat 8.5.0 (markt)|Add||Improve OpenSSL keystore/truststore configuration by using the code from the JSSE implementation. (remm, jfclere)|
Coyote|2016-03-24 Tomcat 8.5.0 (markt)|Fix||Fix a potential loop when a client drops the connection unexpectedly. (markt)|
Coyote|2016-03-24 Tomcat 8.5.0 (markt)|Add||OpenSSL renegotiation support for client certificate authentication. (remm)|
Coyote|2016-03-24 Tomcat 8.5.0 (markt)|Fix||Fix NIO connector renegotiation. (remm)|
Coyote|2016-03-24 Tomcat 8.5.0 (markt)|Fix|58659|Fix a potential deadlock during HTTP/2 processing when the connection window size is limited. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=58659
Coyote|2016-03-24 Tomcat 8.5.0 (markt)|Fix||Correct an NPE when listing the enabled ciphers (e.g. via the Manager web application) for a TLS enabled APR/native connector. (markt)|
Coyote|2016-03-24 Tomcat 8.5.0 (markt)|Add||New configuration option ajpFlush for the AJP connectors to disable the sending of AJP flush packets. (rjung)|
Coyote|2016-03-24 Tomcat 8.5.0 (markt)|Fix||Handle the case in the NIO connector where the required TLS buffer sizes increase after the connection has been initiated. (markt)|
Coyote|2016-03-24 Tomcat 8.5.0 (markt)|Fix||Handle the case in the NIO2 connector where the required TLS buffer sizes increase after the connection has been initiated. (markt/remm)|
Coyote|2016-03-24 Tomcat 8.5.0 (markt)|Fix||Bad processing of handshake errors in NIO2. (remm)|
Coyote|2016-03-24 Tomcat 8.5.0 (markt)|Fix||Use JSSE session configuration options with OpenSSL. (remm)|
Coyote|2016-03-24 Tomcat 8.5.0 (markt)|Fix|59015|Fix potential cause of endless APR Poller loop during shutdown if the Poller experiences an error during the shutdown process. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=59015
Coyote|2016-03-24 Tomcat 8.5.0 (markt)|Fix||Align cipher aliases for kECDHE and ECDHE with the current OpenSSL implementation. (markt)|
Coyote|2016-03-24 Tomcat 8.5.0 (markt)|Fix|59081|Retain the user defined cipher order when defining ciphers. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=59081
Coyote|2016-03-24 Tomcat 8.5.0 (markt)|Fix|59089|Correctly ignore HTTP headers that include non-token characters in the header name. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=59089
Jasper|2016-03-24 Tomcat 8.5.0 (markt)|Fix||57136#c25: Change default value of quoteAttributeEL setting in Jasper to be true for better compatibility with other implementations and older versions of Tomcat. Add command line option -no-quoteAttributeEL in JspC. (kkolinko)|https://bz.apache.org/bugzilla/show_bug.cgi?id=57136#c25
Jasper|2016-03-24 Tomcat 8.5.0 (markt)|Fix||Fix handling of missing messages in org.apache.el.util.MessageFactory. (violetagg)|
Jasper|2016-03-24 Tomcat 8.5.0 (markt)|Update||Update to the Eclipse JDT Compiler 4.5.1. (markt)|
Jasper|2016-03-24 Tomcat 8.5.0 (markt)|Fix|57583|Improve the performance of javax.servlet.jsp.el.ScopedAttributeELResolver when resolving attributes that do not exist. This improvement only works when Jasper is used with Tomcat's EL implementation. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=57583
Cluster|2016-03-24 Tomcat 8.5.0 (markt)|Fix||Enable an explicit configuration of local member in the static cluster membership. (kfujino)|
Cluster|2016-03-24 Tomcat 8.5.0 (markt)|Fix||Fix potential integer overflow in DeltaSession. Reported by coverity scan. (fschumacher)|
Cluster|2016-03-24 Tomcat 8.5.0 (markt)|Fix||In order to avoid that the heartbeat thread and the background thread to run Channel.heartbeat simultaneously, if heartbeatBackgroundEnabled of SimpleTcpCluster set to true, ensure that the heartbeat thread does not start. (kfujino)|
WebSocket|2016-03-24 Tomcat 8.5.0 (markt)|Add|55006|The WebSocket client now honors the java.net.java.net.ProxySelector configuration (using the HTTP type) when establishing WebSocket connections to servers. Based on a patch by Niki Dokovski. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=55006
WebSocket|2016-03-24 Tomcat 8.5.0 (markt)|Fix|57489|Ensure onClose() is called when a WebSocket connection is closed even if the sending of the close message fails. Includes test cases by Barry Coughlan. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=57489
WebSocket|2016-03-24 Tomcat 8.5.0 (markt)|Fix|58624|Correct a potential deadlock if the WebSocket connection is closed when a message write is in progress. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=58624
WebSocket|2016-03-24 Tomcat 8.5.0 (markt)|Fix||Fix a timing issue on session close that could result in an exception being thrown for an incomplete message even through the message was completed. (markt)|
WebSocket|2016-03-24 Tomcat 8.5.0 (markt)|Fix||Correctly handle compression of partial messages when the final message fragment has a zero length payload. (markt)|
WebSocket|2016-03-24 Tomcat 8.5.0 (markt)|Fix|59119|Correct read logic for WebSocket client when using secure connections. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=59119
WebSocket|2016-03-24 Tomcat 8.5.0 (markt)|Fix|59134|Correct client connect logic for secure connections made through a proxy. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=59134
Web applications|2016-03-24 Tomcat 8.5.0 (markt)|Fix|48674|Implement an option within the Host Manager web application to persist the current configuration. Based on a patch by Coty Sutherland. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=48674
Web applications|2016-03-24 Tomcat 8.5.0 (markt)|Fix|58631|Correct the continuation character use in the Windows Service How-To page of the documentation web application. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=58631
Web applications|2016-03-24 Tomcat 8.5.0 (markt)|Fix||Correct the SSL documentation for deprecated attributes to point to the correct, new location for attributes related to individual certificates. (markt)|
Web applications|2016-03-24 Tomcat 8.5.0 (markt)|Fix||Correct some typos in the JNDI resources How-To. (markt)|
Web applications|2016-03-24 Tomcat 8.5.0 (markt)|Fix||Don't create session unnecessarily in the Manager application. (markt)|
Web applications|2016-03-24 Tomcat 8.5.0 (markt)|Fix||Don't create session unnecessarily in the Host Manager application. (markt)|
Web applications|2016-03-24 Tomcat 8.5.0 (markt)|Fix|58723|Clarify documentation and error messages for the text interface of the manager to make clear that version must be used with path when referencing contexts deployed using parallel deployment. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=58723
Web applications|2016-03-24 Tomcat 8.5.0 (markt)|Add||Document test.threads option in BUILDING.txt. (kkolinko)|
Web applications|2016-03-24 Tomcat 8.5.0 (markt)|Fix||Correct an error in the documentation of the expected behaviour for automatic deployment. If a WAR is updated and an expanded directory is present, the directory will always be deleted and recreated by expanding the WAR if unpackWARs is true. (markt)|
Web applications|2016-03-24 Tomcat 8.5.0 (markt)|Fix|58935|Remove incorrect references in the documentation to using jar:file: URLs with the Manager application. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=58935
Web applications|2016-03-24 Tomcat 8.5.0 (markt)|Fix||Correct the description of the ServletRequest.getServerPort() in Proxy How-To. Issue reported via comments.apache.org. (violetagg)|
Web applications|2016-03-24 Tomcat 8.5.0 (markt)|Add||The Manager and Host Manager applications are now only accessible via localhost by default. (markt)|
Tribes|2016-03-24 Tomcat 8.5.0 (markt)|Fix||Clarify the handling of Copy message and Copy nodes. (kfujino)|
Tribes|2016-03-24 Tomcat 8.5.0 (markt)|Fix||Ensure that the static member is registered to the add suspect list even if the static member that is registered to the remove suspect list has disappeared. (kfujino)|
Tribes|2016-03-24 Tomcat 8.5.0 (markt)|Fix||When using a static cluster, add the members that have been cached in the membership service to the map members list in order to ensure that the map member is a static member. (kfujino)|
Tribes|2016-03-24 Tomcat 8.5.0 (markt)|Fix||Add support for the startup notification of local members in the static cluster. (kfujino)|
Tribes|2016-03-24 Tomcat 8.5.0 (markt)|Fix||Ignore the unnecessary member remove operation from different domain. (kfujino)|
Tribes|2016-03-24 Tomcat 8.5.0 (markt)|Fix||Add support for the shutdown notification of local members in the static cluster. (kfujino)|
Tribes|2016-03-24 Tomcat 8.5.0 (markt)|Fix||If promoting a proxy node to a primary node when getting a session, notify the change of the new primary node to the original backup node. (kfujino)|
jdbc-pool|2016-03-24 Tomcat 8.5.0 (markt)|Fix||Correct evaluation of system property org.apache.tomcat.jdbc.pool.onlyAttemptCurrentClassLoader. It was basically ignored before. Reported by coverity scan. (fschumacher)|
jdbc-pool|2016-03-24 Tomcat 8.5.0 (markt)|Fix||Fix potential integer overflow in ConnectionPool and PooledConnection. Reported by coverity scan. (fschumacher)|
Other|2016-03-24 Tomcat 8.5.0 (markt)|Add||Allow to configure multiple JUnit test class patterns with the build property test.name and document the property in BUILDING.txt. (rjung)|
Other|2016-03-24 Tomcat 8.5.0 (markt)|Add||Support the use of the threads attribute on Ant's junit task. Note that using this with a value of greater than one will disable Cobertura code coverage. (markt)|
Other|2016-03-24 Tomcat 8.5.0 (markt)|Update||Update optional Checkstyle library to 6.14.1. (kkolinko)|
Other|2016-03-24 Tomcat 8.5.0 (markt)|Update||Update the packaged version of the Tomcat Native Library to 1.2.4 to pick up the Windows binaries that are based on OpenSSL 1.0.2e and APR 1.5.1. (markt)|
Other|2016-03-24 Tomcat 8.5.0 (markt)|Update||Update the NSIS Installer used to build the Windows Installers to version 2.50. (markt/kkolinko)|
Other|2016-03-24 Tomcat 8.5.0 (markt)|Update||Update the internal fork of Commons BCEL to r1725718 to align with the refactoring for BCEL 6, the next major BCEL release. (markt)|
Other|2016-03-24 Tomcat 8.5.0 (markt)|Update||Update the internal fork of Commons DBCP 2 to r1725730 (2.1.1 plus additional fixes). (markt)|
Other|2016-03-24 Tomcat 8.5.0 (markt)|Update||Update the internal fork of Commons Pool 2 to r1725738 (2.4.2 plus additional fixes). (markt)|
Other|2016-03-24 Tomcat 8.5.0 (markt)|Update||Update the internal fork of Commons Codec to r1725746 (1.9 plus additional fixes). (markt)|
Other|2016-03-24 Tomcat 8.5.0 (markt)|Fix|58283|Change the default download location for libraries during the build process from /usr/share/java to ${user.home}/temp. Patch provided by Ahmed Hosni. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=58283
Other|2016-03-24 Tomcat 8.5.0 (markt)|Fix|59031|When using the Windows uninstaller, do not remove the contents of any directories that have been symlinked into the Tomcat directory structure. (markt)|https://bz.apache.org/bugzilla/show_bug.cgi?id=59031
Other|2016-03-24 Tomcat 8.5.0 (markt)|Update||Update the packaged version of the Tomcat Native Library to 1.2.5 to pick up the Windows binaries that are based on OpenSSL 1.0.2g and APR 1.5.1. (markt)|
Other|2016-03-24 Tomcat 8.5.0 (markt)|Update||Modify the default tomcat-users.xml file to make it harder for users to configure the entries intended for use with the examples web application for the Manager application. (markt)|
